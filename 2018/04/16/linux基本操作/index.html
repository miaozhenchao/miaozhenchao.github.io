<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>linux基本操作 | ZhenChaoNotes</title><meta name="description" content="①Linux 系统部署一、GNU&#x2F;Linux 的历史1.自由软件之父：Richard M. Stallman  理查德·斯托曼（GNU的创始人） 2.Linux 之父 ：林纳斯•本纳第克特•托瓦兹（Linus Benedict Torvalds） 二、Linux发行版介绍1．RHEL（Red Hat Enterprise Linux） Red Hat公司的Linux系统，商业版 2、CentOS（"><meta name="keywords" content="linux"><meta name="author" content="MiaoZhenChao"><meta name="copyright" content="MiaoZhenChao"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://www.luanyu.cool/2018/04/16/linux%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C/"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//fonts.googleapis.com" crossorigin="crossorigin"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta property="og:type" content="article"><meta property="og:title" content="linux基本操作"><meta property="og:url" content="http://www.luanyu.cool/2018/04/16/linux%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C/"><meta property="og:site_name" content="ZhenChaoNotes"><meta property="og:description" content="①Linux 系统部署一、GNU&#x2F;Linux 的历史1.自由软件之父：Richard M. Stallman  理查德·斯托曼（GNU的创始人） 2.Linux 之父 ：林纳斯•本纳第克特•托瓦兹（Linus Benedict Torvalds） 二、Linux发行版介绍1．RHEL（Red Hat Enterprise Linux） Red Hat公司的Linux系统，商业版 2、CentOS（"><meta property="og:image" content="https://ssyerv1.oss-cn-hangzhou.aliyuncs.com/picture/d91493756f794e678d99cb9524cd2dfd.jpg!sswm"><meta property="article:published_time" content="2018-04-16T06:40:20.000Z"><meta property="article:modified_time" content="2020-09-10T09:10:17.565Z"><meta name="twitter:card" content="summary"><script>var activateDarkMode = function () {
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null) {
    document.querySelector('meta[name="theme-color"]').setAttribute('content', '#000')
  }
}
var activateLightMode = function () {
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null) {
    document.querySelector('meta[name="theme-color"]').setAttribute('content', '#fff')
  }
}

var getCookies = function (name) {
  const value = `; ${document.cookie}`
  const parts = value.split(`; ${name}=`)
  if (parts.length === 2) return parts.pop().split(';').shift()
}

var autoChangeMode = 'false'
var t = getCookies('theme')
if (autoChangeMode === '1') {
  var isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
  var isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
  var isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
  var hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

  if (t === undefined) {
    if (isLightMode) activateLightMode()
    else if (isDarkMode) activateDarkMode()
    else if (isNotSpecified || hasNoSupport) {
      console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
      var now = new Date()
      var hour = now.getHours()
      var isNight = hour <= 6 || hour >= 18
      isNight ? activateDarkMode() : activateLightMode()
    }
    window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
      if (Cookies.get('theme') === undefined) {
        e.matches ? activateDarkMode() : activateLightMode()
      }
    })
  } else if (t === 'light') activateLightMode()
  else activateDarkMode()
} else if (autoChangeMode === '2') {
  now = new Date()
  hour = now.getHours()
  isNight = hour <= 6 || hour >= 18
  if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode()
} else {
  if (t === 'dark') activateDarkMode()
  else if (t === 'light') activateLightMode()
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="prev" title="“不忘初心，牢记使命”主题演讲比赛演讲稿" href="http://www.luanyu.cool/2018/06/03/%E2%80%9C%E4%B8%8D%E5%BF%98%E5%88%9D%E5%BF%83%EF%BC%8C%E7%89%A2%E8%AE%B0%E4%BD%BF%E5%91%BD%E2%80%9D%E4%B8%BB%E9%A2%98%E6%BC%94%E8%AE%B2%E6%AF%94%E8%B5%9B%E6%BC%94%E8%AE%B2%E7%A8%BF/"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web&amp;display=swap"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容:${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  bookmark: {
    message_prev: '按',
    message_next: '键将本页加入书签'
  },
  runtime_unit: '天',
  runtime: true,
  copyright: {"languages":{"author":"作者: MiaoZhenChao","link":"链接: ","source":"来源: ZhenChaoNotes","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  ClickShowText: undefined,
  medium_zoom: false,
  fancybox: true,
  Snackbar: undefined,
  justifiedGallery: {
    js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
    css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
  },
  baiduPush: false,
  highlightCopy: true,
  highlightLang: true,
  isPhotoFigcaption: false,
  islazyload: true,
  isanchor: true    
}</script><script>var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isSidebar: true
  }</script><noscript><style>
#nav {
  opacity: 1
}
.justified-gallery img{
  opacity: 1
}
</style></noscript><link rel="stylesheet" href="/css/background.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="/css/touming.css"><link rel="stylesheet" href="/css/iconfont.css"><script src="/js/sakura.js"></script><div class="aplayer" data-id="5184835907" data-server="netease" data-type="playlist" data-fixed="true" data-listFolded="false" data-order="random" data-preload="auto"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/lete114/CDN/music/APlayer/APlayer.min.css"><script src="https://cdn.jsdelivr.net/gh/lete114/CDN/music/APlayer/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/meting@1.2.0/dist/Meting.min.js"></script><meta name="generator" content="Hexo 4.2.1"></head><body><canvas class="fireworks"></canvas><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="/img/avatar.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">文章</div><div class="length_num">97</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">标签</div><div class="length_num">74</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">分类</div><div class="length_num">54</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/messageboard/"><i class="fa-fw iconfont  icon-liuyanban"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/diary/"><i class="fa-fw iconfont  icon-riji"></i><span> 舔狗日记</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 个人简历</span></a></div></div></div></div><i class="fas fa-arrow-right on" id="toggle-sidebar"></i><div id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#①Linux-系统部署"><span class="toc-number">1.</span> <span class="toc-text">①Linux 系统部署</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#一、GNU-Linux-的历史"><span class="toc-number">1.1.</span> <span class="toc-text">一、GNU&#x2F;Linux 的历史</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#二、Linux发行版介绍"><span class="toc-number">1.2.</span> <span class="toc-text">二、Linux发行版介绍</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#三、Linux相关认证"><span class="toc-number">1.3.</span> <span class="toc-text">三、Linux相关认证</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#四、Linux系统部署（掌握）"><span class="toc-number">1.4.</span> <span class="toc-text">四、Linux系统部署（掌握）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-服务器介绍"><span class="toc-number">1.4.1.</span> <span class="toc-text">1.服务器介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-VMware部署CENTOS"><span class="toc-number">1.4.2.</span> <span class="toc-text">2.VMware部署CENTOS</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#五、Linux系统基本操作（了解）"><span class="toc-number">1.5.</span> <span class="toc-text">五、Linux系统基本操作（了解）</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#②Linux文件和用户管理"><span class="toc-number">2.</span> <span class="toc-text">②Linux文件和用户管理</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#一、文件管理"><span class="toc-number">2.1.</span> <span class="toc-text">一、文件管理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-Linux目录结构"><span class="toc-number">2.1.1.</span> <span class="toc-text">1.Linux目录结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-文件管理"><span class="toc-number">2.1.2.</span> <span class="toc-text">2.文件管理</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#文件类型（理解）"><span class="toc-number">2.1.2.1.</span> <span class="toc-text">文件类型（理解）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#文件管理命令"><span class="toc-number">2.1.2.2.</span> <span class="toc-text">文件管理命令</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#二、用户管理"><span class="toc-number">2.2.</span> <span class="toc-text">二、用户管理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-查看用户-组"><span class="toc-number">2.2.1.</span> <span class="toc-text">1.查看用户&#x2F;组</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-用户-组信息文件"><span class="toc-number">2.2.2.</span> <span class="toc-text">2.用户&#x2F;组信息文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-用户-组管理"><span class="toc-number">2.2.3.</span> <span class="toc-text">2.用户&#x2F;组管理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-提权（了解）"><span class="toc-number">2.2.4.</span> <span class="toc-text">3.提权（了解）</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#③Linux用户权限"><span class="toc-number">3.</span> <span class="toc-text">③Linux用户权限</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#一、基本权限UGO"><span class="toc-number">3.1.</span> <span class="toc-text">一、基本权限UGO</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#二、设置权限"><span class="toc-number">3.2.</span> <span class="toc-text">二、设置权限</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-更改权限chmod"><span class="toc-number">3.2.1.</span> <span class="toc-text">1.更改权限chmod</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-更改属主chown、属组chgrp"><span class="toc-number">3.2.2.</span> <span class="toc-text">2.更改属主chown、属组chgrp</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#三、基本权限-ACL"><span class="toc-number">3.3.</span> <span class="toc-text">三、基本权限 ACL</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-语法"><span class="toc-number">3.3.1.</span> <span class="toc-text">1.语法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-用法"><span class="toc-number">3.3.2.</span> <span class="toc-text">2.用法</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#四、特殊权限（了解）"><span class="toc-number">3.4.</span> <span class="toc-text">四、特殊权限（了解）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-特殊位-suid"><span class="toc-number">3.4.1.</span> <span class="toc-text">1.特殊位 suid</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-文件属性chattr"><span class="toc-number">3.4.2.</span> <span class="toc-text">2.文件属性chattr</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-进程掩码-umask"><span class="toc-number">3.4.3.</span> <span class="toc-text">3.进程掩码 umask</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#④Linux进程管理"><span class="toc-number">4.</span> <span class="toc-text">④Linux进程管理</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#一、进程相关知识（了解）"><span class="toc-number">4.1.</span> <span class="toc-text">一、进程相关知识（了解）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#二、进程管理-process"><span class="toc-number">4.2.</span> <span class="toc-text">二、进程管理 process</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-静态查看进程-ps"><span class="toc-number">4.2.1.</span> <span class="toc-text">1.静态查看进程 ps</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-动态查看进程-top"><span class="toc-number">4.2.2.</span> <span class="toc-text">2.动态查看进程 top</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-使用信号控制进程"><span class="toc-number">4.2.3.</span> <span class="toc-text">3.使用信号控制进程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-进程优先级nice"><span class="toc-number">4.2.4.</span> <span class="toc-text">4.进程优先级nice</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-作业控制-jobs-了解"><span class="toc-number">4.2.5.</span> <span class="toc-text">5.作业控制 jobs(了解)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-虚拟文件系统-proc-（了解）"><span class="toc-number">4.2.6.</span> <span class="toc-text">6.虚拟文件系统 proc （了解）</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#⑤Linux重定向管道"><span class="toc-number">5.</span> <span class="toc-text">⑤Linux重定向管道</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#一、重定向"><span class="toc-number">5.1.</span> <span class="toc-text">一、重定向</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-标准输入、标准输出、标准错误"><span class="toc-number">5.1.1.</span> <span class="toc-text">1.标准输入、标准输出、标准错误</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-重定向案例-gt-lt"><span class="toc-number">5.1.2.</span> <span class="toc-text">2.重定向案例 &gt;_&lt;</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-输入重定向"><span class="toc-number">5.1.3.</span> <span class="toc-text">3.输入重定向</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#二、管道"><span class="toc-number">5.2.</span> <span class="toc-text">二、管道</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-管道"><span class="toc-number">5.2.1.</span> <span class="toc-text">1.管道  |</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-参数传递-Xargs"><span class="toc-number">5.2.2.</span> <span class="toc-text">2.参数传递 Xargs</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#⑥Linux存储管理1"><span class="toc-number">6.</span> <span class="toc-text">⑥Linux存储管理1</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#一、基本分区"><span class="toc-number">6.1.</span> <span class="toc-text">一、基本分区</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#二、管理磁盘"><span class="toc-number">6.2.</span> <span class="toc-text">二、管理磁盘</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-查看磁盘信息"><span class="toc-number">6.2.1.</span> <span class="toc-text">1.查看磁盘信息</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-创建分区（MBR方式）"><span class="toc-number">6.2.2.</span> <span class="toc-text">2.创建分区（MBR方式）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-创建文件系统"><span class="toc-number">6.2.3.</span> <span class="toc-text">3.创建文件系统</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-挂载mount"><span class="toc-number">6.2.4.</span> <span class="toc-text">4.挂载mount</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-查看挂载信息"><span class="toc-number">6.2.5.</span> <span class="toc-text">5.查看挂载信息</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#三、逻辑卷LVM"><span class="toc-number">6.3.</span> <span class="toc-text">三、逻辑卷LVM</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-创建LVM"><span class="toc-number">6.3.1.</span> <span class="toc-text">1.创建LVM</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-VG管理"><span class="toc-number">6.3.2.</span> <span class="toc-text">2.VG管理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-LV扩容"><span class="toc-number">6.3.3.</span> <span class="toc-text">3.LV扩容</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#四、交换分区管理-Swap"><span class="toc-number">6.4.</span> <span class="toc-text">四、交换分区管理 Swap</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-简介"><span class="toc-number">6.4.1.</span> <span class="toc-text">1.简介</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-查看当前的交换分区"><span class="toc-number">6.4.2.</span> <span class="toc-text">2.查看当前的交换分区</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-增加交换分区"><span class="toc-number">6.4.3.</span> <span class="toc-text">3.增加交换分区</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#⑦Linux存储管理2"><span class="toc-number">7.</span> <span class="toc-text">⑦Linux存储管理2</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#一、EXT4文件系统"><span class="toc-number">7.1.</span> <span class="toc-text">一、EXT4文件系统</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#二、文件链接"><span class="toc-number">7.2.</span> <span class="toc-text">二、文件链接</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-符号链接"><span class="toc-number">7.2.1.</span> <span class="toc-text">1.符号链接</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-硬链接"><span class="toc-number">7.2.2.</span> <span class="toc-text">2.硬链接</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-RAID-了解"><span class="toc-number">7.2.3.</span> <span class="toc-text">3.RAID(了解)</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#⑧Linux文件查找"><span class="toc-number">8.</span> <span class="toc-text">⑧Linux文件查找</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#一、文件查找"><span class="toc-number">8.1.</span> <span class="toc-text">一、文件查找</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-命令文件查找which"><span class="toc-number">8.1.1.</span> <span class="toc-text">1.命令文件查找which</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-任意文件find"><span class="toc-number">8.1.2.</span> <span class="toc-text">2.任意文件find</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#二、文件打包及压缩"><span class="toc-number">8.2.</span> <span class="toc-text">二、文件打包及压缩</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-打包，压缩"><span class="toc-number">8.2.1.</span> <span class="toc-text">1.打包，压缩</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-解压"><span class="toc-number">8.2.2.</span> <span class="toc-text">2.解压</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#⑨Linux软件管理"><span class="toc-number">9.</span> <span class="toc-text">⑨Linux软件管理</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#一、RPM包管理"><span class="toc-number">9.1.</span> <span class="toc-text">一、RPM包管理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-YUM工具"><span class="toc-number">9.1.1.</span> <span class="toc-text">1.YUM工具</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-RPM工具"><span class="toc-number">9.1.2.</span> <span class="toc-text">2.RPM工具</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#二、源码包管理"><span class="toc-number">9.2.</span> <span class="toc-text">二、源码包管理</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#⑩Linux计划任务"><span class="toc-number">10.</span> <span class="toc-text">⑩Linux计划任务</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#一、一次性调度执行-at"><span class="toc-number">10.1.</span> <span class="toc-text">一、一次性调度执行 at</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#二、循环调度执行-cron"><span class="toc-number">10.2.</span> <span class="toc-text">二、循环调度执行 cron</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#⑪Linux日志管理"><span class="toc-number">11.</span> <span class="toc-text">⑪Linux日志管理</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#一、rsyslog系统日志管理"><span class="toc-number">11.1.</span> <span class="toc-text">一、rsyslog系统日志管理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-处理日志的进程"><span class="toc-number">11.1.1.</span> <span class="toc-text">1.处理日志的进程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-常见的日志文件-系统、进程、应用程序"><span class="toc-number">11.1.2.</span> <span class="toc-text">2.常见的日志文件(系统、进程、应用程序)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-rsyslogd配置"><span class="toc-number">11.1.3.</span> <span class="toc-text">3.rsyslogd配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-主配置文件"><span class="toc-number">11.1.4.</span> <span class="toc-text">4.主配置文件</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#二、logrotate日志轮转"><span class="toc-number">11.2.</span> <span class="toc-text">二、logrotate日志轮转</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-工作原理"><span class="toc-number">11.2.1.</span> <span class="toc-text">1.工作原理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-主配置文件介绍"><span class="toc-number">11.2.2.</span> <span class="toc-text">2.主配置文件介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-yum日志轮转实例"><span class="toc-number">11.2.3.</span> <span class="toc-text">3.yum日志轮转实例</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#⑫Linux网络管理"><span class="toc-number">12.</span> <span class="toc-text">⑫Linux网络管理</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#一、网络接口名称规则"><span class="toc-number">12.1.</span> <span class="toc-text">一、网络接口名称规则</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#二、NetworkManager服务"><span class="toc-number">12.2.</span> <span class="toc-text">二、NetworkManager服务</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#三、配置网络的工具"><span class="toc-number">12.3.</span> <span class="toc-text">三、配置网络的工具</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#四、配置网络参数"><span class="toc-number">12.4.</span> <span class="toc-text">四、配置网络参数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-配置IP"><span class="toc-number">12.4.1.</span> <span class="toc-text">1.配置IP</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-主机名"><span class="toc-number">12.4.2.</span> <span class="toc-text">2.主机名</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-网络测试工具"><span class="toc-number">12.4.3.</span> <span class="toc-text">3.网络测试工具</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#五、初始化服务器"><span class="toc-number">12.5.</span> <span class="toc-text">五、初始化服务器</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#⑬Linux网络管理实战1"><span class="toc-number">13.</span> <span class="toc-text">⑬Linux网络管理实战1</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#一、OSI简介"><span class="toc-number">13.1.</span> <span class="toc-text">一、OSI简介</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1、OSI-7层结构"><span class="toc-number">13.1.1.</span> <span class="toc-text">1、OSI:7层结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2、TCP-IP-5层结构"><span class="toc-number">13.1.2.</span> <span class="toc-text">2、TCP&#x2F;IP:5层结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3、TCP-IP-4层结构"><span class="toc-number">13.1.3.</span> <span class="toc-text">3、TCP&#x2F;IP:4层结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4、OSI模型和TCP-IP模型的区别"><span class="toc-number">13.1.4.</span> <span class="toc-text">4、OSI模型和TCP&#x2F;IP模型的区别</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5、TCP-IP-数据单元-DU"><span class="toc-number">13.1.5.</span> <span class="toc-text">5、TCP&#x2F;IP:数据单元&#x2F;DU</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-封装和解封装"><span class="toc-number">13.1.6.</span> <span class="toc-text">6.封装和解封装</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#二、TCP-IP协议族"><span class="toc-number">13.2.</span> <span class="toc-text">二、TCP&#x2F;IP协议族</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#三、进制转换"><span class="toc-number">13.3.</span> <span class="toc-text">三、进制转换</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#⑭Linux网络管理实战2"><span class="toc-number">14.</span> <span class="toc-text">⑭Linux网络管理实战2</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#一、物理层"><span class="toc-number">14.1.</span> <span class="toc-text">一、物理层</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-信号"><span class="toc-number">14.1.1.</span> <span class="toc-text">1.信号</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-介质"><span class="toc-number">14.1.2.</span> <span class="toc-text">2.介质</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#二、数据链路层"><span class="toc-number">14.2.</span> <span class="toc-text">二、数据链路层</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-功能"><span class="toc-number">14.2.1.</span> <span class="toc-text">1.功能</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-地址"><span class="toc-number">14.2.2.</span> <span class="toc-text">2.地址</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-帧封装"><span class="toc-number">14.2.3.</span> <span class="toc-text">3.帧封装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-交换机工作原理"><span class="toc-number">14.2.4.</span> <span class="toc-text">4.交换机工作原理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-组建局域网"><span class="toc-number">14.2.5.</span> <span class="toc-text">5.组建局域网</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-VLAN"><span class="toc-number">14.2.6.</span> <span class="toc-text">6.VLAN</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-TRUNK"><span class="toc-number">14.2.7.</span> <span class="toc-text">7.TRUNK</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#⑮Linux网络管理实战3—网络层"><span class="toc-number">15.</span> <span class="toc-text">⑮Linux网络管理实战3—网络层</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#一、IP地址"><span class="toc-number">15.1.</span> <span class="toc-text">一、IP地址</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1、IP分类"><span class="toc-number">15.1.1.</span> <span class="toc-text">1、IP分类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-子网掩码"><span class="toc-number">15.1.2.</span> <span class="toc-text">2.子网掩码</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#二、网络层封装（略）"><span class="toc-number">15.2.</span> <span class="toc-text">二、网络层封装（略）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#三、路由器工作原理（略）"><span class="toc-number">15.3.</span> <span class="toc-text">三、路由器工作原理（略）</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#⑯Linux文件服务"><span class="toc-number">16.</span> <span class="toc-text">⑯Linux文件服务</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#一、FTP-Server"><span class="toc-number">16.1.</span> <span class="toc-text">一、FTP Server</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-FTP-Server-默认配置"><span class="toc-number">16.1.1.</span> <span class="toc-text">1.FTP Server 默认配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-FTP-Clinet"><span class="toc-number">16.1.2.</span> <span class="toc-text">2.FTP Clinet</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-启动上传功能"><span class="toc-number">16.1.3.</span> <span class="toc-text">3.启动上传功能</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#二、NFS-Server"><span class="toc-number">16.2.</span> <span class="toc-text">二、NFS Server</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1、nas（存储端）"><span class="toc-number">16.2.1.</span> <span class="toc-text">1、nas（存储端）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-web1-web2-web3-客户端"><span class="toc-number">16.2.2.</span> <span class="toc-text">2.web1 web2 web3 客户端</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-测试网站访问"><span class="toc-number">16.2.3.</span> <span class="toc-text">3.测试网站访问</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#三、SSH-Server"><span class="toc-number">16.3.</span> <span class="toc-text">三、SSH Server</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#⑰Linux网站服务"><span class="toc-number">17.</span> <span class="toc-text">⑰Linux网站服务</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#一、概念"><span class="toc-number">17.1.</span> <span class="toc-text">一、概念</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#二、静态站点"><span class="toc-number">17.2.</span> <span class="toc-text">二、静态站点</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-Apache基础"><span class="toc-number">17.2.1.</span> <span class="toc-text">1.Apache基础</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-安装Apache"><span class="toc-number">17.2.2.</span> <span class="toc-text">2.安装Apache</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-虚拟主机"><span class="toc-number">17.2.3.</span> <span class="toc-text">3.虚拟主机</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#三、动态站点"><span class="toc-number">17.3.</span> <span class="toc-text">三、动态站点</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#部署论坛系统discuz"><span class="toc-number">17.3.1.</span> <span class="toc-text">部署论坛系统discuz</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#⑱Linux域名服务"><span class="toc-number">18.</span> <span class="toc-text">⑱Linux域名服务</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#一、基本概念"><span class="toc-number">18.1.</span> <span class="toc-text">一、基本概念</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#二、DNS域名解析示例"><span class="toc-number">18.2.</span> <span class="toc-text">二、DNS域名解析示例</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#三、ISP阿里域名申请及解析-略"><span class="toc-number">18.3.</span> <span class="toc-text">三、ISP阿里域名申请及解析(略)</span></a></li></ol></li></ol></div></div></div><div id="body-wrap"><div id="web_bg" data-type="color"></div><header class="post-bg" id="page-header" style="background-image: url(https://ssyerv1.oss-cn-hangzhou.aliyuncs.com/picture/d91493756f794e678d99cb9524cd2dfd.jpg!sswm)"><nav id="nav"><span class="pull-left" id="blog_name"><a class="blog_title" id="site-name" href="/">ZhenChaoNotes</a></span><span class="pull-right menus"><div id="search_button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/messageboard/"><i class="fa-fw iconfont  icon-liuyanban"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/diary/"><i class="fa-fw iconfont  icon-riji"></i><span> 舔狗日记</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 个人简历</span></a></div></div><span class="toggle-menu close"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></span></span></nav><div id="post-info"><div id="post-title"><div class="posttitle">linux基本操作</div></div><div id="post-meta"><div class="meta-firstline"><time class="post-meta__date" title="发表于 2018-04-16 14:40:20"><i class="fa-fw far fa-calendar-alt"></i> 发表于 2018-04-16</time><span class="post-meta__categories"><span class="post-meta__separator">|</span><i class="fas fa-inbox fa-fw post-meta__icon"></i><a class="post-meta__categories" href="/categories/linux/">linux</a></span></div><div class="meta-secondline"> <span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta__icon"></i><span>字数总计:</span><span class="word-count">22k</span><span class="post-meta__separator">|</span><i class="far fa-clock fa-fw post-meta__icon"></i><span>阅读时长: 87 分钟</span></span></div><div class="meta-thirdline"><span class="post-meta-pv-cv"><span class="post-meta__separator">|</span><i class="far fa-eye fa-fw post-meta__icon"></i><span>阅读量:</span><span id="busuanzi_value_page_pv"></span></span><span class="post-meta-commentcount"><span class="post-meta__separator">|</span><i class="far fa-comments fa-fw post-meta__icon"></i><span>评论数:</span><span class="disqus-comment-count comment-count"><a href="http://www.luanyu.cool/2018/04/16/linux%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C/#disqus_thread"></a></span></span></div></div></div></header><main class="layout_post" id="content-inner"><article id="post"><div class="post-content" id="article-container"><h1 id="①Linux-系统部署"><a href="#①Linux-系统部署" class="headerlink" title="①Linux 系统部署"></a>①Linux 系统部署</h1><h2 id="一、GNU-Linux-的历史"><a href="#一、GNU-Linux-的历史" class="headerlink" title="一、GNU/Linux 的历史"></a>一、GNU/Linux 的历史</h2><p>1.自由软件之父：Richard M. Stallman  理查德·斯托曼（GNU的创始人）</p>
<p>2.Linux 之父 ：林纳斯•本纳第克特•托瓦兹（Linus Benedict Torvalds）</p>
<h2 id="二、Linux发行版介绍"><a href="#二、Linux发行版介绍" class="headerlink" title="二、Linux发行版介绍"></a>二、Linux发行版介绍</h2><p>1．RHEL（Red Hat Enterprise Linux）</p>
<p>Red Hat公司的Linux系统，商业版</p>
<p>2、CentOS（Community Enterprise Operating System）</p>
<p>社区企业操作系统，不包含封闭源代码软件</p>
<p>3.Ubunt（乌班图）</p>
<p>一个以桌面应用为主的开源GNU/Linux操作系统，基于Debian GNU/Linux</p>
<p>4.Debian</p>
<p>常指Debian GNU/Linux。广义的Debian是指一个致力于创建自由操作系统的合作组织及其作品，Debian项目众多内核分支中以Linux宏内核为主，开发者所创建的操作系统中绝大部分基础工具来自于GNU工程 </p>
<h2 id="三、Linux相关认证"><a href="#三、Linux相关认证" class="headerlink" title="三、Linux相关认证"></a>三、Linux相关认证</h2><p>RHCA   红帽认证架构师<br>        RHCE  红帽认证工程师<br>        RHCSA   红帽认证系统管理员</p>
<h2 id="四、Linux系统部署（掌握）"><a href="#四、Linux系统部署（掌握）" class="headerlink" title="四、Linux系统部署（掌握）"></a>四、Linux系统部署（掌握）</h2><h3 id="1-服务器介绍"><a href="#1-服务器介绍" class="headerlink" title="1.服务器介绍"></a>1.服务器介绍</h3><p><strong>塔式服务器</strong></p>
<p>常见，外形结构和普通PC类似。塔式服务器尺寸没有统一标准，由于塔式服务器的机箱比较大，服务器的配置也可以很高，冗余扩展很齐备，所以应用范围非常广，是目前使用率最高的一种服务器。</p>
<p><strong>机架式服务器</strong></p>
<p>机架式服务器的外形像交换机，有1U（1U=1.75英寸）、2U、4U等规格。机架式服务器安装在标准的19英寸机柜里面。这种结构的多为功能型服务器。</p>
<p><strong>刀片式服务器</strong>（属于机架式）</p>
<p>刀片服务器在标准高度的机架式机箱内可插装多个卡式的服务器单元，是一种实现HAHD(高可用高密度)的低成本服务器平台，为特殊应用行业和高密度计算环境专门设计。刀片服务器就像“刀片”一样，每一块“刀片”就是一块系统主板。</p>
<h3 id="2-VMware部署CENTOS"><a href="#2-VMware部署CENTOS" class="headerlink" title="2.VMware部署CENTOS"></a>2.VMware部署CENTOS</h3><p>1.安装并打开VMWARE（使用管理员身份运行）<br>        2.在VMware中新建虚拟机<br>        3.典型/自定义，选择自定义安装<br>        4.虚拟机兼容性，默认下一步<br>        5.安装来源，选择稍后安装操作系统<br>        7.操作系统类型，选择linux centos7 64<br>        8.自定义虚拟机名称，和文件夹位置。D:\KF\VM\Centos7-1-64<br>        9.虚拟机CPU，默认下一步<br>        10.内存选择，1024MB<br>        11.网络连接，选择桥接<br>        12.IO类型，默认下一步<br>        13.虚拟磁盘类型，默认下一步<br>        14.创建新磁盘，默认下一步<br>        15.磁盘大小，默认下一步，20G<br>        16.磁盘文件名，默认下一步<br>        17.完成<br>        18.在新虚拟机，选择DVD，选用ISO 镜像，选择CENTOS7 安装镜像<br>        19.开启此虚拟机<br>        20.install centos 7 安装操作系统<br>        21.中文，简体中文<br>        22.软件选择：带GUI的服务器、兼容、开发<br>        23.安装位置：默认选择完成（自动分区）<br>        24.点击开始安装<br>        25.设置root密码<br>        26.同意许可，完成配置<br>        27.时区亚洲上海，用户名，密码<br>        28.root身份进入系统桌面<br>        29.开启网卡自动连接<br>        30.完成实验</p>
<h2 id="五、Linux系统基本操作（了解）"><a href="#五、Linux系统基本操作（了解）" class="headerlink" title="五、Linux系统基本操作（了解）"></a>五、Linux系统基本操作（了解）</h2><p>1.登录root用户<br>        2.打开主文件夹创建并删除文件<br>        3.改变目录：cd  目录名</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd		/etc/sysconfig/network-scritpt</span><br><span class="line">cd		/root</span><br><span class="line">cd  	/aaa/bbb/ccc</span><br></pre></td></tr></table></figure>

<p>4.创建文件:  touch 文件名<br>        5.删除文件： rm -rf  文件名<br>        6.改名文件：mv  源文件 目标文件<br>        7.关机：init  0</p>
<h1 id="②Linux文件和用户管理"><a href="#②Linux文件和用户管理" class="headerlink" title="②Linux文件和用户管理"></a>②Linux文件和用户管理</h1><h2 id="一、文件管理"><a href="#一、文件管理" class="headerlink" title="一、文件管理"></a>一、文件管理</h2><h3 id="1-Linux目录结构"><a href="#1-Linux目录结构" class="headerlink" title="1.Linux目录结构"></a>1.Linux目录结构</h3><p>Linux: 以单根的方式组织文件 /</p>
<p>Linux系统的文件是没有扩展名！！！</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">查看Linux目录结构</span></span><br><span class="line">[root@qianfeng ~]# ls /    </span><br><span class="line">bin dev lib media net root srv usr</span><br><span class="line">boot etc lib64 misc opt sbin sys var</span><br><span class="line">cgroup home lost+found mnt proc selinux tmp</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th align="center">目录名称</th>
<th align="center">功能</th>
</tr>
</thead>
<tbody><tr>
<td align="center">bin</td>
<td align="center">普通用户命令目录   /bin/ls, /bin/date</td>
</tr>
<tr>
<td align="center">sbin</td>
<td align="center">管理员使命令目录   /sbin/service</td>
</tr>
<tr>
<td align="center">dev</td>
<td align="center">设备文件目录。硬件，驱动  /dev/sda,/dev/sda1</td>
</tr>
<tr>
<td align="center">root</td>
<td align="center">root用户家目录</td>
</tr>
<tr>
<td align="center">home</td>
<td align="center">普通用户家目录</td>
</tr>
<tr>
<td align="center">etc</td>
<td align="center">系统配置文件，控制台文件</td>
</tr>
<tr>
<td align="center">usr</td>
<td align="center">系统文件，/usr/local 软件安装的目录</td>
</tr>
<tr>
<td align="center">tmp</td>
<td align="center">临时文件</td>
</tr>
<tr>
<td align="center">var</td>
<td align="center">存放一些变化文件，比如数据库，日志，邮件</td>
</tr>
<tr>
<td align="center">boot</td>
<td align="center">系统启动的相关文件，启动目录</td>
</tr>
<tr>
<td align="center">run</td>
<td align="center">运行</td>
</tr>
<tr>
<td align="center">media</td>
<td align="center">移动设备默认的挂载点</td>
</tr>
<tr>
<td align="center">mnt</td>
<td align="center">手工挂载设备的挂载点</td>
</tr>
<tr>
<td align="center">lib、lib64</td>
<td align="center">库文件Glibc</td>
</tr>
<tr>
<td align="center">lost+found</td>
<td align="center">fsck修复时，存储没有链接的文件或目录</td>
</tr>
</tbody></table>
<h3 id="2-文件管理"><a href="#2-文件管理" class="headerlink" title="2.文件管理"></a>2.文件管理</h3><ul>
<li><h4 id="文件类型（理解）"><a href="#文件类型（理解）" class="headerlink" title="文件类型（理解）"></a>文件类型（理解）</h4></li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">命令ll  -d 可查看</span><br><span class="line"></span><br><span class="line">- 普通文件</span><br><span class="line">d 目录文件</span><br><span class="line"></span><br><span class="line">非常见类型：</span><br><span class="line">b 设备文件（块设备）存储设备硬盘，U盘</span><br><span class="line">c 设备文件（字符设备）打印机，终端 /dev/tty1</span><br><span class="line">l 链接文件</span><br><span class="line">s 套接字文件</span><br><span class="line">p 管道文件</span><br></pre></td></tr></table></figure>

<ul>
<li><h4 id="文件管理命令"><a href="#文件管理命令" class="headerlink" title="文件管理命令"></a>文件管理命令</h4></li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## 1.改变目录</span></span></span><br><span class="line">cd  路径</span><br><span class="line">绝对路径： 从/开始的路径 /home/alice/file1</span><br><span class="line">相对路径： 相对于当前目录开始 ./a.txt</span><br><span class="line"></span><br><span class="line">ls   列出目录当中的内容</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## 2.创建文件</span></span></span><br><span class="line">touch    路径和名字</span><br><span class="line">示例</span><br><span class="line">touch file3 file4</span><br><span class="line">touch /home/file10.txt</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## 3.创建目录</span></span></span><br><span class="line">mkdir      路径和目录名    </span><br><span class="line">mkdir  -p   父系，当创建目录没有上一级时，自动递归创建</span><br><span class="line"></span><br><span class="line">示例====参数 -v 详细 -p 递归</span><br><span class="line"><span class="meta">#</span><span class="bash"> mkdir dir1</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> mkdir /home/dir2 /home/dir3</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> mkdir /home/&#123;dir4,dir5&#125;</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> mkdir -v /home/&#123;dir6,dir7&#125;	//显示详细信息，遍历</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> mkdir -v /home/dir8/111/22	//错误示范</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> mkdir -pv /home/dir8/111/222  //包括其父母的创建，不会有任何消息输出</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> mkdir -pv /home/&#123;qianfeng/&#123;dir1,111&#125;,nizhan&#125;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## 4.复制</span></span></span><br><span class="line">cp   源文件路径     目标文件夹</span><br><span class="line">cp  -r    源目录    目标目录</span><br><span class="line"></span><br><span class="line">示例</span><br><span class="line">====参数 -r 目录 -v 详细 -f 强制   -n  静默</span><br><span class="line"><span class="meta">#</span><span class="bash"> cp -v install.log  /home/dir1	  //-v 显示详细信息</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> cp -v install.log  /home/dir1/qianfeng.txt</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> cp -rv  /etc  /home/dir1    //-r 拷贝文件夹</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> cp  -rv  源文件1 源文件2 源文件N  目标文件 //将多个文件拷贝到同一个目录</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> cp -rfn /etc /tmp    //-f, --force 强制</span></span><br><span class="line"></span><br><span class="line">cp是什么</span><br><span class="line">[root@qianfeng ~]# type -a cp</span><br><span class="line">cp is azliased to `cp -i'</span><br><span class="line">cp is /bin/cp</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## 5.移动</span></span></span><br><span class="line">mv    源文件路径   目标文件路径</span><br><span class="line"></span><br><span class="line">示例</span><br><span class="line">1.创建一个新文件file1</span><br><span class="line"><span class="meta">#</span><span class="bash">touch  /root/file1</span></span><br><span class="line">2.把file1文件移动到/tmp目录中。</span><br><span class="line"><span class="meta">#</span><span class="bash"> mv    /root/file1    /tmp </span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ls    /tmp/file1</span></span><br><span class="line">3.把file1文件更名为file2</span><br><span class="line"><span class="meta">#</span><span class="bash"> mv    /tmp/file1     /tmp/file2</span></span><br><span class="line">4.观察file1文件已经更名为file2</span><br><span class="line"><span class="meta">#</span><span class="bash"> ls  /tmp/file1    /tmp/file2</span></span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## 6.删除</span></span></span><br><span class="line">rm -rf    文件或目录的路径</span><br><span class="line"></span><br><span class="line">示例</span><br><span class="line">====参数  -r 递归 -f force强制 -v 详细过程     *通配符    文件名</span><br><span class="line">[root@qianfeng ~]# rm -rf /home/dir10/* //不包括隐藏文件</span><br><span class="line"></span><br><span class="line">如果快速删除如下文件，“file1.txt和file2.txt”</span><br><span class="line">[root@qianfeng ~]# rm -rf file*</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## 7.查看文件内容</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> cat全部</span></span><br><span class="line"> cat  文件路径</span><br><span class="line">===参数  -n 显示行号   -A 包括控制字符（换行符/制表符）</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> more翻页</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">##### head头部</span></span></span><br><span class="line">[root@qianfeng ~]# head /etc/passwd</span><br><span class="line">[root@qianfeng ~]# head -2 /etc/passwd</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> tail尾部</span></span><br><span class="line">[root@qianfeng ~]# tail /etc/passwd</span><br><span class="line">[root@qianfeng ~]# tail -1 /etc/passwd</span><br><span class="line">[root@qianfeng ~]# tail -f /var/log/secure</span><br><span class="line">注释：tail  -f 动态查看文件的尾部</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> grep过滤关键字</span></span><br><span class="line">语法：grep 关键字   文件名</span><br><span class="line">例：grep 'root' /etc/passwd</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## 8.修改文件内容</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 重定向  &lt;  &gt;   &lt;&lt;    &gt;&gt;</span></span><br><span class="line">[root@qianfeng ~]# ls -a &gt; list.txt</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 文件编辑器1</span></span><br><span class="line">图形文件编辑器 gedit</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 文件编辑器2</span></span><br><span class="line">vi, vim</span><br><span class="line"></span><br><span class="line">可视模式，按V进入，小v光标选取，大V直接选取一行，YYp复制粘贴</span><br><span class="line"></span><br><span class="line">ctrl+V，上下选择，然后可以ctrl+&gt;   进行整体缩进</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">命令模式</span><br><span class="line"></span><br><span class="line">hjkL              //上下左右</span><br><span class="line">0 $               //行首行尾</span><br><span class="line">gg G 			//页首页尾</span><br><span class="line">3G 进入第三行  </span><br><span class="line">/string (n N 可以循环的)     //查找字符，按n键选下一个（重要）</span><br><span class="line">y 复制</span><br><span class="line">d 删除</span><br><span class="line">p 粘贴</span><br><span class="line">u undo撤销</span><br><span class="line">							</span><br><span class="line">a 进入插入模式</span><br><span class="line">i 进入插入模式</span><br><span class="line">o 进入插入模式</span><br><span class="line">A 进入插入模式</span><br><span class="line"></span><br><span class="line">: 进入末行模式（扩展命令模式）</span><br><span class="line">v 进入可视模式</span><br><span class="line">ESC 返回命令模式</span><br><span class="line"></span><br><span class="line">保存、退出</span><br><span class="line"></span><br><span class="line">:w 保存 </span><br><span class="line">:q 退出 </span><br><span class="line">:wq 保存并退出 </span><br><span class="line">:q! 强制退出不保存</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">查找替换</span><br><span class="line"></span><br><span class="line">:范围 s/原内容/新内容/全局 </span><br><span class="line">:1,5 s/root/qianfeng/g          从1－5行的root 替换为qianfeng</span><br><span class="line">读入文件/写文件(另存为)</span><br><span class="line">:w /tmp/aaa.txt 另存为/tmp/aaa.txt </span><br><span class="line"></span><br><span class="line">设置环境 </span><br><span class="line"></span><br><span class="line">:set nu 设置行号 </span><br><span class="line">:set list 显示控制字符</span><br><span class="line">:set nonu 取消设置行号</span><br></pre></td></tr></table></figure>

<h2 id="二、用户管理"><a href="#二、用户管理" class="headerlink" title="二、用户管理"></a>二、用户管理</h2><h3 id="1-查看用户-组"><a href="#1-查看用户-组" class="headerlink" title="1.查看用户/组"></a>1.查看用户/组</h3><p>查看当前登录的用户信息：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@qianfeng ~]# id</span><br><span class="line">uid=0(root) gid=0(root) groups=0(root)</span><br></pre></td></tr></table></figure>

<p>查看文件的owner:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@qianfeng ~]# ll /home/ </span><br><span class="line">drwx------. 4 alice alice 4096 Jun 2 15:59 alice</span><br><span class="line">drwx------. 2 root root 16384 Jun 1 23:09 lost+found</span><br><span class="line">drwxr-xr-x 	2 root root 4096 Jun 2 15:33 qianfeng</span><br></pre></td></tr></table></figure>

<p>查看运行进程的username：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@qianfeng ~]# ps aux </span><br><span class="line">USER PID %CPU %MEM VSZ RSS TTY STAT START TIME COMMAND</span><br><span class="line">root 1 0.0 0.0 19360 1536 ? Ss 13:29 0:00 /sbin/init</span><br><span class="line">root 2 0.0 0.0 0 0 ? S 13:29 0:00 [kthreadd]</span><br><span class="line">root 3 0.0 0.0 0 0 ? S 13:29 0:00 [migration/0]</span><br></pre></td></tr></table></figure>

<h3 id="2-用户-组信息文件"><a href="#2-用户-组信息文件" class="headerlink" title="2.用户/组信息文件"></a>2.用户/组信息文件</h3><p><strong>用户基本信息文件</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[root@qianfeng ~]# cat /etc/passwd      #冒号分割为7列字段</span><br><span class="line"> root:x:0:0:root:/root:/bin/bash</span><br><span class="line"></span><br><span class="line">root  用户名,登录系统的名字</span><br><span class="line">X     密码占位符,具体内容不在这里</span><br><span class="line">0     UID,用户的身份证号</span><br><span class="line">0     GID,GROUP 组号</span><br><span class="line">root  描述,比如经理 manager</span><br><span class="line">/root 家目录,登录系统时所在目录</span><br><span class="line">/bin/bash  登录shell (shell：命令解释器)</span><br><span class="line"></span><br><span class="line">系统约定： RHEL7</span><br><span class="line">uid: 0 特权用户</span><br><span class="line">uid: 1~499 系统用户</span><br><span class="line">uid: 1000+ 普通用户</span><br></pre></td></tr></table></figure>

<p><strong>用户密码信息文件</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">[root@qianfeng ~]# cat /etc/shadow       #冒号分割为8列</span><br><span class="line"> root : $1$MYG2N : 15636 : 0 : 99999 : 7 :   :   :</span><br><span class="line"> </span><br><span class="line">了解即可</span><br><span class="line">加密算法$id$salt$encrypted</span><br><span class="line"><span class="meta">$</span><span class="bash">1: MD5</span></span><br><span class="line"><span class="meta">$</span><span class="bash">5: SHA-256</span></span><br><span class="line"><span class="meta">$</span><span class="bash">6: SHA-512</span></span><br><span class="line">--------------------------</span><br><span class="line">1）“登录名”是与/etc/passwd文件中的登录名相一致的用户账号</span><br><span class="line">2）“口令”字段存放的是加密后的用户口令字，如果为空，则对应用户没有口令，登录时不需要口令；   </span><br><span class="line">星号代表帐号被锁定；</span><br><span class="line">双叹号表示这个密码已经过期了。</span><br><span class="line"><span class="meta">$</span><span class="bash">6$开头的，表明是用SHA-512加密的，</span></span><br><span class="line"><span class="meta">$</span><span class="bash">1$ 表明是用MD5加密的</span></span><br><span class="line"><span class="meta">$</span><span class="bash">2$ 是用Blowfish加密的</span></span><br><span class="line"><span class="meta">$</span><span class="bash">5$ 是用 SHA-256加密的。 </span></span><br><span class="line"></span><br><span class="line">3）“最后一次修改时间”表示的是从某个时刻起，到用户最后一次修改口令时的天数。时间起点对不同的系统可能不一样</span><br><span class="line">4）“最小时间间隔”指的是两次修改口令之间所需的最小天数。</span><br><span class="line">5）“最大时间间隔”指的是口令保持有效的最大天数。</span><br><span class="line">6）“警告时间”字段表示的是从系统开始警告用户到用户密码正式失效之间的天数。</span><br><span class="line">7）“不活动时间”表示的是用户没有登录活动但账号仍能保持有效的最大天数。（软限制。到期后多少天就不能用账号了。）</span><br><span class="line">8）“失效时间”字段给出的是一个绝对的天数，如果使用了这个字段，那么就给出相应账号的生存期。期满后，该账号就不再是一个合法的账号，也就不能再用来登录了。（硬限制）</span><br><span class="line">9) 保留</span><br></pre></td></tr></table></figure>

<p><strong>组信息文件</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@qianfeng ~]# cat /etc/group </span><br><span class="line">    root  :  x  :  0  :</span><br><span class="line">    组名  :组密码: 组ID :组成员(默认为空)</span><br></pre></td></tr></table></figure>

<h3 id="2-用户-组管理"><a href="#2-用户-组管理" class="headerlink" title="2.用户/组管理"></a>2.用户/组管理</h3><p>用户管理</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">#创建用户 未指定选项＝＝系统会创建一个和用户名相同的组作为用户的Primary Group</span></span></span><br><span class="line"></span><br><span class="line">[root@qianfeng ~]# useradd user01 </span><br><span class="line">[root@localhost ~]# id     user01</span><br><span class="line">uid=1001(user01) gid=1001(user01) 组=1001(user01)</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">#创建用户    指定选项</span></span></span><br><span class="line"></span><br><span class="line">[root@qianfeng ~]# useradd user02 -u 1503       //创建用户usr02，指定uid</span><br><span class="line">[root@qianfeng ~]# useradd user03 -d /user03    //创建用户user03 指定家目录</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">#删除用户</span></span></span><br><span class="line">[root@qianfeng ~]# userdel -r user02</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">#修改用户密码</span></span></span><br><span class="line"></span><br><span class="line">方法一：root修改其他用户（alice）密码</span><br><span class="line">[root@qianfeng ~]# passwd alice</span><br><span class="line">方法二：用户（zhuzhu）登录，自己修改密码。</span><br><span class="line">[zhuzhu@qianfeng ~]$ passwd</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">#组成员管理</span></span></span><br><span class="line"></span><br><span class="line">语法：usermod   -G  组名  用户名</span><br><span class="line">[root@qianfeng ~]# usermod  niuniu2 -G hr</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">#其它选项管理</span></span></span><br><span class="line">修改登录SHELL</span><br><span class="line">[root@qianfeng ~]# usermod -s /sbin/nologin niuniu2</span><br></pre></td></tr></table></figure>

<p>用户组管理</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@qianfeng ~]# groupadd hr</span><br><span class="line">[root@qianfeng ~]# groupadd net01 -g 2000      //添加组net01，并指定gid 2000</span><br><span class="line">[root@qianfeng ~]# grep 'net01' /etc/group     //查看/etc/group中组net01信息</span><br><span class="line">[root@qianfeng ~]# groupdel net01   //删除组net01</span><br></pre></td></tr></table></figure>

<p>组分类</p>
<table>
<thead>
<tr>
<th align="center">类型</th>
<th align="center">释义</th>
</tr>
</thead>
<tbody><tr>
<td align="center">基本组/主组</td>
<td align="center">随用户创建，自动创建的同名组。<br>有且仅有1个，显示在/etc/passwd</td>
</tr>
<tr>
<td align="center">附加组</td>
<td align="center">用户加入的其他组，可有多个</td>
</tr>
</tbody></table>
<p>操作示例</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">一、创建用户AAA，同时生成基本组AAA</span><br><span class="line">[root@QF ~]# useradd AAA</span><br><span class="line">[root@QF ~]# grep AAA /etc/passwd</span><br><span class="line">AAA:x:6001:6001::/home/AAA:/bin/bash</span><br><span class="line"></span><br><span class="line">二、创建组CCC</span><br><span class="line">[root@qf ~]# groupadd CCC</span><br><span class="line">[root@qf ~]# grep CCC /etc/group</span><br><span class="line">CCC:x:7001:</span><br><span class="line"></span><br><span class="line">三、修改用户AAA的基本组为CCC，查看passwd中，用户AAA的基本组是CCC</span><br><span class="line">[root@qf ~]# usermod  AAA   -g CCC</span><br><span class="line">[root@qf ~]# grep AAA /etc/passwd</span><br><span class="line">AAA:x:6001:7001::/home/AAA:/bin/bash</span><br><span class="line"></span><br><span class="line">四、修改用户BBB的附加组为CCC，查看group中用户BBB的附加组是CCC</span><br><span class="line">[root@qf ~]# usermod  BBB   -G CCC</span><br><span class="line">[root@qf ~]# grep CCC /etc/group</span><br><span class="line">CCC:x:7001:BBB</span><br></pre></td></tr></table></figure>

<h3 id="3-提权（了解）"><a href="#3-提权（了解）" class="headerlink" title="3.提权（了解）"></a>3.提权（了解）</h3><p><strong>永久提权</strong>Switching users with <strong>su</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[user01@localhost ~]$ id user01</span><br><span class="line">uid=1003(user01) gid=1003(user01) 组=1003(user01)</span><br><span class="line">[user01@localhost ~]$ whoami</span><br><span class="line">user01</span><br><span class="line">[alice@qianfeng ~]$ useradd u1</span><br><span class="line">-bash: /usr/sbin/useradd: 权限不够</span><br><span class="line">[alice@qianfeng ~]$ su - root</span><br><span class="line">password：</span><br><span class="line">[root@qianfeng ~]# useradd u1</span><br><span class="line">成功</span><br></pre></td></tr></table></figure>

<p><strong>临时提权</strong>Running commands as root with <strong>sudo</strong></p>
<p>sudo：当前用户切换到超级用户下,以超级用户身份执行命令，执行完成后，直接退回到当前用户。<br>        具体工作过程如下：<br>        当用户执行sudo时，系统会主动寻找/etc/sudoers文件，判断该用户是否有执行sudo的权限<br>        –&gt;确认用户具有可执行sudo的权限后，让用户输入用户自己的密码确认<br>        –&gt;若密码输入成功，则开始执行sudo后续的命令<br>        sudo配置文件语法：user    MACHINE=COMMANDS</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">目标：创建普通用户xulei，使其具有sudo特权</span><br><span class="line"></span><br><span class="line">示例</span><br><span class="line">1.以root身份授权普通用户xulei</span><br><span class="line">[root@qianfeng ~]# vim /etc/sudoers</span><br><span class="line"><span class="meta">%</span><span class="bash">wheel ALL=(ALL) NOPASSWD: ALL</span></span><br><span class="line">第99行：允许wheel用户组中的用户在不输入该用户的密码的情况下使用所有命令</span><br><span class="line">//或直接添加   xulei  ALL=(ALL) NOPASSWD:ALL</span><br><span class="line"></span><br><span class="line">[root@qianfeng ~]# useradd xulei -G wheel</span><br><span class="line">[root@qianfeng ~]# id xulei</span><br><span class="line">uid=504(xulei) gid=504(xulei) 组=504(xulei),10(wheel)</span><br><span class="line"><span class="meta">#</span><span class="bash"> passwd xulei</span></span><br><span class="line"></span><br><span class="line">2.切换用户xulei登陆</span><br><span class="line">[xulei@qianfeng ~]$ useradd gougou10</span><br><span class="line">-bash: /usr/sbin/useradd: 权限不够</span><br><span class="line">[xulei@qianfeng ~]$ sudo useradd gougou10</span><br><span class="line">[xulei@qianfeng ~]$ id gougou10</span><br><span class="line">uid=505(gougou10) gid=505(gougou10) 组=505(gougou10)</span><br></pre></td></tr></table></figure>

<h1 id="③Linux用户权限"><a href="#③Linux用户权限" class="headerlink" title="③Linux用户权限"></a>③Linux用户权限</h1><h2 id="一、基本权限UGO"><a href="#一、基本权限UGO" class="headerlink" title="一、基本权限UGO"></a>一、基本权限UGO</h2><table>
<thead>
<tr>
<th align="center">权限对象</th>
<th align="center">权限类型</th>
</tr>
</thead>
<tbody><tr>
<td align="center">属主： u</td>
<td align="center">读：r=4</td>
</tr>
<tr>
<td align="center">属组： g</td>
<td align="center">写：w=2</td>
</tr>
<tr>
<td align="center">其他人：o</td>
<td align="center">执行：x=1</td>
</tr>
<tr>
<td align="center">所有人：a(u+g+o)</td>
<td align="center">（左右不相关，分别为2个独立的表）</td>
</tr>
</tbody></table>
<h2 id="二、设置权限"><a href="#二、设置权限" class="headerlink" title="二、设置权限"></a>二、设置权限</h2><h3 id="1-更改权限chmod"><a href="#1-更改权限chmod" class="headerlink" title="1.更改权限chmod"></a>1.更改权限chmod</h3><p>语法： chmod   对象(u/g/o/a)赋值符(+/-/=)权限类型(r/w/x)    文件/目录</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># 1.了解普通文件的基本权限</span></span></span><br><span class="line">[root@localhost tmp]# ll file1 </span><br><span class="line">-rw-r--r--. 1 root root 0 4月  13 20:49 file1</span><br><span class="line">权限           属主 属组                   文件</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># 2.编写程序</span></span></span><br><span class="line">[root@localhost tmp]#vim    file1 </span><br><span class="line">echo    "hello 2020"</span><br><span class="line">read    -p     "请输入您的姓名："     name</span><br><span class="line">echo     "$name 是大笨蛋"</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># 3.增加执行权限</span></span></span><br><span class="line">[root@localhost tmp]# chmod u+x file1   //属主增加执行</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># 4.运行测试--成功</span></span></span><br><span class="line">[root@localhost tmp]# ./file1 </span><br><span class="line">hello 2020</span><br><span class="line">请输入您的姓名：4567</span><br><span class="line">4567 是大笨蛋</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># 5.去除权限--运行失败</span></span></span><br><span class="line">[root@localhost tmp]# chmod u-x file1 </span><br><span class="line">[root@localhost tmp]# ./file1</span><br><span class="line">-bash: ./file1: 权限不够</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># 6.更多的修改权限练习</span></span></span><br><span class="line">[root@localhost tmp]# chmod a=rwx file1   //所有人等于读写执行</span><br><span class="line">[root@localhost tmp]# chmod a=- file1     //所有人没有权限</span><br><span class="line">[root@localhost tmp]# chmod ug=rw,o=r file1     //属主属组等于读写，其他人只读</span><br><span class="line">[root@localhost tmp]# ll file1        //以长模式方式查看文件权限</span><br><span class="line">-rw-rw-r-- 1 alice it 17 10-25 16:45 file1      //显示的结果</span><br><span class="line">使用数字</span><br><span class="line">	4读   2写   1执行</span><br><span class="line">[root@localhost ~]# chmod 644 file1</span><br><span class="line">[root@localhost ~]# ll file1</span><br><span class="line">-rw-r--r-- 1 alice it 17 10-25 16:45 file1</span><br></pre></td></tr></table></figure>

<h3 id="2-更改属主chown、属组chgrp"><a href="#2-更改属主chown、属组chgrp" class="headerlink" title="2.更改属主chown、属组chgrp"></a>2.更改属主chown、属组chgrp</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">chown： 设置一个文件属于谁，属主</span><br><span class="line">语法：  chown   用户名.组名   文件</span><br><span class="line">[root@localhost ~]# chown alice.hr file1  //改属主、属组</span><br><span class="line">[root@localhost ~]# chown alice file1     //只改属主</span><br><span class="line">[root@localhost ~]# chown .hr file1       //只改属组</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">chgrp： 设置一个文件属于哪个组，属组</span><br><span class="line">语法：   chgrp   组名   文件      (-R是递归)</span><br><span class="line">[root@localhost ~]# chgrp it file1    //改文件属组</span><br><span class="line">[root@localhost ~]# chgrp -R it dir1  //改文件属组</span><br></pre></td></tr></table></figure>

<p><strong>案  例</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">针对hr部门的访问目录设置权限，要求如下：</span><br><span class="line"></span><br><span class="line">1. root用户和hr组的员工可以读、写、执行</span><br><span class="line">2. 其他用户没有任何权限</span><br><span class="line"></span><br><span class="line">操作思路：创建组--&gt;创建用户--&gt;修改属主和属组--&gt;设置权限</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">#### 操作示范</span></span></span><br><span class="line"></span><br><span class="line">[root@localhost ~]# groupadd hr</span><br><span class="line">[root@localhost ~]# useradd hr01 -G hr</span><br><span class="line">[root@localhost ~]# useradd hr02 -G hr</span><br><span class="line">[root@localhost ~]# mkdir /home/hr</span><br><span class="line"></span><br><span class="line">[root@localhost ~]# chgrp hr /home/hr</span><br><span class="line">[root@localhost ~]# chmod 770 /home/hr</span><br><span class="line">[root@localhost ~]# ll -d /home/hr/</span><br><span class="line">drwxrwx---. 2 root hr 4096 3月 13 14:26 /home/hr/</span><br></pre></td></tr></table></figure>

<h2 id="三、基本权限-ACL"><a href="#三、基本权限-ACL" class="headerlink" title="三、基本权限 ACL"></a>三、基本权限 ACL</h2><p>ACL文件权限管理： 设置不同用户，不同的基本权限(r、w、x)。对象数量不同。<br>        UGO设置基本权限： 只能一个用户，一个组和其他人</p>
<h3 id="1-语法"><a href="#1-语法" class="headerlink" title="1.语法"></a>1.语法</h3><p>setfacl     -m            u:alice:rw        /home/test.txt</p>
<p>命令       设置    用户/组:用户名:权限    文件对象</p>
<h3 id="2-用法"><a href="#2-用法" class="headerlink" title="2.用法"></a>2.用法</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">#设置,准备文件</span></span></span><br><span class="line">[root@qianfeng ~]# touch /home/test.txt</span><br><span class="line">[root@qianfeng ~]# ll /home/test.txt </span><br><span class="line">-rw-r--r-- 1 root root 0 10-26 13:59 /home/test.txt</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># 设置ACL</span></span></span><br><span class="line">查看文件有哪些ACL权限</span><br><span class="line">[root@qianfeng ~]# getfacl /home/test.txt</span><br><span class="line">设置用户alice,jack权限</span><br><span class="line">前提：创建alice 和jack用户。过程略</span><br><span class="line">[root@qianfeng ~]# setfacl -m u:alice:rw /home/test.txt</span><br><span class="line">[root@qianfeng ~]# setfacl -m u:jack:- /home/test.txt</span><br><span class="line">请思考命令中的o是什么作用?</span><br><span class="line">[root@qianfeng ~]# setfacl -m o::rw /home/test.txt</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># 查看/删除</span></span></span><br><span class="line">如何删除一条acl，如何删除所有acl呢？</span><br><span class="line">[root@qianfeng ~]# getfacl /home/test.txt</span><br><span class="line"></span><br><span class="line">[root@qianfeng ~]# setfacl -m g:hr:r /home/test.txt</span><br><span class="line">[root@qianfeng ~]# setfacl -x g:hr /home/test.txt //删除组hr的acl权限</span><br><span class="line">[root@qianfeng ~]# setfacl -b /home/test.txt //删除所有acl权限</span><br></pre></td></tr></table></figure>

<h2 id="四、特殊权限（了解）"><a href="#四、特殊权限（了解）" class="headerlink" title="四、特殊权限（了解）"></a>四、特殊权限（了解）</h2><h3 id="1-特殊位-suid"><a href="#1-特殊位-suid" class="headerlink" title="1.特殊位 suid"></a>1.特殊位 suid</h3><p>高级权限的类型</p>
<p>suid针对文件/程序时，具备临时获得属主的权限。</p>
<p>问题： 下面的操作，为什么会失败！</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# ll /root/file1.txt </span><br><span class="line">-rw-r--r-- 1 root root 4 7月  27 14:14 /root/file1.txt</span><br><span class="line">[root@localhost ~]#su - alice</span><br><span class="line">[alice@localhost ~]$ cat /root/file1.txt</span><br><span class="line">cat: /root/file1.txt: 权限不够</span><br><span class="line"></span><br><span class="line">分析：root运行是超管的权限，普通用户运行时是普通用户的权限。</span><br><span class="line">root      /usr/bin/cat (root)            /root/file1.txt          OK</span><br><span class="line">alice     /usr/bin/cat (alice)            /root/file1.txt</span><br></pre></td></tr></table></figure>

<p>示例———–设置suid，使普通用户通过suid临时提权，查看超管root用户的文件</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">1.为cat程序添加上suid权限</span><br><span class="line">[root@qianfeng ~]# ll  /usr/bin/cat</span><br><span class="line">自习观察输出信息1</span><br><span class="line">[root@qianfeng ~]# chmod u+s /usr/bin/cat</span><br><span class="line">[root@qianfeng ~]# ll  /usr/bin/cat</span><br><span class="line">自习观察输出信息2（这两次有什么不同呢？）</span><br><span class="line"></span><br><span class="line">2.使用普通用户运行cat。暂时获得root权限</span><br><span class="line">[alice@qianfeng ~]$ cat /root/file1.txt</span><br><span class="line">请在试验后，将cat的suid权限除去。</span><br><span class="line">[root@qianfeng ~]# chmod u-s /usr/bin/cat</span><br><span class="line">[root@qianfeng ~]# ll  /usr/bin/cat</span><br><span class="line">自习观察输出信息3（请确认是否删除suid特殊权限）</span><br></pre></td></tr></table></figure>

<h3 id="2-文件属性chattr"><a href="#2-文件属性chattr" class="headerlink" title="2.文件属性chattr"></a>2.文件属性chattr</h3><p><strong>用途</strong>：常用于锁定某个文件，拒绝修改。</p>
<table>
<thead>
<tr>
<th align="center">属性分类</th>
<th align="center">释  义</th>
</tr>
</thead>
<tbody><tr>
<td align="center">a</td>
<td align="center">Append Only，只允许在此文件之后追加数据，不允许覆盖或截断此文件。<br>若目录具有该属性，只允许在此目录下建立和修改文件，而不许删除任何文件</td>
</tr>
<tr>
<td align="center">i</td>
<td align="center">即Immutable，不允许对这个文件进行任何修改。若目录具有该属性，<br>只能修改目录之下的文件，不允许建立和删除文件</td>
</tr>
<tr>
<td align="center">A</td>
<td align="center">即Atime，告诉系统不要修改/更新此文件的最后访问时间</td>
</tr>
<tr>
<td align="center">S</td>
<td align="center">即Sync，一旦此文件执行了写操作，系统立刻把修改结果写到磁盘</td>
</tr>
<tr>
<td align="center">s</td>
<td align="center">彻底删除文件，不可恢复。因为是从磁盘上删除，用0填充文件所在区域</td>
</tr>
<tr>
<td align="center">c</td>
<td align="center">将文件或目录压缩后存放</td>
</tr>
<tr>
<td align="center">D</td>
<td align="center">检查压缩文件中的错误</td>
</tr>
<tr>
<td align="center">d</td>
<td align="center">在dump程序执行时，该文件或目录不会被dump备份</td>
</tr>
<tr>
<td align="center">u</td>
<td align="center">删除文件时，系统会保留其数据块，以便以后恢复。防止意外删除</td>
</tr>
<tr>
<td align="center">t</td>
<td align="center">文件系统支持尾部合并（tail-merging）</td>
</tr>
<tr>
<td align="center">X</td>
<td align="center">可以直接访问压缩文件的内容</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th align="center">参 数</th>
<th align="center">作  用</th>
</tr>
</thead>
<tbody><tr>
<td align="center">-R</td>
<td align="center">递归处理，将指定目录下的所有文件及子目录一并处理</td>
</tr>
<tr>
<td align="center">-V</td>
<td align="center">显示指令执行过程</td>
</tr>
<tr>
<td align="center">-v&lt;版本编号&gt;</td>
<td align="center">设置文件或目录版本</td>
</tr>
<tr>
<td align="center">+&lt;属性&gt;</td>
<td align="center">开启文件或目录的该项属性</td>
</tr>
<tr>
<td align="center">-&lt;属性&gt;</td>
<td align="center">关闭文件或目录的该项属性</td>
</tr>
<tr>
<td align="center">=&lt;属性&gt;</td>
<td align="center">指定文件或目录的该项属性</td>
</tr>
</tbody></table>
<p>示例</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">1 先创建新文件进行对比。查看默认权限</span><br><span class="line">[root@qianfeng ~]# touch file100</span><br><span class="line">[root@qianfeng ~]# lsattr file100</span><br><span class="line">-------------- file100</span><br><span class="line">2 加上不能删除的属性</span><br><span class="line">[root@qianfeng ~]# chattr +i file100 	//不能更改，重命名，删除</span><br><span class="line">3 查看不同属性</span><br><span class="line">[root@qianfeng ~]# lsattr file100</span><br><span class="line">----i--------- file100</span><br><span class="line">4 尝试删除</span><br><span class="line">[root@qianfeng ~]# rm -rf file100 </span><br><span class="line">rm: cannot remove `file100': Operation not permitted</span><br><span class="line">5 将属性还原</span><br><span class="line">[root@qianfeng ~]# chattr -i file100</span><br></pre></td></tr></table></figure>

<p><strong>注  意</strong></p>
<p>设置文件属性(特别权限)，针对所有用户，root是否会受到影响？答案是肯定的，会受到影响。</p>
<h3 id="3-进程掩码-umask"><a href="#3-进程掩码-umask" class="headerlink" title="3.进程掩码 umask"></a>3.进程掩码 umask</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">示例1: 观察系统默认掩码</span></span><br><span class="line">在shell进程中创建文件，先查看当前用户的umask权限</span><br><span class="line">[root@qianfeng ~]# umask 			</span><br><span class="line">0022</span><br><span class="line">[root@qianfeng ~]# touch file80</span><br><span class="line">[root@qianfeng ~]# mkdir dir80</span><br><span class="line">[root@qianfeng ~]# ll -d dir80 file80</span><br><span class="line">drwxr-xr-x. 2 root root 4096 3月  11 19:40 dir800</span><br><span class="line">-rw-r--r--. 1 root root    0 3月  11 19:40 file800</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">修改shell umask值（临时）</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">示例2：修改shell <span class="built_in">umask</span>值（临时）</span></span><br><span class="line">[root@qianfeng ~]# umask 000</span><br><span class="line">[root@qianfeng ~]# mkdir dir90</span><br><span class="line">[root@qianfeng ~]# touch file90</span><br><span class="line">[root@qianfeng ~]# ll -d dir90 file90</span><br><span class="line">drwxrwxrwx. 2 root root 4096 3月  11 19:44 dir900</span><br><span class="line">-rw-rw-rw-. 1 root root    0 3月  11 19:44 file900</span><br></pre></td></tr></table></figure>

<h1 id="④Linux进程管理"><a href="#④Linux进程管理" class="headerlink" title="④Linux进程管理"></a>④Linux进程管理</h1><h2 id="一、进程相关知识（了解）"><a href="#一、进程相关知识（了解）" class="headerlink" title="一、进程相关知识（了解）"></a>一、进程相关知识（了解）</h2><p><strong>1.进程定义</strong></p>
<p>进程是已启动的可执行程序的运行实例，是程序运行的过程， 动态，有生命周期及运行状态。</p>
<p>程序： 二进制文件，静态 /usr/bin/passwd ,/usr/sbin/useradd<br>​                </p>
<p><strong>2.进程的生命周期</strong></p>
<ul>
<li>父进程复制自己的地址空间（fork）创建一个新的（子）进程结构。</li>
</ul>
<ul>
<li>每个新进程分配一个，唯一的进程 ID （PID），满足跟踪安全性之需。</li>
</ul>
<ul>
<li>任何进程都可以创建子进程。</li>
</ul>
<ul>
<li><p>所有进程都是第一个系统进程的后代：</p>
<p>Centos5/6系统进程: init</p>
<p>Centos7系统进程: systemd</p>
</li>
</ul>
<p><strong>3.进程状态产生原因</strong></p>
<p>在多任务处理操作系统中，每个CPU（或核心）在一个时间点上只能处理一个进程。在进程运行时，它对CPU 时间和资源分配的要求会不断变化，从而为进程分配一个状态，它随着环境要求而改变。</p>
<h2 id="二、进程管理-process"><a href="#二、进程管理-process" class="headerlink" title="二、进程管理 process"></a>二、进程管理 process</h2><h3 id="1-静态查看进程-ps"><a href="#1-静态查看进程-ps" class="headerlink" title="1.静态查看进程 ps"></a>1.静态查看进程 ps</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@qianfeng ~]# ps aux |   head  -2</span><br><span class="line"></span><br><span class="line">USER  PID  %CPU  %MEM   VSZ    RSS   TTY  STAT  START  TIME     COMMAND</span><br><span class="line">root   1   0.0   0.6   128096  6708   ?    Ss   16:20  0:01  /usr/lib/systemd/systemd</span><br><span class="line">命令参数</span><br><span class="line">ps a  显示现行终端机下的所有程序 </span><br><span class="line">ps u   以用户为主的格式来显示程序状况。  </span><br><span class="line">ps x   不以终端机来区分。</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th align="center">ps aux 输出字段名</th>
<th align="center">含  义</th>
</tr>
</thead>
<tbody><tr>
<td align="center">USER</td>
<td align="center">运行进程的用户</td>
</tr>
<tr>
<td align="center">PID</td>
<td align="center">进程ID</td>
</tr>
<tr>
<td align="center">%CPU</td>
<td align="center">CPU占用率</td>
</tr>
<tr>
<td align="center">%MEM</td>
<td align="center">内存占用率</td>
</tr>
<tr>
<td align="center">VSZ</td>
<td align="center">占用虚拟内存</td>
</tr>
<tr>
<td align="center">RSS</td>
<td align="center">占用实际内存</td>
</tr>
<tr>
<td align="center">TTY</td>
<td align="center">进程运行的终端类型（ ?代表本机打开，无终端 ）</td>
</tr>
<tr>
<td align="center">STAT</td>
<td align="center">进程状态（R运行，S睡眠，T停止，Z僵死，X已杀掉）</td>
</tr>
<tr>
<td align="center">START</td>
<td align="center">进程的启动时间</td>
</tr>
<tr>
<td align="center">TIME</td>
<td align="center">进程占用CPU的总时间</td>
</tr>
<tr>
<td align="center">COMMAND</td>
<td align="center">进程文件，进程名</td>
</tr>
</tbody></table>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># 1.进程排序</span></span></span><br><span class="line">ps aux --sort %cpu</span><br><span class="line"></span><br><span class="line">例：以CPU占比降序排列（减号是降序）</span><br><span class="line">[root@qianfeng ~]# ps aux --sort -%cpu</span><br><span class="line">[root@qianfeng ~]# ps aux --sort %cpu</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># 2.进程的父子关系</span></span></span><br><span class="line">ps -ef</span><br><span class="line"></span><br><span class="line">例：查看进程的父子关系。 请观察PID和PPID</span><br><span class="line">[root@qianfeng ~]# ps -ef</span><br><span class="line">UID         PID   PPID  C STIME TTY          TIME CMD</span><br><span class="line">root          1      0  0 1月22 ?       00:00:07 /usr/lib/systemd/systemd </span><br><span class="line">root          2      0  0 1月22 ?       00:00:00 [kthreadd]</span><br><span class="line">root          3      2  0 1月22 ?       00:00:06 [ksoftirqd/0]</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># 3.自定义显示字段</span></span></span><br><span class="line"> ps axo</span><br><span class="line"> </span><br><span class="line">[root@qianfeng ~]# ps axo user,pid,ppid,%mem,command |head -3 </span><br><span class="line">root 8310 1 0.1 /usr/sbin/httpd</span><br><span class="line">apache 8311 8310 0.0 /usr/sbin/httpd</span><br><span class="line">apache 8312 8310 0.0 /usr/sbin/httpd</span><br></pre></td></tr></table></figure>

<h3 id="2-动态查看进程-top"><a href="#2-动态查看进程-top" class="headerlink" title="2.动态查看进程 top"></a>2.动态查看进程 top</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@qianfeng ~]# top</span><br><span class="line"></span><br><span class="line">top - 11:45:08 up 18:54,  4 users,  load average: 0.05, 0.05, 0.05</span><br><span class="line">Tasks: 176 total,   1 running, 175 sleeping,   0 stopped,   0 zombie</span><br><span class="line"><span class="meta">%</span><span class="bash">Cpu(s):  0.0 us,  0.3 sy,  0.0 ni, 99.7 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st</span></span><br><span class="line">KiB Mem :  3865520 total,  1100000 free,   580268 used,  2185252 buff/cache</span><br><span class="line">KiB Swap:  4063228 total,  4063228 free,        0 used.  2917828 avail Mem</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th align="center">每行名称</th>
<th align="center">释  义</th>
</tr>
</thead>
<tbody><tr>
<td align="center">top</td>
<td align="center">从左到右依次为当前系统时间，系统运行的时间，系统在<br>之前1min、5min和15min内cpu的平均负载值</td>
</tr>
<tr>
<td align="center">Tasks</td>
<td align="center">该行给出进程整体的统计信息，包括统计周期内进程总数、运行状态进程数、<br>休眠状态进程数、停止状态进程数和僵死状态进程数</td>
</tr>
<tr>
<td align="center">Cpu(s)</td>
<td align="center">cpu整体统计信息，包括用户态下进程、系统态下进程占用cpu时间比，nice值大于0的进程在用户态下占用cpu时间比，cpu处于idle状态、wait状态的时间比，以及处理硬中断、软中断的时间比</td>
</tr>
<tr>
<td align="center">Mem</td>
<td align="center">内存统计信息，包括物理内存总量、已用内存、空闲内存<br>以及用作缓冲区的内存量（单位：K、M、G）</td>
</tr>
<tr>
<td align="center">Swap</td>
<td align="center">虚存统计信息，包括交换空间总量、已用交换区大小、空闲交换区大小<br>以及用作缓存的交换空间大小（单位：K、M、G）</td>
</tr>
</tbody></table>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">#字段介绍（了解）</span></span></span><br><span class="line"></span><br><span class="line">PID: 进程pid</span><br><span class="line">USER: 拉起进程的用户</span><br><span class="line">PR: 该列值加100为进程优先级，若优先级小于100，则该进程为实时(real-time)进程，否则为普通(normal)进程，实时进程的优先级更高，更容易获得cpu调度，以上输出结果中，java进程优先级为120，是普通进程，had进程优先级为2，为实时进程，migration 进程的优先级RT对应于0，为最高优先级</span><br><span class="line">NI: 进程的nice优先级值，该列中，实时进程的nice值为0，普通进程的nice值范围为-20~19</span><br><span class="line">VIRT: 进程所占虚拟内存大小（默认单位kB）</span><br><span class="line">RES: 进程所占物理内存大小（默认单位kB）</span><br><span class="line">SHR: 进程所占共享内存大小（默认单位kB）</span><br><span class="line">S: 进程的运行状态</span><br><span class="line"><span class="meta">%</span><span class="bash">CPU: 采样周期内进程所占cpu百分比</span></span><br><span class="line"><span class="meta">%</span><span class="bash">MEM: 采样周期内进程所占内存百分比</span></span><br><span class="line">TIME+: 进程使用的cpu时间总计</span><br><span class="line">COMMAND: 拉起进程的命令</span><br></pre></td></tr></table></figure>

<p><strong>top技巧</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">动态查看进程 top，像windows的任务管理器</span><br><span class="line">[root@qianfeng ~]# top          //回车，立刻刷新。按z彩色显示，按F，通过光标设置列的顺序。</span><br><span class="line">[root@qianfeng ~]# top -d 1     //每1秒刷新。</span><br><span class="line">[root@qianfeng ~]# top -d 1 -p 10126      //查看指定进程的动态信息</span><br><span class="line">[root@qianfeng ~]# top -d 1 -p 10126,1    //查看10126和1号进程</span><br></pre></td></tr></table></figure>

<h3 id="3-使用信号控制进程"><a href="#3-使用信号控制进程" class="headerlink" title="3.使用信号控制进程"></a>3.使用信号控制进程</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">给进程发送信号---<span class="built_in">kill</span></span></span><br><span class="line">[root@qianfeng ~]# kill -l     // 列出所有支持的信号</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th align="center">编 号</th>
<th align="center">信号名</th>
<th align="center">作  用</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1)</td>
<td align="center">SIGHUP</td>
<td align="center">重新加载配置</td>
</tr>
<tr>
<td align="center">2)</td>
<td align="center">SIGINT</td>
<td align="center">键盘中断Ctrl+C</td>
</tr>
<tr>
<td align="center">3)</td>
<td align="center">SIGQUIT</td>
<td align="center">键盘退出Ctrl+\，类似SIGINT</td>
</tr>
<tr>
<td align="center"><strong>9)</strong></td>
<td align="center"><strong>SIGKILL</strong></td>
<td align="center"><strong>强制终止，无条件(杀死)</strong></td>
</tr>
<tr>
<td align="center"><strong>15)</strong></td>
<td align="center"><strong>SIGTERM</strong></td>
<td align="center"><strong>终止（正常结束），缺省信号</strong></td>
</tr>
<tr>
<td align="center">18)</td>
<td align="center">SIGCONT</td>
<td align="center">继续</td>
</tr>
<tr>
<td align="center">19)</td>
<td align="center">SIGSTOP</td>
<td align="center">暂停</td>
</tr>
<tr>
<td align="center">20)</td>
<td align="center">SIGTSTP</td>
<td align="center">键盘暂停Ctrl+Z</td>
</tr>
</tbody></table>
<h3 id="4-进程优先级nice"><a href="#4-进程优先级nice" class="headerlink" title="4.进程优先级nice"></a>4.进程优先级nice</h3><p>Linux 进程调度及多任务，每个CPU在一个时间点上只能处理一个进程，通过时间片技术，来同时运行多个程序。系统中的两种优先级，在top中显示的优先级有两个，PR值和nice值</p>
<table>
<thead>
<tr>
<th align="center">优先级名称</th>
<th align="center">范围</th>
<th align="center">特  性</th>
</tr>
</thead>
<tbody><tr>
<td align="center">PR</td>
<td align="center">0~39</td>
<td align="center">将nice级别显示为映射到更大优先级队列</td>
</tr>
<tr>
<td align="center">nice</td>
<td align="center">-20~19</td>
<td align="center">NI：实际nice值。值越高：表示优先级越低，如+19<br>值越低：表示优先级越高，如-20</td>
</tr>
</tbody></table>
<ul>
<li>查看进程的nice级别    </li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# ps axo pid,command,nice,cls --sort=-nice</span><br><span class="line">		cls表示显示策略列。</span><br><span class="line">		TS 表示该进程使用的调度策略为SCHED_OTHER</span><br><span class="line">		FF表示高级进程first in  first out</span><br></pre></td></tr></table></figure>

<ul>
<li><p>启动具有不同nice级别的进程</p>
<p>默认情况：启动进程时，通常会继承父进程的 nice级别，默认为0            </p>
</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">#手动启动不同nice，观察两个程序的不同nice值</span></span></span><br><span class="line">[root@localhost ~]# nice -n -5 sleep 6000 &amp;</span><br><span class="line">[1] 2220</span><br><span class="line">[root@localhost ~]# nice -n -10 sleep 7000 &amp;</span><br><span class="line">[2] 2229</span><br><span class="line">[root@localhost ~]# ps axo command,pid,nice | grep sleep</span><br><span class="line">sleep 6000                    2220  -5</span><br><span class="line">sleep 7000                    2229 -10</span><br><span class="line">grep --color=auto sleep       2233   0</span><br></pre></td></tr></table></figure>

<ul>
<li>更改现有进程的nice级别</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">#使用shell更改nice级别</span></span></span><br><span class="line">1.创建一个睡眠示例程序</span><br><span class="line">[root@localhost ~]# sleep 7000 &amp;</span><br><span class="line">[2] 2669</span><br><span class="line"></span><br><span class="line">2.修改他的nice值</span><br><span class="line">[root@localhost ~]# renice -20 2669</span><br><span class="line">2669 (进程 ID) 旧优先级为 0，新优先级为 -20，观察修旧的nice值。</span><br></pre></td></tr></table></figure>

<h3 id="5-作业控制-jobs-了解"><a href="#5-作业控制-jobs-了解" class="headerlink" title="5.作业控制 jobs(了解)"></a>5.作业控制 jobs(了解)</h3><p>作业控制是一个命令行功能，也叫后台运行。</p>
<p>foreground：前台进程，是在终端中运行的命令，占领终端。</p>
<p>background：后台进程，没有控制终端，它不需要终端的交互。看不见，但是在运行。</p>
<p><strong>后台程序控制示例</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 1.观察占领前台的现象。运行一个程序，当前终端无法输入。大部分命令行输入已经无效。</span></span><br><span class="line">[root@qianfeng ~]# sleep 2000</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 2.运行后台程序</span></span><br><span class="line">[root@qianfeng ~]# sleep 3000 &amp;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 3.ps查询所有程序</span></span><br><span class="line">[root@qianfeng ~]# ps aux |grep sleep</span><br><span class="line">root 8895 0.0 0.0 100900 556 pts/0 S 12:13 0:00 sleep 3000</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 4.jobs查看后台进程</span></span><br><span class="line">[root@qianfeng ~]# jobs</span><br><span class="line">[1]- Running sleep 3000 &amp;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 5.调动后台程序至前台</span></span><br><span class="line">[root@qianfeng ~]# fg  1 //将作业1调回到前台</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 6.消灭后台进程</span></span><br><span class="line">[root@qianfeng ~]# kill  %1</span><br></pre></td></tr></table></figure>

<p>注意</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">“kill 1”   和   “kill   %1”  不同，</span><br><span class="line">前者终止PID为1的进程，</span><br><span class="line">后者杀死作业序号为1的后台程序</span><br></pre></td></tr></table></figure>

<h3 id="6-虚拟文件系统-proc-（了解）"><a href="#6-虚拟文件系统-proc-（了解）" class="headerlink" title="6.虚拟文件系统 proc （了解）"></a>6.虚拟文件系统 proc （了解）</h3><p>虚拟文件系统：采集服务器自身 内核、进程运行的状态信息</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">/proc/cpuinfo     //CPU</span><br><span class="line">[root@qianfeng ~]# cat   /proc/cpuinfo</span><br><span class="line"></span><br><span class="line">/proc/meminfo    //内存</span><br><span class="line">[root@qianfeng ~]# less /proc/meminfo</span><br><span class="line"></span><br><span class="line">/proc/cmdline    //内核</span><br><span class="line">[root@qianfeng ~]# cat /proc/cmdline</span><br></pre></td></tr></table></figure>



<h1 id="⑤Linux重定向管道"><a href="#⑤Linux重定向管道" class="headerlink" title="⑤Linux重定向管道"></a>⑤Linux重定向管道</h1><h2 id="一、重定向"><a href="#一、重定向" class="headerlink" title="一、重定向"></a>一、重定向</h2><h3 id="1-标准输入、标准输出、标准错误"><a href="#1-标准输入、标准输出、标准错误" class="headerlink" title="1.标准输入、标准输出、标准错误"></a>1.标准输入、标准输出、标准错误</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">FD，file descriptors，文件描述符</span><br><span class="line">进程使用文件描述符来管理打开的文件</span><br><span class="line"></span><br><span class="line">FD是访问文件的标识，即链接文件</span><br><span class="line">	0是键盘只读，</span><br><span class="line">	1,2是终端可以理解是屏幕，</span><br><span class="line">	3+是文件，可读可写</span><br></pre></td></tr></table></figure>

<p>示例<br>    通过VIM程序，来观察一个进程的FD信息。<br>    1.通过一个终端，打开一个文本。<br>        vim 1.txt<br>    2.通过另一个终端，查询文本程序的进程号<br>        ps  aux| grep vim<br>    3.在/proc目录中查看文本程序的FD<br>        通常在 /proc/PID/fd  就能看到文件的FD调用情况。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# ls /proc/5606/fd</span><br><span class="line">			感觉好像没什么。用用ls -l呢？</span><br><span class="line">[root@localhost ~]# ll /proc/5606/fd</span><br><span class="line">		总用量 0</span><br><span class="line">lrwx------. 1 root root 64 10月 10 07:37 0 -&gt; /dev/pts/2   ##标准输入</span><br><span class="line">lrwx------. 1 root root 64 10月 10 07:37 1 -&gt; /dev/pts/2   ##标准输出</span><br><span class="line">lrwx------. 1 root root 64 10月 10 07:37 2 -&gt; /dev/pts/2   ##标准错误输出</span><br><span class="line">lrwx------. 1 root root 64 10月 10 07:37 3 -&gt; /root/.1.txt.swp   ##常规文件</span><br></pre></td></tr></table></figure>

<h3 id="2-重定向案例-gt-lt"><a href="#2-重定向案例-gt-lt" class="headerlink" title="2.重定向案例 &gt;_&lt;"></a>2.重定向案例 &gt;_&lt;</h3><table>
<thead>
<tr>
<th align="center">输出重定向</th>
<th align="center">符   号</th>
</tr>
</thead>
<tbody><tr>
<td align="center">正确输出</td>
<td align="center">1&gt;等价于 &gt;                1&gt;&gt; 等价于&gt;&gt;</td>
</tr>
<tr>
<td align="center">错误输出</td>
<td align="center">2&gt;（无简写）          2&gt;&gt;（无简写）</td>
</tr>
</tbody></table>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">案例1，输出重定向</span><br><span class="line">[root@qianfeng ~]# date 1&gt; date.txt </span><br><span class="line">[root@qianfeng ~]# date &gt;&gt; date.txt</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">案例2：错误输出重定向</span><br><span class="line">	​错误示范</span><br><span class="line">[root@qianfeng ~]# ls /home/    2&gt;    list.txt </span><br><span class="line">//观察list.txt文件中有没有内容？因为没有错误信息</span><br><span class="line">	​正确示范</span><br><span class="line">[root@qianfeng ~]# ls  /aaaaaaaaa 2&gt;  list.txt </span><br><span class="line">[root@qianfeng ~]# cat  list.txt </span><br><span class="line">ls: 无法访问/aaaaaaaaa: 没有那个文件或目录</span><br><span class="line">//当某条命令产生错误时，才会有错误输出</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">案例3： 正确和错误都输入到相同位置</span><br><span class="line">[root@qianfeng ~]# ls /home/ /aaaaaaaaa &amp;&gt;list.txt</span><br><span class="line"><span class="meta">#</span><span class="bash">生产环境常用，将输出丢弃</span></span><br><span class="line">[root@qianfeng ~]#yum  install   httpd  &amp;&gt;/dev/null</span><br></pre></td></tr></table></figure>

<h3 id="3-输入重定向"><a href="#3-输入重定向" class="headerlink" title="3.输入重定向"></a>3.输入重定向</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">标准输入： &lt; 等价 0&lt;</span><br><span class="line"></span><br><span class="line">案例：利用现成的邮件内容快速输入，发送邮件</span><br><span class="line">[root@qianfeng ~]# mail -s "test01" alice &lt;  word.txt</span><br><span class="line">原理：利用输入重定向，把文件内容代替人为的输入</span><br></pre></td></tr></table></figure>

<h2 id="二、管道"><a href="#二、管道" class="headerlink" title="二、管道"></a>二、管道</h2><h3 id="1-管道"><a href="#1-管道" class="headerlink" title="1.管道  |"></a>1.管道  |</h3><ul>
<li><p><strong>进程管道 Piping</strong></p>
<img src= "/img/loading.gif" data-src="/2018/04/16/linux%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C/image-20200715211050195.png" alt="image-20200715211050195" style="zoom: 80%;">

</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># 简介</span></span></span><br><span class="line">    管道命令可以将多条命令组合起来，一次性完成复杂的处理任务</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># 语法</span></span></span><br><span class="line">    command1 | command2 |command3 |...</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># 案例</span></span></span><br><span class="line">[root@qianfeng ~]# cat   /etc/passwd   |   tail -3</span><br><span class="line">[root@qianfeng ~]# ps aux       |      grep 'sshd'</span><br></pre></td></tr></table></figure>

<ul>
<li><p><strong>tee管道</strong></p>
<img src= "/img/loading.gif" data-src="/2018/04/16/linux%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C/image-20200715211305876.png" alt="image-20200715211305876" style="zoom: 67%;">

</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># 简介</span></span></span><br><span class="line">    三通管道，即交给另一个程序处理。又保存一份副本</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># 案例</span></span></span><br><span class="line">[root@localhost ~]# cat /etc/passwd |tee 88.txt | tail -1</span><br><span class="line">qianfeng:x:1001:1001::/home/qianfeng:/bin/bash</span><br><span class="line">[root@localhost ~]# cat 888.txt</span><br><span class="line"></span><br><span class="line">888.txt文本中是什么内容呢？一行还是所有行？	</span><br><span class="line">答：所有行内容，因为和传送过去的时候，还没有进行tail的处理</span><br></pre></td></tr></table></figure>

<h3 id="2-参数传递-Xargs"><a href="#2-参数传递-Xargs" class="headerlink" title="2.参数传递 Xargs"></a>2.参数传递 Xargs</h3><p> 针对cp、rm等一些特殊命令使用</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">1 环境准备，准备一些文件。</span><br><span class="line">[root@localhost ~]# touch /home/file&#123;1..5&#125;</span><br><span class="line">[root@localhost ~]#ls   /home</span><br><span class="line"></span><br><span class="line">2 接到消息，部分文件需要删除。</span><br><span class="line">[root@localhost ~]# vim files.txt </span><br><span class="line">/home/file1</span><br><span class="line">/home/file3</span><br><span class="line">/home/file5</span><br><span class="line"></span><br><span class="line">3 使用管道</span><br><span class="line">[root@localhost ~]# cat files.txt |rm -rvf</span><br><span class="line">		失败</span><br><span class="line"></span><br><span class="line">4.貌似之前的不行。下面加上xargs</span><br><span class="line">[root@localhost ~]# cat files.txt |xargs rm -rvf </span><br><span class="line">removed ‘/home/file1’</span><br><span class="line">removed ‘/home/file3’</span><br><span class="line">removed ‘/home/file5’</span><br><span class="line">[root@localhost ~]#ls   /home</span><br><span class="line">通过|xargs成功连接rm命令</span><br></pre></td></tr></table></figure>

<h1 id="⑥Linux存储管理1"><a href="#⑥Linux存储管理1" class="headerlink" title="⑥Linux存储管理1"></a>⑥Linux存储管理1</h1><h2 id="一、基本分区"><a href="#一、基本分区" class="headerlink" title="一、基本分区"></a>一、基本分区</h2><p>磁盘图示</p>
<img src= "/img/loading.gif" data-src="/2018/04/16/linux%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C/image-20200715214644116.png" alt="image-20200715214644116" style="zoom:80%;">

<table>
<thead>
<tr>
<th align="center">磁盘介绍</th>
<th align="center">释  义</th>
</tr>
</thead>
<tbody><tr>
<td align="center">名称</td>
<td align="center">磁盘/硬盘/disk，是同一个东西，不同于内存的是容量比较大</td>
</tr>
<tr>
<td align="center">类型</td>
<td align="center">从工作原理区分，2类：<br>1.机械硬盘，即普通硬盘，主要由：盘片，磁头，盘片转轴及控制电机，<br>磁头控制器，数据转换器，接口，缓存等几个部分组成<br>2.固态硬盘，固态驱动器（简称SSD），是用固态电子存储芯片阵列而制成的硬盘</td>
</tr>
<tr>
<td align="center">尺寸</td>
<td align="center">3.5、2.5、1.8英寸</td>
</tr>
<tr>
<td align="center">接口</td>
<td align="center">早期IDE —— 现在SATA I、II、III</td>
</tr>
<tr>
<td align="center">转速</td>
<td align="center">5400、7200、10000、15000 rpm</td>
</tr>
<tr>
<td align="center">厂商</td>
<td align="center">西部数据、希捷、三星、日立、金士顿</td>
</tr>
<tr>
<td align="center">命名</td>
<td align="center">kernel对不同接口硬盘命名方式，RHEL7/centos7：<br>IDE（并口）—-/dev/hda、/dev/hdb<br>SATA（串口）—-/dev/sda、/dev/sdb<br>/dev设备文件目录，sda是一个文件，s代表sata就是串口，d代表磁盘，a第一块<br></td>
</tr>
</tbody></table>
<p><strong>磁盘分区方式：</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 1、MBR</span></span><br><span class="line">主引导记录，是位于磁盘最前边的一段引导，支持最大的磁盘容量是 &lt;2TB。设计时分配4个分区。如果希望超过4个分区，需放弃主分区，改为扩展分区和逻辑分区。</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 2、GPT</span></span><br><span class="line">全局唯一标识分区表，是一个实体硬盘的分区表的结构布局的标准。GPT 支持大于2T的硬盘，支持128个分区</span><br></pre></td></tr></table></figure>

<p><strong>术语：</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">盘片：</span></span><br><span class="line">一块硬盘有若干盘片，每个盘片有可以存储数据的上、下两盘面（Side）。这些盘面堆叠在主轴上高速旋转，它们从上至下从“0”开始依次编号。</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">柱面：</span></span><br><span class="line">所有盘面上的同一磁道构成一个圆柱，称作柱面</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">扇区：</span></span><br><span class="line">将一个盘面划分为若干内角相同的扇形，这样盘面上的每个磁道就被分为若干段圆弧，每段圆弧叫做一个扇区。每个扇区中的数据作为一个单元同时读出或写入。硬盘的第一个扇区，叫做引导扇区。</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">磁道：</span></span><br><span class="line">每个盘面被划分成许多同心圆，这些同心圆轨迹叫做磁道；磁道从外向内从0开始顺序编号</span><br></pre></td></tr></table></figure>

<h2 id="二、管理磁盘"><a href="#二、管理磁盘" class="headerlink" title="二、管理磁盘"></a>二、管理磁盘</h2><p>VMware增加磁盘：1编辑虚拟机设置—-2添加—-3硬盘—-4下一步</p>
<p>管理新磁盘流程三部曲：分区(MBR或者GPT) —-&gt;格式化/文件系统 Filesystem —-&gt; 挂载mount</p>
<h3 id="1-查看磁盘信息"><a href="#1-查看磁盘信息" class="headerlink" title="1.查看磁盘信息"></a>1.查看磁盘信息</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">方法一：</span><br><span class="line">[root@localhost ~]# ll /dev/sd*</span><br><span class="line">brw-rw----. 1 root disk 8,  0 1月  25 09:35 /dev/sda</span><br><span class="line">brw-rw----. 1 root disk 8,  1 1月  25 09:35 /dev/sda1</span><br><span class="line">brw-rw----. 1 root disk 8,  2 1月  25 09:35 /dev/sda2</span><br><span class="line">brw-rw----. 1 root disk 8, 16 1月  25 09:35 /dev/sdb</span><br><span class="line">brw-rw----. 1 root disk 8, 32 1月  25 09:35 /dev/sdc</span><br><span class="line">brw-rw----. 1 root disk 8, 48 1月  25 09:35 /dev/sdd</span><br><span class="line"><span class="meta">#</span><span class="bash">注释：/dev/sdb、/dev/sdc、/dev/sdc相当于购买的新磁盘</span></span><br><span class="line"></span><br><span class="line">方法二：</span><br><span class="line">[root@localhost ~]# lsblk</span><br></pre></td></tr></table></figure>

<h3 id="2-创建分区（MBR方式）"><a href="#2-创建分区（MBR方式）" class="headerlink" title="2.创建分区（MBR方式）"></a>2.创建分区（MBR方式）</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">启动分区工具</span></span><br><span class="line">[root@localhost ~]# fdisk  /dev/sdb</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">进入会话模式</span></span><br><span class="line">[root@localhost ~]# fdisk /dev/sdb</span><br><span class="line">欢迎使用 fdisk (util-linux 2.23.2)。</span><br><span class="line"></span><br><span class="line">更改将停留在内存中，直到您决定将更改写入磁盘。</span><br><span class="line">使用写入命令前请三思。</span><br><span class="line"></span><br><span class="line">Device does not contain a recognized partition table</span><br><span class="line">使用磁盘标识符 0xd43058cb 创建新的 DOS 磁盘标签。</span><br><span class="line"></span><br><span class="line">命令(输入 m 获取帮助)： n</span><br><span class="line">欢迎界面，输入帮助指令或操作指令。</span><br><span class="line">				</span><br><span class="line">命令(输入 m 获取帮助)：n</span><br><span class="line">Partition type:</span><br><span class="line">   p   primary (0 primary, 0 extended, 4 free)</span><br><span class="line">   e   extended</span><br><span class="line">   </span><br><span class="line">Select (default p):  p  #请选择主分区，或扩展分区</span><br><span class="line"></span><br><span class="line">分区号 (1-4，默认 1)： 1</span><br><span class="line"></span><br><span class="line">起始 扇区 (2048-10485759，默认为 2048)： 敲击回车键      #选择磁盘开始的扇区</span><br><span class="line">将使用默认值 2048</span><br><span class="line"></span><br><span class="line">Last 扇区, +扇区 or +size&#123;K,M,G&#125; (2048-10485759，默认为 10485759)： +2G</span><br><span class="line">	说明</span><br><span class="line">		选择磁盘分区结束的扇区，即分区大小</span><br><span class="line">		输入分区大小“+2G” 后回车</span><br><span class="line">		实际环境根据磁盘划分，如4T磁盘，可以500G 一个分区</span><br><span class="line">分区 1 已设置为 Linux 类型，大小设为 2 GiB</span><br><span class="line"></span><br><span class="line">命令(输入 m 获取帮助)： w </span><br><span class="line"><span class="meta">#</span><span class="bash">已经完成 2G 大小分区记录。但未生效。输入w保存分区信息,自动退出分区工具</span></span><br><span class="line">The partition table has been altered!</span><br><span class="line">Calling ioctl() to re-read partition table.</span><br><span class="line">正在同步磁盘。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">刷新分区表</span><br><span class="line">	[root@localhost ~]#  partprobe /dev/sdb  </span><br><span class="line">查看分区结果</span><br><span class="line">	[root@localhost ~]# fdisk -l /dev/sdb  或 lsblk</span><br><span class="line">划分磁盘完毕，/dev/sdb1</span><br></pre></td></tr></table></figure>

<h3 id="3-创建文件系统"><a href="#3-创建文件系统" class="headerlink" title="3.创建文件系统"></a>3.创建文件系统</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# mkfs.ext4    /dev/sdb1</span><br><span class="line">下面是一堆输出提示...</span><br><span class="line"></span><br><span class="line">新创建的分区，sdb2，sdb3 都要格式化</span><br></pre></td></tr></table></figure>

<h3 id="4-挂载mount"><a href="#4-挂载mount" class="headerlink" title="4.挂载mount"></a>4.挂载mount</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">手动挂载</span><br><span class="line">创建挂载点，一个分区一个挂载点</span><br><span class="line">[root@localhost ~]# mkdir /mnt/disk1</span><br><span class="line">[root@localhost ~]#mount -t ext4  /dev/sdb1 /mnt/disk1</span><br></pre></td></tr></table></figure>

<h3 id="5-查看挂载信息"><a href="#5-查看挂载信息" class="headerlink" title="5.查看挂载信息"></a>5.查看挂载信息</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">#方法1 df -hT</span></span></span><br><span class="line">[root@server0 ~]# df -Th</span><br><span class="line">Filesystem Type Size Used Avail Use% Mounted on</span><br><span class="line"></span><br><span class="line">/dev/sdb1  ext4     2G    6M   1.9G   3%  /mnt/disk1</span><br><span class="line"></span><br><span class="line"> 分区      文件系统  大小  占用   空闲  占比  挂载点</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">#方法2 mount</span></span></span><br><span class="line">[root@server0 ~]# mount</span><br><span class="line">/dev/sdb1 on /mysql_data type xfs </span><br><span class="line">(rw,relatime,seclabel,attr2,inode64,noquoa)</span><br><span class="line">/dev/sdb3 on /mnt/disk1/disk2/disk3/disk4 type ext4 </span><br><span class="line">(rw,relatime,seclabel,dta=ordered)</span><br><span class="line"></span><br><span class="line">mount 看的是磁盘有没有特殊属性</span><br></pre></td></tr></table></figure>

<h2 id="三、逻辑卷LVM"><a href="#三、逻辑卷LVM" class="headerlink" title="三、逻辑卷LVM"></a>三、逻辑卷LVM</h2><p>目的：管理磁盘的一种方式，性质与基本磁盘无异</p>
<p>特点：随意扩张大小</p>
<p>PV:物理卷（Physical volume）</p>
<p>VG：卷组(Volume Group)</p>
<p>LV：逻辑卷(Logical Volume)</p>
<h3 id="1-创建LVM"><a href="#1-创建LVM" class="headerlink" title="1.创建LVM"></a>1.创建LVM</h3><p>1.准备物理磁盘</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@server0 ~]# ll /dev/sd*</span><br><span class="line">brw-rw----. 1 root disk 253, 32 Jun 6 17:38 /dev/sdc</span><br><span class="line">brw-rw----. 1 root disk 253, 48 Jun 6 17:38 /dev/sdd</span><br><span class="line">brw-rw----. 1 root disk 253, 64 Jun 6 17:38 /dev/sde</span><br></pre></td></tr></table></figure>

<p>2.将物理磁盘，转换成物理卷-PV</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[root@server0 ~]# pvcreate /dev/sdc</span><br><span class="line">Physical volume "/dev/sdc" successfully created</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">查看PV信息			</span></span><br><span class="line">[root@server0 ~]# pvscan </span><br><span class="line">PV /dev/vdd lvm2 [2.00 GiB]</span><br><span class="line">Total: 1 [2.00 GiB] / in use: 0 [0 ] / in no VG: 1 [2.00 GiB]</span><br><span class="line"></span><br><span class="line">[root@server0 ~]# pvs</span><br><span class="line">PV VG Fmt Attr PSize PFree</span><br><span class="line">/dev/vdd lvm2 a-- 2.00g 2.00g</span><br><span class="line"></span><br><span class="line">[root@server0 ~]# pvdisplay</span><br></pre></td></tr></table></figure>

<p>3.创建卷组-VG</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">[root@server0 ~]# vgcreate vg1 /dev/sdc</span><br><span class="line">Volume group "vg1" successfully created</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">查看卷组信息</span></span><br><span class="line">第一种方法，查看卷组的摘要信息。卷组名，物理卷数量，逻辑卷数量，大小等。</span><br><span class="line">[root@server0 ~]# vgs</span><br><span class="line">VG #PV #LV #SN Attr VSize VFree</span><br><span class="line">vg1 1 0 0 wz--n- 2.00g 2.00g</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">第二种方法，扫描卷组信息。</span><br><span class="line">[root@server0 ~]# vgscan </span><br><span class="line">Reading all physical volumes. This may take a while...</span><br><span class="line">Found volume group "vg1" using metadata type lvm2</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">第三种方法。显示卷组详细信息。</span><br><span class="line">[root@server0 ~]# vgdisplay </span><br><span class="line">--- Volume group ---</span><br><span class="line">...</span><br><span class="line">VG Size 2.00 GiB					//重点观察</span><br><span class="line">PE Size 4.00 MiB					//重点观察</span><br><span class="line">Total PE 511						//重点观察</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<p>4.创建逻辑卷LV</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@server0 ~]# lvcreate -L 200M -n lv1 vg1</span><br><span class="line"></span><br><span class="line">指定大小，单位M，G</span><br><span class="line">创建逻辑卷  -L大小  -n卷名   vg1组名</span><br><span class="line">查看LV</span><br><span class="line">				</span><br><span class="line">[root@server0 ~]# lvscan </span><br><span class="line">ACTIVE '/dev/vg1/lv1' [400.00 MiB] inherit</span><br><span class="line">ACTIVE '/dev/vg1/lv2' [200.00 MiB] inherit</span><br></pre></td></tr></table></figure>

<p>5.创建文件系统并挂载</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@server0 ~]# mkfs.ext4 /dev/vg1/lv1</span><br><span class="line">注意：/dev/卷组名/逻辑卷名</span><br></pre></td></tr></table></figure>

<p>6.创建挂载点</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@server0 ~]# mkdir  /mnt/lv1</span><br></pre></td></tr></table></figure>

<p>7.挂载</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@server0 ~]#mount  /dev/vg1/lv1   /mnt/lv1</span><br><span class="line"></span><br><span class="line">查看挂载结果</span><br><span class="line">[root@server0 ~]# df</span><br></pre></td></tr></table></figure>

<h3 id="2-VG管理"><a href="#2-VG管理" class="headerlink" title="2.VG管理"></a>2.VG管理</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">#扩大VG vgextend</span></span></span><br><span class="line"></span><br><span class="line">环境：/dev/vg1 容量由5G 扩容到 10G。</span><br><span class="line">步骤1，创建PV。而后使用第二步，将PV增加到VG中。</span><br><span class="line">[root@server0 ~]# pvcreate /dev/sdd1</span><br><span class="line"></span><br><span class="line">步骤2：扩展VG，同时包含方法1.</span><br><span class="line">[root@server0 ~]# vgextend vg1 /dev/sdd1</span><br><span class="line">Volume group "vg1" successfully extended</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">#查看VG</span></span></span><br><span class="line">[root@server0 ~]# vgs</span><br><span class="line">VG #PV #LV #SN Attr VSize VFree</span><br><span class="line">vg1 2 2 0 wz--n- 3.99g 3.76g</span><br></pre></td></tr></table></figure>

<h3 id="3-LV扩容"><a href="#3-LV扩容" class="headerlink" title="3.LV扩容"></a>3.LV扩容</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">####  1. LV扩容</span></span></span><br><span class="line"></span><br><span class="line">1.查看VG空间。观察VG是否有剩余空间</span><br><span class="line">[root@server0 ~]# vgs</span><br><span class="line">VG #PV #LV #SN Attr VSize VFree</span><br><span class="line">vg1 2 1 0 wz--n- 9.99g 5.99g</span><br><span class="line"></span><br><span class="line">2.扩容LV</span><br><span class="line">[root@server0 ~]# lvextend -L +200M /dev/vg1/lv1</span><br><span class="line">增加200M空间，给lv2</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">#### 2. FS扩容 </span></span></span><br><span class="line"></span><br><span class="line">先观察文件系统当前容量。</span><br><span class="line">[root@server0 ~]# df -Th </span><br><span class="line">/dev/mapper/vg1-lv2 ext4 240M 32M 192M 15% /mnt/lv2</span><br><span class="line"></span><br><span class="line">[root@server0 ~]# resize2fs /dev/vg1/lv1</span><br><span class="line">再次观察df -hT 的分区大小。和上一次的对比一下。大小已经发生改变。</span><br><span class="line"></span><br><span class="line">查看FS					</span><br><span class="line">[root@server0 ~]# df -Th</span><br><span class="line">Filesystem Type Size Used Avail Use% Mounted on</span><br><span class="line">/dev/mapper/vg1-lv1 xfs 765M 67M 698M 9% /mnt/lv1</span><br><span class="line">/dev/mapper/vg1-lv2 ext4 488M 32M 429M 7% /mnt/lv2</span><br><span class="line">请注意对比，之前的输出结果，文件系统的大小发生改变</span><br></pre></td></tr></table></figure>

<h2 id="四、交换分区管理-Swap"><a href="#四、交换分区管理-Swap" class="headerlink" title="四、交换分区管理 Swap"></a>四、交换分区管理 Swap</h2><h3 id="1-简介"><a href="#1-简介" class="headerlink" title="1.简介"></a>1.简介</h3><p>​    作用： ”提升“ 内存的容量，防止OOM（Out Of Memory）</p>
<p>​    <strong>swap大小</strong>  swapon  设备名   打开、关闭</p>
<table>
<thead>
<tr>
<th align="center">生产中：系统内存</th>
<th align="center">swap大小</th>
</tr>
</thead>
<tbody><tr>
<td align="center">小于等于4GB</td>
<td align="center">推荐设置为内存的2倍</td>
</tr>
<tr>
<td align="center">4~16GB</td>
<td align="center">最小需要 4GB 交换空间</td>
</tr>
<tr>
<td align="center">16~64GB</td>
<td align="center">最小需要 8GB 交换空间</td>
</tr>
<tr>
<td align="center">64~256GB</td>
<td align="center">最小需要 16GB 交换空间</td>
</tr>
</tbody></table>
<h3 id="2-查看当前的交换分区"><a href="#2-查看当前的交换分区" class="headerlink" title="2.查看当前的交换分区"></a>2.查看当前的交换分区</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# free -m</span><br><span class="line">         total    used      free     shared  buff/cache   available</span><br><span class="line">Mem:     1980      704       614       19       661       1110</span><br><span class="line">Swap:    2047       0        2047</span><br></pre></td></tr></table></figure>

<h3 id="3-增加交换分区"><a href="#3-增加交换分区" class="headerlink" title="3.增加交换分区"></a>3.增加交换分区</h3><ol>
<li>准备分区</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">准备将/dev/sde磁盘，划分为1G分区为例</span><br><span class="line">划分分区后，将类型设置为82（按t！！！老铁）</span><br><span class="line"></span><br><span class="line">[root@server0 ~]# fdisk    /dev/sde </span><br><span class="line">过程略</span><br><span class="line">[root@server0 ~]# partprobe /dev/sde</span><br><span class="line">[root@server0 ~]# ll /dev/sde*</span><br><span class="line">brw-rw----. 1 root disk 253, 16 12月 6 10:18 /dev/sde</span><br><span class="line">brw-rw----. 1 root disk 253, 17 12月 6 10:18 /dev/sde1</span><br></pre></td></tr></table></figure>

<p>2.格式化</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@server0 ~]# mkswap /dev/sde1</span><br></pre></td></tr></table></figure>

<p>3.挂载</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@server0 ~]# swapon /dev/sde1</span><br><span class="line">取消挂载  swapoff</span><br><span class="line"></span><br><span class="line">验证,查看增加后的交换分区。是不是变大了？</span><br><span class="line">[root@localhost ~]# free -m</span><br></pre></td></tr></table></figure>

<h1 id="⑦Linux存储管理2"><a href="#⑦Linux存储管理2" class="headerlink" title="⑦Linux存储管理2"></a>⑦Linux存储管理2</h1><h2 id="一、EXT4文件系统"><a href="#一、EXT4文件系统" class="headerlink" title="一、EXT4文件系统"></a>一、EXT4文件系统</h2><p><img src= "/img/loading.gif" data-src="/2018/04/16/linux%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C/image-20200717153027727.png" alt="image-20200717153027727"></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1.类型：索引(index )  文件系统</span><br><span class="line"></span><br><span class="line">2.系统限制</span><br><span class="line">			Ext3： 文件系统最大16TB</span><br><span class="line">			Ext4： 文件系统最大16TB</span><br><span class="line">			XFS :  文件系统最大100TB</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">3. inode：记录文件的属性（文件的元数据metadata）</span><br><span class="line"></span><br><span class="line">元数据</span><br><span class="line">​件的属性，大小，权限，属主，属组，连接数，块数量，块的编号</span><br><span class="line">一个文件占用一个inode，同时记录此文件数据所在的block numbber。</span><br><span class="line">​inode大小 为 128 bytes</span><br><span class="line"></span><br><span class="line">示例：创造一个文件，观察inode信息。</span><br><span class="line">[root@localhost ~]# ll   -i   文件名</span><br><span class="line"></span><br><span class="line">4. block：</span><br><span class="line">存储文件的实际数据。</span><br><span class="line">实际存储文件的内容，若文件较大，会占用多个block。</span><br><span class="line">block大小 为默认为4K</span><br><span class="line"></span><br><span class="line">5. superblock</span><br><span class="line">​block 与 inode 的总量</span><br><span class="line">​未使用与已使用的 inode / block 数量</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">示例2：block</span><br><span class="line"></span><br><span class="line">问题1：分区中，文件的数量和什么有关系。</span><br><span class="line">1 观察某个分区中的inode节点数</span><br><span class="line">df    -i </span><br><span class="line">2 创建一个文件</span><br><span class="line">touch  文件名</span><br><span class="line">3 再次观察inode节点数</span><br><span class="line">df    -i </span><br><span class="line">4 创造大量文件。观察inode使用情况</span><br><span class="line">touch  file&#123;1..30000&#125;</span><br><span class="line">5 在另一个SHEEL，观察inode变化情况。</span><br><span class="line">watch -n 2 'df -i'</span><br><span class="line">6 请问最后，还能否创建新文件呢？</span><br><span class="line">结论：inode决定了文件系统中文件的数量。</span><br><span class="line">7.但是，能否向已存在的文件中写入内容呢？答案是？</span><br><span class="line">结论：block决定了文件存储的空间。</span><br><span class="line"></span><br><span class="line">问题2：当分区空间大小消耗完毕，还能否新增文件？</span><br><span class="line">1 向目标分区写入大量数据，填满</span><br><span class="line">dd   if=/dev/zero     of=/disk1/5.txt    bs=1k    count=1000</span><br><span class="line">2 查看目标分区容量，已满</span><br><span class="line">df -hT</span><br><span class="line">3 创造新文件</span><br><span class="line">touch</span><br><span class="line">4 得出结论，磁盘空间的限制根据inode和block两方面</span><br><span class="line">请清理掉填满的分区。避免不必要的报错。</span><br></pre></td></tr></table></figure>

<h2 id="二、文件链接"><a href="#二、文件链接" class="headerlink" title="二、文件链接"></a>二、文件链接</h2><h3 id="1-符号链接"><a href="#1-符号链接" class="headerlink" title="1.符号链接"></a>1.符号链接</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">symbolic link 软链接，即符号链接</span><br><span class="line"></span><br><span class="line">示例</span><br><span class="line">1 创建一个文件，并输入内容。</span><br><span class="line">[root@qianfeng ~]# echo 111 &gt; /file1</span><br><span class="line">2 创建一个软连接。</span><br><span class="line">[root@qianfeng ~]# ln -s /file1 /home/file11</span><br><span class="line">3 观察软连接</span><br><span class="line">[root@qianfeng ~]# ll /home/file11 </span><br><span class="line">lrwxrwxrwx 1 root root 6 Dec 20 17:58 /home/file11 -&gt; /file1</span><br><span class="line">4 观察软连接文件</span><br><span class="line">[root@qianfeng ~]# ll  /file1 /home/file11 </span><br><span class="line">-rw-r--r-- 1 root root 4 Dec 20 17:57 /file1</span><br><span class="line">lrwxrwxrwx 1 root root 6 Dec 20 17:58 /home/file11 -&gt; /file1</span><br><span class="line">5 查看两个文件，内容一致。</span><br><span class="line">[root@qianfeng ~]# cat /file1 </span><br><span class="line">111</span><br><span class="line">[root@qianfeng ~]# cat /home/file11 </span><br><span class="line">111</span><br><span class="line">6 删除源文件，软连接闪烁，不可用。</span><br><span class="line">[root@qianfeng ~]# rm -rf /file1 </span><br><span class="line">[root@qianfeng ~]# ll /home/file11 </span><br><span class="line">lrwxrwxrwx 1 root root 6 Dec 20 17:58 /home/file11 -&gt; /file1</span><br><span class="line"></span><br><span class="line">​总结</span><br><span class="line">1.软连接像快捷方式，可以对文件和目录做软连接。</span><br><span class="line">2.软连接记录的只是源文件的绝对路径。</span><br><span class="line">3.软连接失去源文件不可用。</span><br></pre></td></tr></table></figure>

<h3 id="2-硬链接"><a href="#2-硬链接" class="headerlink" title="2.硬链接"></a>2.硬链接</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">1 创建同分区硬链接成功，创建不同分区硬链接失败。</span><br><span class="line">[root@qianfeng ~]# echo 222 &gt; /file2</span><br><span class="line">[root@qianfeng ~]# ln /file2 /file2-h1</span><br><span class="line">[root@qianfeng ~]# ln /file2 /home/file2-h2	</span><br><span class="line"></span><br><span class="line">//将文件已硬链接方式，发送到其他分区。结果是？错误</span><br><span class="line">ln: failed to create hard link ‘/home/file2-h2’ =&gt; ‘/file2’: Invalid cross-device link</span><br><span class="line"></span><br><span class="line">2 硬链接删除源文件，依然可以用</span><br><span class="line">[root@qianfeng ~]#rm -rf /file2</span><br><span class="line">[root@qianfeng ~]#cat    /file2-h1</span><br><span class="line">222</span><br><span class="line">3 不允许将硬链接指向目录</span><br><span class="line">[root@qianfeng home]# ln /home/ /mnt</span><br><span class="line">ln: “/home/”: 不允许将硬链接指向目录</span><br><span class="line"></span><br><span class="line">​总结</span><br><span class="line">1.硬链接只能针对文件做。不能对目录做。</span><br><span class="line">2.硬链接只能在同分区做。</span><br></pre></td></tr></table></figure>

<h3 id="3-RAID-了解"><a href="#3-RAID-了解" class="headerlink" title="3.RAID(了解)"></a>3.RAID(了解)</h3><p><strong>简   介</strong></p>
<p>RAID：廉价磁盘冗余阵列（Redundant Array of Independent Disks）</p>
<p>作 用：容错、提升读写速率</p>
<table>
<thead>
<tr>
<th align="center">类  型</th>
<th align="center">释  义</th>
</tr>
</thead>
<tbody><tr>
<td align="center">RAID0</td>
<td align="center">条带集 2块磁盘以上， 读写速率快 100%*N，但不容错</td>
</tr>
<tr>
<td align="center">RAID1</td>
<td align="center">镜像集 2块磁盘， 容量50% ，读写速率一般，容错</td>
</tr>
<tr>
<td align="center">RAID5</td>
<td align="center">带奇偶校验条带集 3块磁盘以上， 利用率 (n-1）/n 读写速率快，容错</td>
</tr>
<tr>
<td align="center">RAID10</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">RAID01</td>
<td align="center"></td>
</tr>
</tbody></table>
<ul>
<li><p>不同场景RAID的使用</p>
<p>​    硬RAID： 需要RAID卡，有自己的CPU，处理速度快，有电池和无电池</p>
<p>​    软RAID： 通过操作系统实现，比如Windows、Linux</p>
</li>
<li><p>软RAID示例</p>
</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">1.准备4块硬盘  # RAID5 :(3块数据盘) + （1块热备硬盘)</span><br><span class="line">[root@qianfeng ~]# ll /dev/sd*</span><br><span class="line">brw-rw---- 1 root disk 8, 48 Jan 13 16:07 /dev/sdd</span><br><span class="line">brw-rw---- 1 root disk 8, 64 Jan 13 16:07 /dev/sde</span><br><span class="line">brw-rw---- 1 root disk 8, 80 Jan 13 16:07 /dev/sdf</span><br><span class="line">brw-rw---- 1 root disk 8, 80 Jan 13 16:07 /dev/sdg			</span><br><span class="line"></span><br><span class="line">2.创建RAID</span><br><span class="line">[root@qianfeng ~]# mdadm -C /dev/md0 -l5 -n3 -x1 /dev/sd&#123;d,e,f,g&#125;</span><br><span class="line">-C 创建RAID</span><br><span class="line">/dev/md0 第一个RAID设备</span><br><span class="line">-l5 RAID5</span><br><span class="line">-n RAID成员的数量</span><br><span class="line">-x 热备磁盘的数量，1个盘可用空间2G</span><br><span class="line">[root@qianfeng ~]# yum -y install mdadm   //确保mdadm命令可用</span><br><span class="line"></span><br><span class="line">3.格式化，挂载</span><br><span class="line">[root@qianfeng ~]# mkfs.ext4 /dev/md0</span><br><span class="line">[root@qianfeng ~]# mkdir /mnt/raid5</span><br><span class="line">[root@qianfeng ~]# mount /dev/md0 /mnt/raid5</span><br><span class="line">[root@qianfeng ~]# cp -rf /etc /mnt/raid5/etc1</span><br><span class="line"></span><br><span class="line">4. 查看RAID信息</span><br><span class="line">[root@qianfeng ~]# mdadm -D /dev/md0    //-D 查看详细信息</span><br><span class="line">​	/dev/md0:</span><br><span class="line">​    Version : 1.2</span><br><span class="line">​    Creation Time : Mon Jan 13 16:28:47 2016</span><br><span class="line">​    Raid Level : raid5		//raid类型</span><br><span class="line">​	Array Size : 2095104 (2046.34 MiB 2145.39 MB)</span><br><span class="line">​	Used Dev Size : 1047552 (1023.17 MiB 1072.69 MB)</span><br><span class="line">​	Raid Devices : 3		//组中设备的数量</span><br><span class="line">​	Total Devices : 4	//总设备数</span><br><span class="line">​	Persistence : Superblock is persistent</span><br><span class="line"></span><br><span class="line">​    Update Time : Mon Jan 13 16:34:51 2016</span><br><span class="line">​    State : clean 	//状态，卫生的，哈哈</span><br><span class="line">​    Active Devices : 3	//活跃3个</span><br><span class="line">​    Working Devices : 4  //4个在工作</span><br><span class="line">​    Failed Devices : 0		//坏了1就危险了，2个就完蛋了</span><br><span class="line">​    Spare Devices : 1		//热备的1个。</span><br><span class="line"></span><br><span class="line">​    Layout : left-symmetric</span><br><span class="line">​    Chunk Size : 512K	//校验码大小</span><br><span class="line">​    Number Major Minor RaidDevice State</span><br><span class="line">​    0 8 48 0 active sync /dev/sdd		//同步</span><br><span class="line">​    1 8 64 1 active sync /dev/sde		//同步</span><br><span class="line">​    4 8 80 2 active sync /dev/sdf		 //同步</span><br><span class="line"></span><br><span class="line">​    3 8 96 - spare /dev/sdg</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## 5.模拟一块硬盘损坏，并移除</span></span></span><br><span class="line"></span><br><span class="line">终端一：</span><br><span class="line">[root@qianfeng ~]# watch -n 0.5 'mdadm -D /dev/md0 | tail'  //watch持续查看</span><br><span class="line">终端二：</span><br><span class="line">[root@qianfeng ~]# mdadm /dev/md0 -f /dev/sde -r /dev/sde   //模拟坏了并移除</span><br><span class="line">     -f --fail</span><br><span class="line">     -r --remove</span><br></pre></td></tr></table></figure>

<h1 id="⑧Linux文件查找"><a href="#⑧Linux文件查找" class="headerlink" title="⑧Linux文件查找"></a>⑧Linux文件查找</h1><h2 id="一、文件查找"><a href="#一、文件查找" class="headerlink" title="一、文件查找"></a>一、文件查找</h2><table>
<thead>
<tr>
<th align="center">查找命令</th>
<th align="center">区别</th>
</tr>
</thead>
<tbody><tr>
<td align="center">which</td>
<td align="center">命令查找</td>
</tr>
<tr>
<td align="center">find</td>
<td align="center">文件查找，针对文件名</td>
</tr>
<tr>
<td align="center">locate</td>
<td align="center">文件查找，依赖数据库</td>
</tr>
</tbody></table>
<h3 id="1-命令文件查找which"><a href="#1-命令文件查找which" class="headerlink" title="1.命令文件查找which"></a>1.命令文件查找which</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">查找ls 命令的位置</span><br><span class="line">[root@qianfeng ~]# which ls   //从PATH环境变量</span><br><span class="line">或者</span><br><span class="line">[root@qianfeng ~]# whereis vim</span><br></pre></td></tr></table></figure>

<h3 id="2-任意文件find"><a href="#2-任意文件find" class="headerlink" title="2.任意文件find"></a>2.任意文件find</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">#### 语法</span></span></span><br><span class="line">find [path...] [options] [expression] [action]</span><br><span class="line">命令     路径      选项      表达式       动作</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">#### 按文件名：</span></span></span><br><span class="line">[root@qianfeng ~]# find   /etc   -name   "hosts"</span><br><span class="line">[root@qianfeng ~]# find   /etc   -iname  "hosts"   //-i忽略大小写</span><br><span class="line">[root@qianfeng ~]# find   /etc   -iname  "hos*"</span><br><span class="line"></span><br><span class="line">结果输出:</span><br><span class="line">​/etc/hosts</span><br><span class="line">​文件查找成功</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">#### 按文件大小：</span></span></span><br><span class="line">[root@qianfeng ~]# find /etc -size  +5M   //文件&gt;5M</span><br><span class="line">[root@qianfeng ~]# find /etc -size  5M    //文件=5M</span><br><span class="line">[root@qianfeng ~]# find /etc -size -5M    //文件&lt;5M</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">#### 指定查找的目录深度：</span></span></span><br><span class="line">[root@qianfeng ~]# find / -maxdepth 3 -a -name "ifcfg-en*"</span><br><span class="line">[root@qianfeng ~]# find / -maxdepth 4 -a -name "ifcfg-en*"</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">#### 按文件属主、属组找：</span></span></span><br><span class="line">[root@qianfeng ~]# find /home -user jack   //属主是jack的文件</span><br><span class="line">[root@qianfeng ~]# find /home -group hr   //属组是hr组的文件</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">#### 按文件类型：</span></span></span><br><span class="line">[root@qianfeng ~]# find /tmp -type f   //f普通文件</span><br><span class="line">[root@qianfeng ~]# find /dev -type b   //b块设备文件</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">#### 按文件权限：</span></span></span><br><span class="line">[root@qianfeng ~]# find . -perm 644 -ls</span><br><span class="line">  -ls 是find的动作之一，精确权限</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">找到后处理的动作 ACTIONS：</span><br><span class="line"><span class="meta">#</span><span class="bash">找到后删除</span></span><br><span class="line">find /etc -name "775*" -delete</span><br><span class="line"><span class="meta">#</span><span class="bash">找到后复制</span></span><br><span class="line">find /etc -name "ifcfg*" -ok cp -rvf &#123;&#125; /tmp \;</span><br></pre></td></tr></table></figure>

<h2 id="二、文件打包及压缩"><a href="#二、文件打包及压缩" class="headerlink" title="二、文件打包及压缩"></a>二、文件打包及压缩</h2><p>tar命令是Unix/Linux系统中备份文件的可靠方法，几乎可以工作于任何环境中，它的使用权限是所有用户。建议针对目录。</p>
<h3 id="1-打包，压缩"><a href="#1-打包，压缩" class="headerlink" title="1.打包，压缩"></a>1.打包，压缩</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># 语法：tar  选项  压缩包名称  源文件</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># 打包，压缩</span></span></span><br><span class="line">[root@localhost ~]# tar  -cf    etc.tar    /etc</span><br><span class="line">[root@localhost ~]# tar  -czf   etc-gzip.tar.gz   /etc/     //z是gzip</span><br><span class="line">[root@localhost ~]# tar  -cjf   etc-bzip.tar.bz   /etc/     //j是bzip</span><br><span class="line">[root@localhost ~]# tar  -cJf   etc-xzip.tar.xz   /etc/     //J是xzip</span><br><span class="line"></span><br><span class="line">观察三个包的体积</span><br><span class="line">[root@localhost ~]# ll -h etc*</span><br><span class="line">-rw-r--r--. 1 root root  11M 10月 14 10:07 etc-gzip.tar.gz</span><br><span class="line">-rw-r--r--. 1 root root 8.9M 10月 14 10:08 etc-bzip.tar.bz</span><br><span class="line">-rw-r--r--. 1 root root 7.6M 10月 14 10:08 etc-xzip.tar.xz</span><br><span class="line">注意：​​​压缩速度和压缩体积成反比​​​</span><br></pre></td></tr></table></figure>

<h3 id="2-解压"><a href="#2-解压" class="headerlink" title="2.解压"></a>2.解压</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# tar  xf  etc3.tar.xz</span><br><span class="line"></span><br><span class="line">[root@localhost ~]# tar -xvf  etc2.tar.bz2  -C  /tmp</span><br><span class="line">// -C 重定向到/tmp目录</span><br></pre></td></tr></table></figure>

<h1 id="⑨Linux软件管理"><a href="#⑨Linux软件管理" class="headerlink" title="⑨Linux软件管理"></a>⑨Linux软件管理</h1><p><strong>RPM包</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">    RPM Package Manager（原Red Hat Package Manager，现在是一个递归缩写），由 Red Hat 公司提出，被众多 Linux 发行版所采用，也称二进制（ binary code）无需编译,可以直接使用</span><br><span class="line">   无法设定个人设置，开关功能。</span><br><span class="line">RPM包示例：</span><br><span class="line">zip-3.0-11.el7.x86_64.rpm</span><br><span class="line">wget-1.14-15.el7.x86_64.rpm</span><br><span class="line">tcpdump-4.9.0-5.el7.x86_64.rpm</span><br><span class="line">mysql-community-common-5.7.12-1.el7.x86_64.rpm</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">注释</span></span><br><span class="line">例： zip - 3.0-11.  el7.  x86_64.  rpm</span><br><span class="line">zip     软件包名</span><br><span class="line">3.0-11  版本号(Version)</span><br><span class="line">el7     发布版本(Release5/6/7)</span><br><span class="line">x86_64  系统平台(32/64)</span><br><span class="line">rpm     文件后缀</span><br></pre></td></tr></table></figure>

<p><strong>源码包</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">source code 需要经过GCC,C++编译环境编译才能运行</span><br><span class="line">可以设定个人设置，开关功能</span><br><span class="line"></span><br><span class="line">软件包示例：nginx-1.8.1.tar.gz </span><br><span class="line">nginx	 包名</span><br><span class="line">-1.8.1	 版本号</span><br><span class="line">.tar.gz  压缩格式</span><br></pre></td></tr></table></figure>

<h2 id="一、RPM包管理"><a href="#一、RPM包管理" class="headerlink" title="一、RPM包管理"></a>一、RPM包管理</h2><h3 id="1-YUM工具"><a href="#1-YUM工具" class="headerlink" title="1.YUM工具"></a>1.YUM工具</h3><p>简介：</p>
<p>Yum（全称为 Yellow dog Updater, Modified），​是一个在Fedora和RedHat以及CentOS中的Shell前端软件包管理器。<strong>​基于RPM包管理，能够从指定的服务器自动下载RPM包并且安装，可以自动处理依赖性关系，并且一次安装所有依赖的软件包，无须繁琐地一次次下载、安装。</strong></p>
<p><strong>(1)本地源：系统安装光盘</strong></p>
<p>目的：通过系统光盘获得软件包，并安装软件</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">#### 0.观察YUM核心配置目录</span></span></span><br><span class="line">[root@localhost ~]# /etc/yum.repos.d/</span><br><span class="line">​打开一个*.repo</span><br><span class="line">​观察国外地址（下载速度慢）</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">#### 1.备份移除官方YUM库</span></span></span><br><span class="line">[root@localhost ~]# mv  /etc/yum.repos.d/*   /tmp</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">#### 2.编写本地YUM库配置文件</span></span></span><br><span class="line">[root@localhost ~]# vim /etc/yum.repos.d/dvd.repo </span><br><span class="line">[dvd] </span><br><span class="line">name=dvd </span><br><span class="line">baseurl=file:///mnt/cdrom</span><br><span class="line">gpgcheck=0 </span><br><span class="line"></span><br><span class="line">====注释====</span><br><span class="line">​/etc/yum.repos.d/是YUM下载地址库目录</span><br><span class="line">​[dvd]某一个库的名称，中括号[]是必须的</span><br><span class="line">​name=dvd是库的说明，name是必须的</span><br><span class="line">​baseurl=file:///mnt/cdrom下载库的具体地址.重要</span><br><span class="line">​gpgcheck=0是关闭校验</span><br><span class="line">​enabled=1  表示开启这个仓库</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">#### 3.挂载安装光盘：</span></span></span><br><span class="line">千万记得要把光盘放到服务器上，通电</span><br><span class="line">[root@localhost ~]# mkdir  /mnt/cdrom</span><br><span class="line">[root@localhost ~]# vim /root/.bashrc     //.bashrc自启动文件，跟随用户启动运行的程序</span><br><span class="line">mount   /dev/cdrom   /mnt/cdrom</span><br><span class="line"></span><br><span class="line">//mount挂载,/dev/cdrom是光驱文件,/mnt/cdrom是挂载点</span><br><span class="line">重启后，使用ls  /mnt/cdrom,查看到光盘信息即可</span><br><span class="line">[root@localhost ~]# ls /mnt/cdrom/</span><br><span class="line">CentOS_BuildTag  GPL       LiveOS    RPM-GPG-KEY-CentOS-7</span><br><span class="line">EFI              images    Packages  RPM-GPG-KEY-CentOS-Testing-7</span><br><span class="line">EULA             isolinux  repodata  TRANS.TBL</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">#### 4.使用YUM 安装和卸载程序</span></span></span><br><span class="line">[root@localhost ~]#yum install -y httpd    //安装软件</span><br><span class="line">[root@localhost ~]#systemctl start httpd   //启动软件</span><br><span class="line">[root@localhost ~]#systemctl stop firewalld  //关闭防火墙</span><br><span class="line">[root@localhost ~]#systemctl disable firewalld   //禁用防火墙开机自启</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">#### 5.模拟客户机访问</span></span></span><br><span class="line">打开浏览器，输入网站服务器的IP地址---http://127.0.0.1</span><br><span class="line">验证网站程序部署成功</span><br></pre></td></tr></table></figure>

<p><strong>(2)使用YUM管理RPM包</strong></p>
<p>安装</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">##### 	全新安装</span></span></span><br><span class="line">[root@localhost ~]# yum   -y   install   httpd   vsftpd </span><br><span class="line">​	yum 主命令</span><br><span class="line">​	-y  自动确认</span><br><span class="line">​	install 安装</span><br><span class="line">​	httpd 软件包1</span><br><span class="line">​	vsftpd 软件包2</span><br><span class="line">​	软件包N</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">##### 	重新安装</span></span></span><br><span class="line">当软件缺失文件，可尝试重新安装</span><br><span class="line">[root@localhost ~]# yum  -y   reinstall   httpd</span><br><span class="line">//reinstall 重新安装</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">##### 	升级安装</span></span></span><br><span class="line">[root@localhost ~]# yum  -y   update   httpd   //升级一个程序httpd</span><br><span class="line">[root@localhost ~]# yum  -y   update    //全部升级</span><br></pre></td></tr></table></figure>

<p>查询</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">查询HTTP程序</span><br><span class="line">[root@localhost ~]# yum list httpd</span><br><span class="line">带@ 是已经安装的</span><br></pre></td></tr></table></figure>

<p>卸载</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">卸载程序</span><br><span class="line">[root@localhost ~]# yum -y remove  httpd</span><br><span class="line">remove移除，卸载软件包</span><br></pre></td></tr></table></figure>

<h3 id="2-RPM工具"><a href="#2-RPM工具" class="headerlink" title="2.RPM工具"></a>2.RPM工具</h3><p>1.管理红帽系统/centos系统，rpm包的基本工具</p>
<p>2.和YUM功能相同</p>
<ul>
<li>安装（i）</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">先找到安装包</span></span><br><span class="line">[root@localhost ~]# cd   /mnt/cdrom/Packages</span><br><span class="line"><span class="meta">#</span><span class="bash">检查软件包是否存在</span></span><br><span class="line">[root@localhost Packages]# ls wget-1.14-18.el7_6.1.x86_64.rpm </span><br><span class="line">wget-1.14-18.el7_6.1.x86_64.rpm</span><br><span class="line"><span class="meta">#</span><span class="bash">安装。</span></span><br><span class="line">参数：-i安装  v可视   h百分比</span><br><span class="line">[root@localhost Packages]# rpm -ivh wget-1.14-15.el7.x86_64.rpm </span><br><span class="line"></span><br><span class="line">提示信息</span><br><span class="line">警告：wget-1.14-15.el7.x86_64.rpm: 头V3 RSA/SHA256 Signature, 密钥 ID f4a80eb5: NOKEY</span><br><span class="line">准备中...  ############################# [100%]</span><br><span class="line">正在升级/安装...   1:wget-1.14-15.el7    ######################## [100%]</span><br></pre></td></tr></table></figure>

<ul>
<li>查询（q）</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost Packages]# rpm -q wget</span><br><span class="line">wget-1.14-15.el7.x86_64</span><br><span class="line">//看到软件包的名字，就说明rpm -q查询成功，已经安装软件</span><br></pre></td></tr></table></figure>

<ul>
<li>卸载（e）</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">卸载软件包</span></span><br><span class="line">[root@localhost Packages]# rpm -evh wget-1.14-15.el7.x86_64</span><br><span class="line">输出信息...</span><br><span class="line">再次查询，发现已经卸载</span><br><span class="line">[root@localhost Packages]# rpm -q  wget-1.14-15.el7.x86_64</span><br><span class="line">未安装软件包 wget-1.14-15.el7.x86_64</span><br></pre></td></tr></table></figure>

<h2 id="二、源码包管理"><a href="#二、源码包管理" class="headerlink" title="二、源码包管理"></a>二、源码包管理</h2><p><strong>1.获得源码包</strong></p>
<p>官方网站，可以获得最新的软件包 。需要什么就去其官网下载。例如：</p>
<p>Apache: <a href="http://www.apache.org" target="_blank" rel="noopener">www.apache.org</a> </p>
<p>Nginx: <a href="http://www.nginx.org" target="_blank" rel="noopener">www.nginx.org</a></p>
<p>Tengine: tengine.taobao.org</p>
<p><strong>2.实战案例</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">去官网下载tengine，部署Tengine </span><br><span class="line"></span><br><span class="line">准备编译环境如编译器</span><br><span class="line">[root@localhost ~]# yum -y install   gcc   make   zlib-devel  pcre  pcre-devel  openssl-devel</span><br><span class="line"></span><br><span class="line">解压</span><br><span class="line">[root@localhost ~]# useradd www</span><br><span class="line">[root@localhost ~]# tar xvf tengine-2.2.0.tar.gz</span><br><span class="line">[root@localhost ~]# cd tengine-2.2.0</span><br><span class="line"></span><br><span class="line">配置</span><br><span class="line">[root@localhost tengine-2.2.0]#./configure  --user=www  --group=www  --prefix=/usr/local/nginx </span><br><span class="line"></span><br><span class="line">编译</span><br><span class="line">[root@localhost tengine-2.2.0]# make</span><br><span class="line">安装</span><br><span class="line">[root@localhost tengine-2.2.0]# make install</span><br><span class="line"></span><br><span class="line">启动测试</span><br><span class="line">可能之前的实验，安装过httpd服务。如果直接启动nginx会有冲突。请确保关闭httpd</span><br><span class="line"><span class="meta">#</span><span class="bash"> systemctl stop  httpd</span></span><br><span class="line">[root@localhost tengine-2.2.0]# /usr/local/nginx/sbin/nginx</span><br><span class="line">[root@localhost tengine-2.2.0]# systemctl stop firewalld</span><br><span class="line">使用浏览器访问本机的IP，http://127.0.0.1，如果能看到NGINX的网页，说明部署成功。</span><br></pre></td></tr></table></figure>

<h1 id="⑩Linux计划任务"><a href="#⑩Linux计划任务" class="headerlink" title="⑩Linux计划任务"></a>⑩Linux计划任务</h1><p>作用：计划任务主要是做一些周期性的任务，目前最主要的用途是定期备份数据。</p>
<p>分类：</p>
<p>​    一次性调度执行 at</p>
<p>​    循环调度执行 cron</p>
<h2 id="一、一次性调度执行-at"><a href="#一、一次性调度执行-at" class="headerlink" title="一、一次性调度执行 at"></a>一、一次性调度执行 at</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## 语法格式： at &lt;timespec&gt;</span></span></span><br><span class="line"></span><br><span class="line">&lt;timespec&gt;示例:</span><br><span class="line">​		now +5min	5分钟后</span><br><span class="line">​		teatime tomorrow (teatime is 16:00)	下午茶时间</span><br><span class="line">​		noon +4 days	第四天中午</span><br><span class="line">​		5pm august 3 2020 	2020年8月3日下午5点</span><br><span class="line">​		4:00 2019-11-27	某年某月某日某时</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## 例</span></span></span><br><span class="line">1.设置一个定时创建用户的任务</span><br><span class="line">[root@localhost ~]# at  now   +1min</span><br><span class="line"><span class="meta">at&gt;</span><span class="bash"> useradd uuuu </span></span><br><span class="line"><span class="meta">at&gt;</span><span class="bash"> &lt;EOT&gt;    //CTRL+D输入完毕，提交任务</span></span><br><span class="line">job 1 at Sat Mar 21 22:34:00 2019</span><br><span class="line"></span><br><span class="line">2.查询任务</span><br><span class="line">[root@localhost ~]# atq</span><br><span class="line">3 Thu Mar 30 09:55:00 2019 a root</span><br><span class="line"></span><br><span class="line">3.验证结果</span><br><span class="line">[root@localhost ~]# id uuuu</span><br><span class="line">查出用户信息即可</span><br></pre></td></tr></table></figure>

<h2 id="二、循环调度执行-cron"><a href="#二、循环调度执行-cron" class="headerlink" title="二、循环调度执行 cron"></a>二、循环调度执行 cron</h2><p><strong>简介</strong></p>
<p>​    cron的概念和crontab是不可分割的。</p>
<p>​    crontab是一个命令，常见于Unix和Linux的操作系统之中</p>
<p>​    用于设置周期性被执行的指令。该命令从标准输入设备读取指令，并将其存放于“crontab”文件中，以供之后读取和执行。</p>
<p><strong>查看进程状态</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@qianfeng ~]# systemctl status crond.service</span><br><span class="line">[root@qianfeng ~]# ps aux |grep crond</span><br><span class="line">root 550 0.0 0.0 126300 1648 ? Ss 10:05 0:00 /usr/sbin/crond -n</span><br><span class="line">​crond程序运行是计划任务执行的根本</span><br></pre></td></tr></table></figure>

<p><strong>cron示例</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">计划任务存储位置</span></span><br><span class="line">[root@localhost ~]# ls /var/spool/cron/</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">管理方式</span></span><br><span class="line">1.创建计划</span><br><span class="line">[root@localhost ~]# crontab -e    //Edit jobs for the current user</span><br><span class="line">2.查询计划</span><br><span class="line">[root@localhost ~]# crontab -l 	 //List the jobs for the current user</span><br><span class="line">管理员可以使用 -u username, 去管理其他用户的计划任务</span><br><span class="line">3.删除计划</span><br><span class="line">[root@localhost ~]# crontab -r 	//Remove all jobs for the current users.</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">语法格式 Job format</span></span><br><span class="line"></span><br><span class="line">.---------------- minute (0 - 59)</span><br><span class="line"></span><br><span class="line">| .------------- hour (0 - 23)</span><br><span class="line"></span><br><span class="line">| | .---------- day of month (1 - 31)</span><br><span class="line"></span><br><span class="line">| | | .------- month (1 - 12) OR jan,feb,mar,apr ...</span><br><span class="line"></span><br><span class="line">| | | | .---- day of week (0 - 6) (Sunday=0 or 7) OR sun,mon,tue,wed,thu,fri,sat</span><br><span class="line"></span><br><span class="line">| | | | |</span><br><span class="line"></span><br><span class="line">* * * * * command</span><br><span class="line"></span><br><span class="line">    说明</span><br><span class="line">    	分 时 日 月 周     命令或脚本程序</span><br><span class="line">    示例1</span><br><span class="line">    	*/5 * * * * /mysql_back.sh</span><br><span class="line">    		每五分钟执行</span><br><span class="line">    	5 2 1,4,6 * * /mysql_back.sh</span><br><span class="line">    		每月的1,4,6日的2点5分执行</span><br><span class="line">    	0 2 5-9 * * /mysql_back.sh</span><br><span class="line">    		每月5日到9日的两点整执行</span><br><span class="line">    	* * * * * /mysql_back.sh</span><br><span class="line">    		每分钟执行</span><br><span class="line">    	0 * * * * /mysql_back.sh</span><br><span class="line">    		每小时的0分执行</span><br><span class="line">    	0 2 * * * /mysql_back.sh</span><br><span class="line">    		每天两点整执行</span><br><span class="line">    	0 2 14 * * /mysql_back.sh</span><br><span class="line">    		每月14号的2点整执行</span><br><span class="line">    	0 2 14 2 * /mysql_back.sh</span><br><span class="line">    		2月14日2点整执行</span><br><span class="line">    	0 2 * * 5 /mysql_back.sh</span><br><span class="line">    		不写月日，仅周生效</span><br><span class="line">    		每月的周五，两点执行</span><br><span class="line">    	0 2 2 6 5 /mysql_back.sh</span><br><span class="line">    		书写月和日，月或日，月日周均生效</span><br><span class="line">    		6月2日的两点整执行</span><br><span class="line">    		6月的周五两点整执行</span><br><span class="line">    示例2</span><br><span class="line">    	00 02 * * * ls</span><br><span class="line">    		每天2:00整</span><br><span class="line">    	00 02 1 * * ls</span><br><span class="line">    		每月1号2:00整</span><br><span class="line">    	00 02 14 2 * ls</span><br><span class="line">    		每年2月14号2:00整</span><br><span class="line">    	00 02 * * 7 ls</span><br><span class="line">    		每周日2:00整</span><br><span class="line">    	00 02 * 6 5 ls</span><br><span class="line">    		每年6月的周五2:00整  （特殊）</span><br><span class="line">    	00 02 14 * 7 ls</span><br><span class="line">    		每月14号2:00整</span><br><span class="line">    		每周日2:00整</span><br><span class="line">    		这两个时间都执行</span><br><span class="line">    	00 02 14 2 7 ls</span><br><span class="line">    		每年2月14号2:00整</span><br><span class="line">    		2月每周日2:00整</span><br><span class="line">    		这两个时间都执行</span><br></pre></td></tr></table></figure>

<h1 id="⑪Linux日志管理"><a href="#⑪Linux日志管理" class="headerlink" title="⑪Linux日志管理"></a>⑪Linux日志管理</h1><p><strong>简介</strong></p>
<p>rsyslog 系统日志管理：关心问题：哪类程序—&gt;产生的什么日志—&gt;放到什么地方</p>
<p>logrotate日志轮转：将大量的日志，分割管理，删除旧日志。</p>
<h2 id="一、rsyslog系统日志管理"><a href="#一、rsyslog系统日志管理" class="headerlink" title="一、rsyslog系统日志管理"></a>一、rsyslog系统日志管理</h2><h3 id="1-处理日志的进程"><a href="#1-处理日志的进程" class="headerlink" title="1.处理日志的进程"></a>1.处理日志的进程</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">第一类：</span><br><span class="line">rsyslogd： 系统专职日志程序。</span><br><span class="line">处理绝大部分日志记录，</span><br><span class="line">系统操作有关的信息，如登录信息，程序启动关闭信息，错误信息</span><br><span class="line"></span><br><span class="line">第二类：</span><br><span class="line">httpd/nginx/mysql: 各类应用程序，可以以自己的方式记录日志.</span><br><span class="line"></span><br><span class="line">观察 rsyslogd程序</span><br><span class="line">[root@localhost ~]# ps aux |grep rsyslogd</span><br><span class="line">root 717 0.0 0.0 219752 3880 ? Ssl 09:05 0:00 /usr/sbin/rsyslogd -n</span><br></pre></td></tr></table></figure>

<h3 id="2-常见的日志文件-系统、进程、应用程序"><a href="#2-常见的日志文件-系统、进程、应用程序" class="headerlink" title="2.常见的日志文件(系统、进程、应用程序)"></a>2.常见的日志文件(系统、进程、应用程序)</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">系统主日志文件</span></span><br><span class="line">[root@localhost ~]# tail   -10   /var/log/messages</span><br><span class="line"><span class="meta">#</span><span class="bash">动态查看日志文件的尾部</span></span><br><span class="line">[root@localhost ~]# tail -f /var/log/messages</span><br><span class="line"><span class="meta">#</span><span class="bash">认证、安全</span></span><br><span class="line">[root@localhost ~]# tailf /var/log/secure</span><br><span class="line"><span class="meta"> #</span><span class="bash">yum</span></span><br><span class="line">[root@localhost ~]# tail /var/log/yum.log</span><br><span class="line"><span class="meta">#</span><span class="bash">跟邮件postfix相关</span></span><br><span class="line">[root@localhost ~]# tail /var/log/maillog</span><br><span class="line"><span class="meta">#</span><span class="bash">crond、at进程产生的日志</span></span><br><span class="line">[root@localhost ~]# tail /var/log/cron</span><br><span class="line"><span class="meta">#</span><span class="bash">和系统启动相关</span></span><br><span class="line">[root@localhost ~]# tail /var/log/dmesg</span><br><span class="line"> </span><br><span class="line">​##只需了解</span><br><span class="line">[root@localhost ~]# tail /var/log/audit/audit.log</span><br><span class="line"> //系统审计日志</span><br><span class="line"></span><br><span class="line">[root@localhost ~]# tail /var/log/mysqld.log</span><br><span class="line">//MySQL</span><br><span class="line"></span><br><span class="line">[root@localhost ~]# tail /var/log/xferlog</span><br><span class="line">//和访问FTP服务器相关</span><br><span class="line"></span><br><span class="line">[root@localhost ~]# tail  /var/log/wtmp</span><br><span class="line">//当前登录的用户（命令：w）</span><br><span class="line"></span><br><span class="line">[root@localhost ~]# tail  /var/log/btmp</span><br><span class="line">//最近登录的用户（命令last）</span><br><span class="line"></span><br><span class="line">[root@localhost ~]# tail  /var/log/lastlog</span><br><span class="line">//所有用户的登录情况（命令lastlog ）</span><br></pre></td></tr></table></figure>

<h3 id="3-rsyslogd配置"><a href="#3-rsyslogd配置" class="headerlink" title="3.rsyslogd配置"></a>3.rsyslogd配置</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">1.相关程序</span><br><span class="line">[root@localhost ~]# yum  -y install  rsyslog  logrotate</span><br><span class="line">默认已安装</span><br><span class="line"></span><br><span class="line">2.启动程序</span><br><span class="line">[root@localhost ~]# systemctl  start   rsyslog.service</span><br><span class="line"></span><br><span class="line">3.相关文件</span><br><span class="line">rpm -qc rsyslog	</span><br><span class="line">/etc/rsyslog.conf   ----rsyslogd的主配置文件（关键）</span><br><span class="line">/etc/sysconfig/rsyslog   ----rsyslogd相关文件，定义级别（了解一下）</span><br><span class="line">/etc/logrotate.d/syslog  ----和日志办轮转（切割）相关</span><br></pre></td></tr></table></figure>

<h3 id="4-主配置文件"><a href="#4-主配置文件" class="headerlink" title="4.主配置文件"></a>4.主配置文件</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">告诉rsyslogd进程什么日志，应该存到哪里</span><br><span class="line">[root@localhost ~]# vim /etc/rsyslog.conf</span><br><span class="line"></span><br><span class="line">RULES</span><br><span class="line">	即规则，是一套生成日志，以及存储日志的策略。</span><br><span class="line">	规则由设备+级别+存放位置组成。</span><br><span class="line">	RULES由FACILITY+LEVEL+FILE组成。</span><br><span class="line">	authpriv.* 		/var/log/secure（SSH信息）</span><br><span class="line">	mail.* 			-/var/log/maillog（发邮件）</span><br><span class="line">	cron.* 			/var/log/cron（创建任务）</span><br><span class="line">	这里有一个-符号, 表示是使用异步的方式记录, 因为日志一般会比较大</span><br><span class="line">	*.info;mail.none;authpriv.none;cron.none   /var/log/messages</span><br><span class="line">	系统日志排除了邮件，认证，计划日志。</span><br><span class="line">	</span><br><span class="line">facility设备</span><br><span class="line">	facility：是系统对某种类型事件的定义。如AUTHPRIV是安全事件，CRON是计划任务事件。</span><br><span class="line">	[root@localhost ~]# man 3 syslog</span><br><span class="line">	设备类型</span><br><span class="line">​		LOG_SYSLOG    #syslogd自身产生的日志 </span><br><span class="line">​		LOG_AUTHPRIV  #安全认证</span><br><span class="line">​		LOG_CRON      #cron and at</span><br><span class="line">​		LOG_MAIL      #邮件系统mail subsystem</span><br><span class="line">​		LOG_USER (default)  #用户相关</span><br><span class="line">​		LOG_DAEMON    #后台进程</span><br><span class="line">​		LOG_FTP       #ftp daemon</span><br><span class="line">​		LOG_KERN      #kernel messages</span><br><span class="line">​		LOG_LPR       #打印机printer subsystem</span><br><span class="line">​		LOG_LOCAL0 through LOG_LOCAL7  #用户自定义设备</span><br><span class="line">	程序类型示例</span><br><span class="line">		关于程序和设备的联系问题，程序自身会决定将日志交给哪类设备。如SSH程序会选择安全类设备。这一点由开发者定义。</span><br><span class="line">		[root@localhost ~]# grep  Facility    /etc/ssh/sshd_config </span><br><span class="line">		SyslogFacility AUTHPRIV</span><br><span class="line">		请问这个程序是属于哪个设备呢？~~~认证设备</span><br><span class="line">					</span><br><span class="line">level级别</span><br><span class="line">​		LOG_EMERG 		紧急，致命，服务无法继续运行，如配置文件丢失</span><br><span class="line">​		LOG_ALERT 		报警，需要立即处理，如磁盘空使用95%</span><br><span class="line">​		LOG_CRIT 		致命行为</span><br><span class="line">​		LOG_ERR 		错误行为</span><br><span class="line">​		LOG_WARNING	    警告信息</span><br><span class="line">​		LOG_NOTICE 	    普通，重要的标准信息</span><br><span class="line">​		LOG_INFO 		标准信息</span><br><span class="line">​		LOG_DEBUG 		调试信息，排错所需，一般不建议使用</span><br><span class="line">		从下到上，级别从低到高，记录的信息越来越少</span><br></pre></td></tr></table></figure>

<p>规则示意图：</p>
<p><img src= "/img/loading.gif" data-src="/2018/04/16/linux%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C/image-20200717182717245.png" alt="image-20200717182717245"></p>
<h2 id="二、logrotate日志轮转"><a href="#二、logrotate日志轮转" class="headerlink" title="二、logrotate日志轮转"></a>二、logrotate日志轮转</h2><p><strong>简介</strong></p>
<p>​    日志  记录了程序运行时各种信息。通过日志可以分析用户行为，记录运行轨迹，查找程序问题。可惜磁盘的空间是有限的，只能记录最后一段时间发生的事。为了节省空间和整理方便，日志文件经常需要按时间或大小等维度分成多份，删除时间久远的日志文件。</p>
<h3 id="1-工作原理"><a href="#1-工作原理" class="headerlink" title="1.工作原理"></a>1.工作原理</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">原理：按照配置进行轮转</span><br><span class="line"></span><br><span class="line">1.配置文件种类</span><br><span class="line">主文件：/etc/logrotate.conf (决定每个日志文件如何轮转)</span><br><span class="line">子文件夹：/etc/logrotate.d/*</span><br><span class="line"></span><br><span class="line">观察主文件和子文件</span><br><span class="line">[root@qianfeng ~]# ls /etc/logrotate.conf /etc/logrotate.d/</span><br><span class="line">/etc/logrotate.conf</span><br><span class="line">/etc/logrotate.d/:</span><br><span class="line">acpid cups iscsiuiolog ppp rpm subscription-manager up2date wpa_supplicant</span><br><span class="line">conman httpd mgetty psacct setroubleshoot syslog vsftpd.log yum</span><br></pre></td></tr></table></figure>

<h3 id="2-主配置文件介绍"><a href="#2-主配置文件介绍" class="headerlink" title="2.主配置文件介绍"></a>2.主配置文件介绍</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# vim /etc/logrotate.conf </span><br><span class="line">==============全局设置==============================</span><br><span class="line">weekly 		//轮转的周期，一周轮转</span><br><span class="line">rotate 4 	//保留4份</span><br><span class="line">create 		//轮转后创建新文件</span><br><span class="line">dateext 	//使用日期作为后缀</span><br><span class="line"><span class="meta">#</span><span class="bash">compress	 //是否压缩</span></span><br><span class="line">include /etc/logrotate.d	//包含该目录下的子配置文件</span><br><span class="line"></span><br><span class="line">/var/log/wtmp &#123;  //对某日志文件设置轮转的方法</span><br><span class="line">monthly 		 //一月轮转一次</span><br><span class="line">minsize 1M 		 //最小达到1M才轮转,monthly and  minsize</span><br><span class="line">create 0664 root utmp	 //轮转后创建新文件，并设置权限</span><br><span class="line">rotate 1 		//保留一份</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/var/log/btmp &#123;</span><br><span class="line">missingok 		//丢失不提示</span><br><span class="line">monthly 		//每月轮转一次</span><br><span class="line">create 0600 root utmp 	//轮转后创建新文件，并设置权限</span><br><span class="line">rotate 1 		//保留一份</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-yum日志轮转实例"><a href="#3-yum日志轮转实例" class="headerlink" title="3.yum日志轮转实例"></a>3.yum日志轮转实例</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">轮转的目标文件/var/log/yum.log</span><br><span class="line"></span><br><span class="line">​配置轮转规则</span><br><span class="line">[root@localhost ~]# vim /etc/logrotate.d/yum </span><br><span class="line">/var/log/yum.log &#123;</span><br><span class="line">missingok	  //丢失不执行</span><br><span class="line"><span class="meta">#</span><span class="bash">notifempty	  //空文件不论转</span></span><br><span class="line"><span class="meta">#</span><span class="bash">size 30k	  //达到30k轮转, daily or  size</span></span><br><span class="line"><span class="meta">#</span><span class="bash">yearly		  //或者一年一轮转</span></span><br><span class="line">daily		//缩小周期到1天</span><br><span class="line">rotate 3		//轮转保留3次</span><br><span class="line">create 0777 root root</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">​测试</span><br><span class="line">1.错误示范</span><br><span class="line">[root@localhost ~]# /usr/sbin/logrotate /etc/logrotate.conf   #手动轮转</span><br><span class="line">[root@localhost ~]# ls /var/log/yum*</span><br><span class="line">/var/log/yum.log</span><br><span class="line">文件只有一个。因为日期没变</span><br><span class="line"></span><br><span class="line">2.正确示范</span><br><span class="line">修改时间，手动触发轮转</span><br><span class="line">[root@localhost ~]# date 04011000   #把时间向未来推移</span><br><span class="line">[root@localhost ~]# /usr/sbin/logrotate  -s /var/lib/logrotate/logrotate.status /etc/logrotate.conf</span><br><span class="line">[root@localhost ~]# ls /var/log/yum*</span><br><span class="line">日志文件已经出现多个</span><br><span class="line"></span><br><span class="line">​关于时间</span><br><span class="line">[root@localhost ~]# grep 'yum' /var/lib/logrotate/logrotate.status</span><br><span class="line">//记录所有日志文件最近轮转的时间</span><br><span class="line"></span><br><span class="line">"/var/log/yum.log" 2019-3-31-10:0:23</span><br><span class="line">//如果没有轮转过，第一次只有记录</span><br></pre></td></tr></table></figure>

<h1 id="⑫Linux网络管理"><a href="#⑫Linux网络管理" class="headerlink" title="⑫Linux网络管理"></a>⑫Linux网络管理</h1><h2 id="一、网络接口名称规则"><a href="#一、网络接口名称规则" class="headerlink" title="一、网络接口名称规则"></a>一、网络接口名称规则</h2><p>en：eethernet 以太网-双绞线</p>
<p>wl：wirelessLAN：无线网卡</p>
<p>ww：WAN广域网：串行线缆</p>
<p>o：on-board板载网卡</p>
<p>s：hotplug热插拔</p>
<p>p：PCI接口</p>
<p>N：序号或者ID</p>
<p>示例：enp2s0</p>
<h2 id="二、NetworkManager服务"><a href="#二、NetworkManager服务" class="headerlink" title="二、NetworkManager服务"></a>二、NetworkManager服务</h2><p>网络管理器（NetworkManager）是一个动态网络的控制器与配置系统，它用于当网络设备可用时保持设备和连接开启并激活</p>
<p>默认情况下，CentOS/RHEL 7 已安装网络管理器，并处于启用状态。</p>
<p>查看网络管理程序的状态：systemctl    status   NetworkManager </p>
<p>查看网络子管理程序的状态：systemctl    status   network</p>
<h2 id="三、配置网络的工具"><a href="#三、配置网络的工具" class="headerlink" title="三、配置网络的工具"></a>三、配置网络的工具</h2><p><strong>1.命令行配置</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">配置文件：</span><br><span class="line">[root@localhost ~]# vim /etc/sysconfig/network-scripts/ifcfg-ens32</span><br><span class="line">命令行： nmcli</span><br><span class="line">如果没有这个命令，可以执行安装 yum -y install NetworkManager</span><br></pre></td></tr></table></figure>

<p>2.图形配置   略</p>
<h2 id="四、配置网络参数"><a href="#四、配置网络参数" class="headerlink" title="四、配置网络参数"></a>四、配置网络参数</h2><h3 id="1-配置IP"><a href="#1-配置IP" class="headerlink" title="1.配置IP"></a>1.配置IP</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">#### 	1.配置网卡参数</span></span></span><br><span class="line"></span><br><span class="line">先备份网卡配置文件，在修改</span><br><span class="line">[root@qianfeng ~]# cp   /etc/sysconfig/network-scripts/ifcfg-ens33   .</span><br><span class="line">命令行查看IP #ip a</span><br><span class="line">命令行查网关 #ip  r</span><br><span class="line">命令行查dns  #cat   /etc/resolv.conf</span><br><span class="line"></span><br><span class="line">！！！修改这个文件要慎重</span><br><span class="line">[root@qianfeng ~]# vim /etc/sysconfig/network-scripts/ifcfg-ens33</span><br><span class="line">ONBOOT=yes      #是否启用该设备</span><br><span class="line">BOOTPROTO=none  #手动(none/static)还是自动(dhcp)</span><br><span class="line">IPADDR=192.168.142.131   #根据自动获取的地址进行配置，用来定位主机</span><br><span class="line">NETMASK=255.255.255.0  #子网掩码。用来定义网络，这台主机是192.168.142的网络</span><br><span class="line">GATEWAY=192.168.142.2  #网关，也叫默认路由</span><br><span class="line">DNS1=192.168.142.2   #域名解析。这个数字1不要忘了</span><br><span class="line"></span><br><span class="line">NAME=ens33   #网卡信息</span><br><span class="line">UUID=d1769473-dc3c-4cf3-9158-8798994d24bb  #网卡信息</span><br><span class="line">DEVICE=ens33  #网卡信息</span><br><span class="line"></span><br><span class="line">UUID不是网卡配置文件中必须的信息</span><br><span class="line">查看自身网卡UUID的命令</span><br><span class="line">[root@localhost ~]#  nmcli con</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">#### 	2.重启网络服务</span></span></span><br><span class="line">[root@qianfeng ~]# systemctl   restart network</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">#### 	3.查看IP地址</span></span></span><br><span class="line">[root@qianfeng ~]# ip  a</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">### 问题</span></span></span><br><span class="line">windows虚拟网卡是否安装</span><br><span class="line">VMware系统服务是否被优化掉</span><br><span class="line">LINUX网络配置设置为开机启动</span><br></pre></td></tr></table></figure>

<h3 id="2-主机名"><a href="#2-主机名" class="headerlink" title="2.主机名"></a>2.主机名</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">### 改名方式1</span></span></span><br><span class="line">查看主机名</span><br><span class="line">[root@qianfeng ~]# hostname</span><br><span class="line">配置主机名</span><br><span class="line">[root@qianfeng ~]# hostnamectl  set-hostname  qf</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">### 改名方式2</span></span></span><br><span class="line">查看和配置主机名</span><br><span class="line">[root@qianfeng ~]# cat /etc/hostname </span><br><span class="line">[root@qianfeng ~]# vim  /etc/hostname</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">### 重启生效</span></span></span><br><span class="line">[root@qianfeng ~]# reboot</span><br></pre></td></tr></table></figure>

<h3 id="3-网络测试工具"><a href="#3-网络测试工具" class="headerlink" title="3.网络测试工具"></a>3.网络测试工具</h3><p>测试工具</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@qianfeng ~]# ip a		    //查看所有IP（ifconfig）</span><br><span class="line">[root@qianfeng ~]# ip route		//查看路由，查看网关</span><br><span class="line">[root@qianfeng ~]# ip neigh 	//（了解）另一台主机ping通，查看邻居</span><br><span class="line">[root@qianfeng ~]# ping  127.0.0.1</span><br><span class="line">PING （Packet Internet Groper），因特网包探索器</span><br><span class="line">两台虚拟机需要通信，vmnet号（网络连接模式）一定要相同</span><br></pre></td></tr></table></figure>

<p>ports and services</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">安装示例服务</span></span><br><span class="line">什么程序不重要</span><br><span class="line">[root@aliyun ~]# yum -y install httpd </span><br><span class="line">[root@aliyun ~]# systemctl start httpd</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">Show TCP sockets</span></span><br><span class="line">什么端口不重要</span><br><span class="line">[root@aliyun ~]# ss -tnl</span><br><span class="line">State Recv-Q Send-Q Local Address:Port Peer Address:Port </span><br><span class="line">LISTEN 0 128 *:80 *:* </span><br><span class="line">[root@aliyun ~]# netstat  -anpt</span><br><span class="line"></span><br><span class="line">​重要的是要知道端口的概念和查看的方法</span><br></pre></td></tr></table></figure>

<h2 id="五、初始化服务器"><a href="#五、初始化服务器" class="headerlink" title="五、初始化服务器"></a>五、初始化服务器</h2><p><strong>最小化安装</strong>：兼容程序、​开发包</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">1.为你的服务器配置root 密码</span><br><span class="line"></span><br><span class="line">2.配置IP地址（VMNAT8）</span><br><span class="line"></span><br><span class="line">3.配置YUM 源</span><br><span class="line">自动挂载光驱/阿里YUM，配置YUM仓库</span><br><span class="line"></span><br><span class="line">4.关防火墙</span><br><span class="line">[root@localhost ~]# systemctl  stop firewalld</span><br><span class="line">[root@localhost ~]# systemctl  disable  firewalld</span><br><span class="line">[root@localhost ~]# systemctl  status firewalld		</span><br><span class="line"></span><br><span class="line">5.selinux</span><br><span class="line">临时关闭：setenforce  0 （零）</span><br><span class="line">永久关闭：</span><br><span class="line">[root@localhost ~]# vim /etc/sysconfig/selinux </span><br><span class="line">SELINUX=disabled</span><br><span class="line"></span><br><span class="line">6.安装常用程序</span><br><span class="line">[root@localhost ~]# yum install -y    lrzsz    sysstat  elinks   wget   net-tools   bash-completion</span><br><span class="line"></span><br><span class="line">7.关机快照</span><br></pre></td></tr></table></figure>

<h1 id="⑬Linux网络管理实战1"><a href="#⑬Linux网络管理实战1" class="headerlink" title="⑬Linux网络管理实战1"></a>⑬Linux网络管理实战1</h1><h2 id="一、OSI简介"><a href="#一、OSI简介" class="headerlink" title="一、OSI简介"></a>一、OSI简介</h2><ul>
<li><p>​    OSI：Open System Interconnection 开放系统互联模型</p>
</li>
<li><p>​    国际标准化组织（ISO）制定，定义了不同计算机互联的标准，设计和描述，计算机网络通信的框架</p>
</li>
<li><p>​    制定OSI的优势：<br>​            开放<br>​            厂商兼容性<br>​            易于理解、学习<br>​            模块化工程<br>​            故障排除</p>
</li>
</ul>
<h3 id="1、OSI-7层结构"><a href="#1、OSI-7层结构" class="headerlink" title="1、OSI:7层结构"></a>1、OSI:7层结构</h3><table>
<thead>
<tr>
<th align="center">OSI的7层结构</th>
<th align="center">功  能</th>
</tr>
</thead>
<tbody><tr>
<td align="center">应用层</td>
<td align="center">应用程序/原始数据</td>
</tr>
<tr>
<td align="center">表示层</td>
<td align="center">格式/压缩/加密：快速传递、安全传递</td>
</tr>
<tr>
<td align="center">会话层</td>
<td align="center">会话/全双工/半双工：身份信息</td>
</tr>
<tr>
<td align="center">传输层</td>
<td align="center">分段/重组/端口号：传输效率</td>
</tr>
<tr>
<td align="center">网络层</td>
<td align="center">IP地址/寻址/路由：总目标，全球地址</td>
</tr>
<tr>
<td align="center">数据链路层</td>
<td align="center">MAC地址/局域网：分段目标，局部地址</td>
</tr>
<tr>
<td align="center">物理层</td>
<td align="center">传输介质/比特流：电流/光/无线信号/4G/5G</td>
</tr>
</tbody></table>
<h3 id="2、TCP-IP-5层结构"><a href="#2、TCP-IP-5层结构" class="headerlink" title="2、TCP/IP:5层结构"></a>2、TCP/IP:5层结构</h3><table>
<thead>
<tr>
<th align="center">TCP/IP的5层结构</th>
<th align="center">功  能</th>
</tr>
</thead>
<tbody><tr>
<td align="center">应用层</td>
<td align="center">应用程序/原始数据<br>格式/压缩/加密：快速传递、安全传递<br>会话/全双工/半双工：身份信息</td>
</tr>
<tr>
<td align="center">传输层</td>
<td align="center">分段/重组/端口号：传输效率</td>
</tr>
<tr>
<td align="center">网络层</td>
<td align="center">IP地址/寻址/路由：总目标，全球地址</td>
</tr>
<tr>
<td align="center">数据链路层</td>
<td align="center">MAC地址/局域网：分段目标，局部地址</td>
</tr>
<tr>
<td align="center">物理层</td>
<td align="center">传输介质/比特流：电流/光/无线信号/4G/5G</td>
</tr>
</tbody></table>
<h3 id="3、TCP-IP-4层结构"><a href="#3、TCP-IP-4层结构" class="headerlink" title="3、TCP/IP:4层结构"></a>3、TCP/IP:4层结构</h3><table>
<thead>
<tr>
<th align="center">TCP/IP的4层结构</th>
<th align="center">功  能</th>
</tr>
</thead>
<tbody><tr>
<td align="center">应用层</td>
<td align="center">应用程序/原始数据<br>格式/压缩/加密：快速传递、安全传递<br>会话/全双工/半双工：身份信息</td>
</tr>
<tr>
<td align="center">传输层</td>
<td align="center">分段/重组/端口号：传输效率</td>
</tr>
<tr>
<td align="center">网络层</td>
<td align="center">IP地址/寻址/路由：总目标，全球地址</td>
</tr>
<tr>
<td align="center">网络接口层</td>
<td align="center">MAC地址/局域网：分段目标，局部地址<br>传输介质/比特流：电流/光/无线信号/4G/5G</td>
</tr>
</tbody></table>
<h3 id="4、OSI模型和TCP-IP模型的区别"><a href="#4、OSI模型和TCP-IP模型的区别" class="headerlink" title="4、OSI模型和TCP/IP模型的区别"></a>4、OSI模型和TCP/IP模型的区别</h3><p>OSI<br>​        推出的时间早，只有理论，没有实践</p>
<p>TCP/IP<br>        传输控制协议/互联网协议（Trancation Control Protocol/Inetnet  Protocol）<br>        由美国军方实践，总结出的理论，当今通信标准</p>
<h3 id="5、TCP-IP-数据单元-DU"><a href="#5、TCP-IP-数据单元-DU" class="headerlink" title="5、TCP/IP:数据单元/DU"></a>5、TCP/IP:数据单元/DU</h3><p>为了方便交流，通信模型不同的模块对信息加工，并进行统一命名。</p>
<table>
<thead>
<tr>
<th align="center">类型</th>
<th align="center">名称</th>
<th align="center">释义</th>
</tr>
</thead>
<tbody><tr>
<td align="center">应用层数据</td>
<td align="center">AP   DU</td>
<td align="center">APDU：ApplicationProtocolDataUnit–应用协议数据单元</td>
</tr>
<tr>
<td align="center">传输层数据</td>
<td align="center">segment DU</td>
<td align="center">分段数据</td>
</tr>
<tr>
<td align="center">网络层数据</td>
<td align="center">packet DU</td>
<td align="center">包 数据</td>
</tr>
<tr>
<td align="center">数据链路层数据</td>
<td align="center">frame DU</td>
<td align="center">帧 数据</td>
</tr>
<tr>
<td align="center">物理层数据</td>
<td align="center">bit DU</td>
<td align="center">比特 数据</td>
</tr>
</tbody></table>
<h3 id="6-封装和解封装"><a href="#6-封装和解封装" class="headerlink" title="6.封装和解封装"></a>6.封装和解封装</h3><p>信息从一台计算产生，经过TCP/IP模型加工。后传递到另一台计算机。<br>​        这个通信过程就像，快递从厂家包装到顾客收到货物拆包一样。<br>​        把这个通信过程，称作数据的封装（发送）和数据解封装（接收）<br>​        从而更好的理解，数据通信原理。<br>​<br>​    数据封装的过程大致如下<br>​        1.（应用层）用户信息转换为数据，以便在网络上传输<br>​        2.（传输层）数据转换为数据段，并在发送方和接收方主机之间建立一条可靠的连接<br>​        3.（网络层）数据段转换为数据包或数据报，并在报头中放上逻辑地址，这样每一个数据包都可以通过互联网络进行传输<br>​        4.（数据链路层）数据包或数据报转换为帧，以便在本地网络中传输。在本地网段上，使用硬件地址唯一标识每一台主机。<br>​        5.（物理层）帧转换为比特流，并采用数字编码和时钟方案</p>
<h2 id="二、TCP-IP协议族"><a href="#二、TCP-IP协议族" class="headerlink" title="二、TCP/IP协议族"></a>二、TCP/IP协议族</h2><p>TCP/IP：传输控制协议/互联网协议（Transmission Control Protocol/Internet Protocol）</p>
<p><strong>5层模型协议分类</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># 应用层</span></span></span><br><span class="line">​	HTTP/超文本传输协议/网站------淘宝</span><br><span class="line">​	SSH/远程连接协议/远程控制-----QQ远程桌面</span><br><span class="line">​	FTP/文件传输协议-------------电影天堂</span><br><span class="line">​	SMTP/简单邮件传输协议/Email---QQ邮箱</span><br><span class="line">​	DNS/域名服务/WWW-------------baiyun.com</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># 传输层</span></span></span><br><span class="line">​	TCP/传输控制协议/可靠-------鸡毛信、挂号信</span><br><span class="line">​	UDP/用户数据报协议/不可靠----普通信</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># 网络层</span></span></span><br><span class="line">​	IP/互联网协议/寻址----------全球地址</span><br><span class="line">​	ICMP/网络消息管理协议/测试---通信兵</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># 数据链路层</span></span></span><br><span class="line">​	MAC---------家到邮局的地址</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># 物理层</span></span></span><br><span class="line">​	网线--------公路</span><br><span class="line">​	光纤--------航道</span><br></pre></td></tr></table></figure>

<h2 id="三、进制转换"><a href="#三、进制转换" class="headerlink" title="三、进制转换"></a>三、进制转换</h2><p><strong>十进制</strong></p>
<p>​    数值：0~9</p>
<p>​    数位：123</p>
<p>​    位权：百位十位个位</p>
<p><strong>二进制</strong></p>
<p>​    数值：0~1</p>
<p>​    数位：10</p>
<p>​    位权：128-64-32-16-8-4-2-1</p>
<p><strong>十六进制</strong></p>
<p>​    数值：0~9，A(10),B(11),C(12),D(13),E(14),F(15)</p>
<p>​    数位：10</p>
<p>​    位权：十六的倍数</p>
<p><strong>二进制、十进制互转</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">10和2互转</span><br><span class="line">128   64    32   16     8      4     2      1</span><br><span class="line">1     1     1     1     1      1     1      1</span><br><span class="line"></span><br><span class="line">位权加减法</span><br><span class="line">十进制转换成2进制</span><br><span class="line"></span><br><span class="line">方法：</span><br><span class="line">1  请将8位2进制，每个位置的位权写出来。</span><br><span class="line">2  通过加减法，在2进制位权中取得相应数字。 不足的位置用0填充。</span><br><span class="line"></span><br><span class="line">示例：</span><br><span class="line">129=1000 0001</span><br><span class="line">192=1100 0000</span><br><span class="line">130=1000 0010</span><br><span class="line"></span><br><span class="line">67=0100 0011</span><br><span class="line">33=0010 0001</span><br><span class="line"></span><br><span class="line">二进制转十进制</span><br><span class="line">示例：</span><br><span class="line">1010 1010=170</span><br><span class="line">1111 1110=？</span><br></pre></td></tr></table></figure>

<p><strong>单位换算</strong></p>
<p>​    ASCII<br>​    比特=bit=b=1/0<br>​    字节=byte=B=8个比特<br>​    1KB=1024B<br>​    1MB=1024KB<br>​    1GB=1024MB<br>​    1TB=1024GB</p>
<h1 id="⑭Linux网络管理实战2"><a href="#⑭Linux网络管理实战2" class="headerlink" title="⑭Linux网络管理实战2"></a>⑭Linux网络管理实战2</h1><h2 id="一、物理层"><a href="#一、物理层" class="headerlink" title="一、物理层"></a>一、物理层</h2><h3 id="1-信号"><a href="#1-信号" class="headerlink" title="1.信号"></a>1.信号</h3><ul>
<li>模拟信号<br>不断变换的物理量，适用电话网络</li>
</ul>
<p><img src= "/img/loading.gif" data-src="/2018/04/16/linux%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C/image-20200717204508987.png" alt="image-20200717204508987"></p>
<ul>
<li><p>数字信号<br>​    两种恒定物理量，适用计算机网络<br>​    优点：抗噪音和抗衰减比较强</p>
<p><img src= "/img/loading.gif" data-src="/2018/04/16/linux%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C/image-20200717204801100.png" alt="image-20200717204801100"></p>
</li>
</ul>
<h3 id="2-介质"><a href="#2-介质" class="headerlink" title="2.介质"></a>2.介质</h3><p>​    <strong>双绞线</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">EIA&#x2F;TIA568标准</span><br><span class="line"></span><br><span class="line">​外形：八根线芯，两两互绞				</span><br><span class="line">​功能分类</span><br><span class="line">	屏蔽型</span><br><span class="line">	非屏蔽性</span><br><span class="line">​速率分类</span><br><span class="line">	cat 5 &#x2F;5类线&#x2F;10M100M</span><br><span class="line">	cat 5e&#x2F;超五类线&#x2F;10M100M</span><br><span class="line">	cat 6</span><br><span class="line">​接口</span><br><span class="line">	RJ45&#x2F;水晶头</span><br><span class="line">	线序：EIA&#x2F;TIA568B：橙白，橙，绿白，蓝，蓝白，绿，棕白 ，棕</span><br><span class="line">	标准网线：两端线序相同。</span><br></pre></td></tr></table></figure>

<p><strong>光纤</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">	多模&#x2F;单模</span><br><span class="line">​	纤芯粗&#x2F;纤芯细</span><br><span class="line">​	低速&#x2F;高速</span><br><span class="line">​	近&#x2F;远</span><br><span class="line">​	便宜&#x2F;贵</span><br><span class="line">​	FC&#x2F;ST&#x2F;LC&#x2F;</span><br></pre></td></tr></table></figure>

<h2 id="二、数据链路层"><a href="#二、数据链路层" class="headerlink" title="二、数据链路层"></a>二、数据链路层</h2><h3 id="1-功能"><a href="#1-功能" class="headerlink" title="1.功能"></a>1.功能</h3><p>链路创建，维护，管理，帧封装，传输，同步，差错校验</p>
<h3 id="2-地址"><a href="#2-地址" class="headerlink" title="2.地址"></a>2.地址</h3><p>MAC地址：媒体访问控制地址（Media Access Control Address）</p>
<p>结构：48位2进制数字，12位16进制数字</p>
<p>示例：</p>
<p>​        前六位是厂商标识，后六位是硬件标识</p>
<p>​        00-21-CC-C3-8C-B0</p>
<h3 id="3-帧封装"><a href="#3-帧封装" class="headerlink" title="3.帧封装"></a>3.帧封装</h3><p>MAC 地址是怎么写到信息当中的呢？</p>
<p>答：目标MAC//源MAC//数据//CRC</p>
<p>图示：</p>
<p><img src= "/img/loading.gif" data-src="/2018/04/16/linux%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C/image-20200717210320231.png" alt="image-20200717210320231"></p>
<h3 id="4-交换机工作原理"><a href="#4-交换机工作原理" class="headerlink" title="4.交换机工作原理"></a>4.交换机工作原理</h3><p>学习/广播/转发/更新</p>
<p><img src= "/img/loading.gif" data-src="/2018/04/16/linux%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C/image-20200717210412679.png" alt="image-20200717210412679"></p>
<p><img src= "/img/loading.gif" data-src="/2018/04/16/linux%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C/image-20200717210426435.png" alt="image-20200717210426435"></p>
<h3 id="5-组建局域网"><a href="#5-组建局域网" class="headerlink" title="5.组建局域网"></a>5.组建局域网</h3><p>通过Cisco Packte Tracert软件，组建一个局域网</p>
<p>思路</p>
<p>1 安装cisco cpt软件<br>        2 部署交换机和主机<br>        3 直通线连线，主机和交换机。<br>        4 为每个主机配置IP,互相ping测试<br>        5 通过show  mac-address-table。观察交换机工作原理。<br>        6 更换某个主机于交换机连接的接口，ping测试后， 再次观察交换机的更新。    </p>
<p><img src= "/img/loading.gif" data-src="/2018/04/16/linux%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C/image-20200717210554510.png" alt="image-20200717210554510">                </p>
<h3 id="6-VLAN"><a href="#6-VLAN" class="headerlink" title="6.VLAN"></a>6.VLAN</h3><p>VLAN：虚拟局域网络（Virtual Local Area Network）</p>
<img src= "/img/loading.gif" data-src="/2018/04/16/linux%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C/image-20200717210824136.png" alt="image-20200717210824136" style="zoom: 80%;">

<img src= "/img/loading.gif" data-src="/2018/04/16/linux%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C/image-20200717210851295.png" alt="image-20200717210851295" style="zoom:80%;">

<p><strong>划分VLAN的方法</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">创建VLAN （2~1024）</span><br><span class="line">​根据接口和VLAN的关系</span><br><span class="line">	接口和VLAN 10</span><br><span class="line">	F0&#x2F;1~F0&#x2F;10   VLAN 10</span><br><span class="line">	F0&#x2F;11~F0&#x2F;20  VLAN 20</span><br></pre></td></tr></table></figure>

<p><strong>配置</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">实验1：交换机1上配置</span><br><span class="line">​enable      #特权</span><br><span class="line">​config  t   #进入配置模式（config）#</span><br><span class="line">​vlan 10     #创建局域网10</span><br><span class="line">​vlan 20     #创建局域网20</span><br><span class="line">​interface  fastethernet0/1   #必须要在接口模式下才可以输入</span><br><span class="line">​switch access vlan 10        #将端口加入VLAN</span><br><span class="line">​interface  f0/2</span><br><span class="line">​switch access vlan 10</span><br><span class="line">​interface  f0/3</span><br><span class="line">​switch access vlan 20</span><br><span class="line">​interface  f0/4</span><br><span class="line">​switch access vlan 20</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">### 验证</span></span></span><br><span class="line">使用相同vlan主机通信成功，不同vlan主机通信不成功。</span><br></pre></td></tr></table></figure>

<h3 id="7-TRUNK"><a href="#7-TRUNK" class="headerlink" title="7.TRUNK"></a>7.TRUNK</h3><p><strong>干道</strong></p>
<p><strong>核心技术</strong>：打标    </p>
<p><img src= "/img/loading.gif" data-src="/2018/04/16/linux%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C/image-20200717211912206.png" alt="image-20200717211912206"></p>
<p><strong>目的</strong>：通过一根网线，传递不同VLAN 信息。</p>
<p><strong>配置</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">在另一台交换机上switch2，实现划分vlan 的行为。雷同于实验1</span><br><span class="line"></span><br><span class="line">​enable      #特权</span><br><span class="line">​config  t   #进入配置模式（config）#</span><br><span class="line">​vlan 10     #创建局域网10</span><br><span class="line">​vlan 20     #创建局域网20</span><br><span class="line">​interface  fastethernet0/1   #必须要在接口模式下才可以输入</span><br><span class="line">​switch access vlan 10        #将端口加入VLAN</span><br><span class="line">​interface  f0/2</span><br><span class="line">​switch access vlan 10</span><br><span class="line">​interface  f0/3</span><br><span class="line">​switch access vlan 20</span><br><span class="line">​interface  f0/4</span><br><span class="line">​switch access vlan 20</span><br><span class="line">​在交换机互联的接口中配置</span><br><span class="line">​interface  f0/5</span><br><span class="line">​switch mode  trunk   #配置链路</span><br><span class="line">​switch1 也需要在f0/5配置trunk链路</span><br></pre></td></tr></table></figure>

<p><strong>测试</strong></p>
<p>实现不同交换机上，相同VLAN主机通信成功。</p>
<p>实现不同交换机上，不相同VLAN主机通信不成功。</p>
<p><strong>总结</strong></p>
<p>​        交换机接口工作模式，分为acces和trunk</p>
<p>​        access是指定接口连接的是主机</p>
<p>​        trunk是指定接口连接的是交换机，需要通过多个VLAN的数据</p>
<h1 id="⑮Linux网络管理实战3—网络层"><a href="#⑮Linux网络管理实战3—网络层" class="headerlink" title="⑮Linux网络管理实战3—网络层"></a>⑮Linux网络管理实战3—网络层</h1><h2 id="一、IP地址"><a href="#一、IP地址" class="headerlink" title="一、IP地址"></a>一、IP地址</h2><p>简介</p>
<p>​    32位二进制数，用于主机在互联网中的标识，4组十进制数表示。IP地址每八位为一组，用”.”分割，用十进制标识。例如：<br>​        192.168.0.1<br>​        156.86.254.255</p>
<h3 id="1、IP分类"><a href="#1、IP分类" class="headerlink" title="1、IP分类"></a>1、IP分类</h3><table>
<thead>
<tr>
<th align="center">类型</th>
<th align="center">网段</th>
<th align="center">备注</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><strong>A类</strong></td>
<td align="center"><strong>1~126</strong></td>
<td align="center">127:回环地址：本机</td>
</tr>
<tr>
<td align="center"><strong>B类</strong></td>
<td align="center"><strong>128~191</strong></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"><strong>C类</strong></td>
<td align="center"><strong>192~223</strong></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">D类</td>
<td align="center">224~239</td>
<td align="center">组播</td>
</tr>
<tr>
<td align="center">E类</td>
<td align="center">240~255</td>
<td align="center">科研</td>
</tr>
</tbody></table>
<p><strong>私有IP分类</strong></p>
<p>​    A类：10.0.0.0~10.255.255.255</p>
<p>​    B类：172.16.0.0~172.31.255.255</p>
<p>​    C类：192.168.0.0~192.168.255.255</p>
<h3 id="2-子网掩码"><a href="#2-子网掩码" class="headerlink" title="2.子网掩码"></a>2.子网掩码</h3><p>作用：32位2进制数字运算出IP地址的网络部分。</p>
<p><strong>分类：</strong></p>
<p>​        A类：255.0.0.0</p>
<p>​        B类：255.255.0.0</p>
<p>​        C类：255.255.255.0</p>
<p>方法：</p>
<p>​        子网掩码中为1部分，对应IP地址的网络位。IP地址和子网掩码，逻辑与运算</p>
<p>网络地址：</p>
<p>​    网络位相同，IP地址是同一网段</p>
<p>​    网络位不同，IP地址不是同一网段</p>
<h2 id="二、网络层封装（略）"><a href="#二、网络层封装（略）" class="headerlink" title="二、网络层封装（略）"></a>二、网络层封装（略）</h2><h2 id="三、路由器工作原理（略）"><a href="#三、路由器工作原理（略）" class="headerlink" title="三、路由器工作原理（略）"></a>三、路由器工作原理（略）</h2><h1 id="⑯Linux文件服务"><a href="#⑯Linux文件服务" class="headerlink" title="⑯Linux文件服务"></a>⑯Linux文件服务</h1><h2 id="一、FTP-Server"><a href="#一、FTP-Server" class="headerlink" title="一、FTP Server"></a>一、FTP Server</h2><p>FTP（File Transfer Protocol，文件传输协议） 是 TCP/IP 协议组中的协议之一</p>
<p>作用：提供文件共享服务。互联网上多的媒体资源和软件资源，绝大部分都是通过FTP服务器传递。</p>
<p>软件包：vsftpd        </p>
<p>基础：</p>
<p>​    <strong>控制端口 command 21/tcp</strong> </p>
<p>​    <strong>数据端口 data 20/tcp</strong></p>
<h3 id="1-FTP-Server-默认配置"><a href="#1-FTP-Server-默认配置" class="headerlink" title="1.FTP Server 默认配置"></a>1.FTP Server 默认配置</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">### 1.安装vsftp</span></span></span><br><span class="line">yum -y install vsftpd</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">### 2.准备分发的文件</span></span></span><br><span class="line">touch /var/ftp/abc.txt</span><br><span class="line">注释：FTP服务器的主目录：“/var/ftp/”，是FTP程序分享内容的本机目录。</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">### 3.启动服务</span></span></span><br><span class="line">systemctl start vsftpd</span><br><span class="line">systemctl enable vsftpd</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">### 4.关闭防火墙</span></span></span><br><span class="line">systemctl  stop firewalld</span><br><span class="line">systemctl  disable firewalld</span><br><span class="line">setenforce 0</span><br><span class="line">vim   /etc/selinux/config</span><br><span class="line">修改内容为：SELINUX=disabled</span><br></pre></td></tr></table></figure>

<h3 id="2-FTP-Clinet"><a href="#2-FTP-Clinet" class="headerlink" title="2.FTP Clinet"></a>2.FTP Clinet</h3><p><strong>LinuxFTP客户端程序1：lftp</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">#### 安装客户端工具</span></span></span><br><span class="line">[root@qianfeng ~]# yum -y install lftp</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">#### 访问服务器</span></span></span><br><span class="line">[root@qianfeng ~]# lftp 服务器的IP地址</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">#### 查看并下载</span></span></span><br><span class="line">lftp qianfeng:~&gt; ls </span><br><span class="line">drwxr-xr-x 2 0 0 4096 Mar 31 2019 pub</span><br><span class="line">-rw-r--r-- 1 0 0 0 Nov 22 03:53 abc.txt</span><br><span class="line"></span><br><span class="line">lftp qianfeng:~&gt; get abc.txt  #下载文件</span><br><span class="line">lftp qianfeng:~&gt; mirror pub   #下载目录</span><br></pre></td></tr></table></figure>

<p><strong>LinuxFTP客户端程序2：wget</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@qianfeng ~]# wget ftp://192.168.142.132/abc.txt</span><br><span class="line">[root@qianfeng ~]# wget ftp://192.168.142.132/abc.txt -O /tmp/a.sh</span><br><span class="line">-O 指定文件名和路径</span><br><span class="line">[root@qianfeng ~]# wget http://nginx.org/download/nginx-1.10.2.tar.gz</span><br><span class="line">[root@qianfeng ~]# wget -m ftp://zhufo.top/soft</span><br><span class="line">-m 下载目录</span><br></pre></td></tr></table></figure>

<p><strong>任何系统firefox、IE</strong></p>
<p>​        1.客户机打开浏览器</p>
<p>​        2.输入“ftp://服务器IP地址”</p>
<p>​            默认仅能下载文件</p>
<h3 id="3-启动上传功能"><a href="#3-启动上传功能" class="headerlink" title="3.启动上传功能"></a>3.启动上传功能</h3><p>配置文件  /etc/vsftpd/vsftpd.conf</p>
<p><strong>1.检查禁用匿名账户登录开启</strong></p>
<p>目的：启用禁用匿名账号（默认，比较方便）</p>
<p>anonymous_enable=YES<br>     //是否允许匿名用户登录ftp</p>
<p><strong>2.配置上传指令</strong></p>
<p>  anon_upload_enable=YES<br>          //启动上传文件功能<br>          anon_mkdir_write_enable=YES<br>          //启动创建目录功能</p>
<p><strong>3.创建上传目录</strong></p>
<p>  mkdir   /var/ftp/upload<br>          chmod  777   /var/ftp/upload</p>
<p><strong>4.客户端测试</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">登录服务器</span><br><span class="line">​	lftp 192.168.142.129</span><br><span class="line">上传文件</span><br><span class="line">​	前提是客户机要有一个2.txt文件</span><br><span class="line">​	然后进入上传目录</span><br><span class="line">​	cd   upload</span><br><span class="line">​	put 2.txt</span><br><span class="line">创建目录</span><br><span class="line">​	mkdir 222</span><br><span class="line">上传目录</span><br><span class="line">​	前提是你要有一个文件夹，等着上传。</span><br><span class="line">​	mirror -R aaa</span><br></pre></td></tr></table></figure>

<h2 id="二、NFS-Server"><a href="#二、NFS-Server" class="headerlink" title="二、NFS Server"></a>二、NFS Server</h2><p>NFS：Network File System 网络文件系统，Linux/Unix系统之间共享文件的一种协议</p>
<p>NFS 的客户端主要为Linux，支持多节点同时挂载以及并发写入</p>
<p><strong>作用</strong>：</p>
<p>​        提供文件共享服务</p>
<p>​        为 Web Server 配置集群中的后端存储</p>
<p>此次实验环境：</p>
<p>nas 192.168.142.133<br>​        web1 192.168.142.132<br>​        web2 192.168.142.130<br>​        web3 192.168.142.134</p>
<p>关防火墙</p>
<p>vi   /etc/selinux/config<br>​        SELINUX=disabled<br>​        setenforce 0<br>​        systemctl stop firewalld<br>​        systemctl disable firewalld</p>
<h3 id="1、nas（存储端）"><a href="#1、nas（存储端）" class="headerlink" title="1、nas（存储端）"></a>1、nas（存储端）</h3><p>NAS：Network Attached Storage：网络附属存储<br>​        NFS是NAS的一种</p>
<p><strong>（1）安装NFS服务器</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@nas ~]# yum -y install nfs-utils</span><br><span class="line">[root@nas ~]# mkdir /webdata   #存储网站代码</span><br><span class="line">[root@nas ~]# echo "nfs test..." &gt; /webdata/index.html   #放置测试页面</span><br></pre></td></tr></table></figure>

<p><strong>（2）配置NFS服务器</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@nas ~]# vim /etc/exports</span><br><span class="line">/webdata     192.168.142.0/24(rw) </span><br><span class="line">​注释:</span><br><span class="line">/webdata指的是发布资源的目录</span><br><span class="line">192.168.122.0/24允许访问NFS的客户机</span><br><span class="line">(rw)可读可写</span><br></pre></td></tr></table></figure>

<p><strong>（3）启动NFS服务器</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@nas ~]# systemctl start nfs-server</span><br><span class="line">[root@nas ~]# systemctl enable nfs-server</span><br><span class="line"></span><br><span class="line">检查NFS输出是否正常</span><br><span class="line">[root@nas ~]# exportfs -v    //-v 检查输出的目录</span><br><span class="line">/webdata </span><br><span class="line">192.168.122.0/24(rw,wdelay,no_root_squash,no_subtree_check,sec=sys,rw,secure,no_root_squash,no_all_squash)</span><br></pre></td></tr></table></figure>

<h3 id="2-web1-web2-web3-客户端"><a href="#2-web1-web2-web3-客户端" class="headerlink" title="2.web1 web2 web3 客户端"></a>2.web1 web2 web3 客户端</h3><p>三台服务器都进行如下操作：</p>
<p>（1）安装NFS客户端</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@web1 ~]# yum -y install nfs-utils httpd</span><br><span class="line">[root@web1 ~]# systemctl start httpd</span><br><span class="line">[root@web1 ~]# systemctl enable httpd</span><br></pre></td></tr></table></figure>

<p>（2）查看存储端共享</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@web1 ~]# showmount -e 192.168.142.133   //查询NFS服务器可用目录</span><br><span class="line">Export list for 192.168.142.133</span><br><span class="line">/webdata 192.168.142.0/24</span><br></pre></td></tr></table></figure>

<p>（3）手动挂载</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@web1 ~]# mount -t nfs 192.168.142.133:/webdata      /var/www/html/</span><br><span class="line">​注释</span><br><span class="line">mount     -t     nfs    192.168.142.133:/webdata    /var/www/html</span><br><span class="line">挂载命令  类型  nfs类型   nfs服务器地址：nfs输出目录      本地目录</span><br></pre></td></tr></table></figure>

<p>（4）查看挂载</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@web1 ~]# df</span><br><span class="line">192.168.142.133:/webdata 17811456 4444928 13366528   25% /var/www/html</span><br><span class="line">[root@web1 ~]# ls /var/www/html/</span><br><span class="line">index.html</span><br></pre></td></tr></table></figure>

<p>（5）使用web客户端查看web服务器</p>
<h3 id="3-测试网站访问"><a href="#3-测试网站访问" class="headerlink" title="3.测试网站访问"></a>3.测试网站访问</h3><p>firefox 192.168.122.85</p>
<p>firefox 192.168.122.111</p>
<p>firefox 192.168.122.166</p>
<h2 id="三、SSH-Server"><a href="#三、SSH-Server" class="headerlink" title="三、SSH Server"></a>三、SSH Server</h2><p>SSH（安全外壳协议）远程操作和管理系统，方便而且安全可靠</p>
<p><strong>SSH 服务器实战</strong></p>
<p>1.登录Centos</p>
<p>2.查询SSH是否安装</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@ssh ~]# rpm -qa | grep ssh</span><br><span class="line"></span><br><span class="line">若没安装SSH则可输入</span><br><span class="line">[root@web1 ~]# yum install openssh-server</span><br></pre></td></tr></table></figure>

<p>3.SSH服务管理</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">启动服务（默认启动）</span><br><span class="line">[root@ssh ~]# systemctl start sshd </span><br><span class="line"></span><br><span class="line">查看端口</span><br><span class="line">[root@ssh ~]# netstat -antp | grep sshd</span><br><span class="line">//22号端口提供者SSH服务</span><br><span class="line"></span><br><span class="line">开机启动（默认启动）</span><br><span class="line">[root@ssh ~]# systemctl enable sshd</span><br></pre></td></tr></table></figure>

<p>4.使用SSH远程管理</p>
<p>​        ssh   账户名@IP地址</p>
<h1 id="⑰Linux网站服务"><a href="#⑰Linux网站服务" class="headerlink" title="⑰Linux网站服务"></a>⑰Linux网站服务</h1><h2 id="一、概念"><a href="#一、概念" class="headerlink" title="一、概念"></a>一、概念</h2><p>UI的转变：B/S架构</p>
<p>HTML：HyperText Markup Language 超级 文本 标记 语言</p>
<p>网页：使用HTML、PHP、JAVA语言格式书写的文件。</p>
<p>主页：网页中呈现用户的第一个页面。</p>
<p>网站：多个网页组合而成的一台网站服务器</p>
<p>URL：统一资源定位符（Uniform Resource Locator），访问网站的地址。例如<a href="http://www.baidu.com/1.html" target="_blank" rel="noopener">http://www.baidu.com/1.html</a></p>
<p>网站架构：</p>
<p>​        LAMP：Linux + Apache + MySQL + PHP</p>
<p>​        系统+服务器程序+数据管理软件+中间软件</p>
<h2 id="二、静态站点"><a href="#二、静态站点" class="headerlink" title="二、静态站点"></a>二、静态站点</h2><h3 id="1-Apache基础"><a href="#1-Apache基础" class="headerlink" title="1.Apache基础"></a>1.Apache基础</h3><p>（建议使用2.4及以上的版本）</p>
<p>​    Apache官网: <a href="http://www.apache.org" target="_blank" rel="noopener">www.apache.org</a></p>
<p>​    软件包名称： httpd</p>
<p>​    服务端口: 80/tcp(http) 443/tcp(https)</p>
<p>​    配置文件: /etc/httpd/conf/httpd.conf</p>
<p>​    子配置文件：/etc/httpd/conf.d/*.conf</p>
<p>​    主目录：/var/www/html（网站源代码默认位置）</p>
<h3 id="2-安装Apache"><a href="#2-安装Apache" class="headerlink" title="2.安装Apache"></a>2.安装Apache</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">安装</span><br><span class="line">[root@localhost ~]# yum -y install httpd</span><br><span class="line">启动</span><br><span class="line">[root@localhost ~]# systemctl start httpd</span><br><span class="line">查看服务状态</span><br><span class="line">[root@localhost ~]# systemctl status  httpd</span><br><span class="line">开机自启</span><br><span class="line">[root@localhost ~]# systemctl enable httpd</span><br><span class="line"></span><br><span class="line">关闭防火墙</span><br><span class="line">[root@localhost ~]# systemctl stop  firewalld</span><br><span class="line">关闭selinux</span><br><span class="line">[root@localhost ~]# setenforce 0</span><br><span class="line">查看版本</span><br><span class="line">[root@localhost ~]# httpd -v</span><br><span class="line">Server version: Apache/2.4.6 (CentOS)</span><br></pre></td></tr></table></figure>

<h3 id="3-虚拟主机"><a href="#3-虚拟主机" class="headerlink" title="3.虚拟主机"></a>3.虚拟主机</h3><p>目的：在一台物理服务器上运行多个网站 </p>
<p>类型：基于主机名<a href="http://www.a.org、www.b.org" target="_blank" rel="noopener">www.a.org、www.b.org</a></p>
<p>配置虚拟主机目标：</p>
<p>​        在一台服务器上，实现两个网站的架设</p>
<p>​        网站域名              网站资源存放目录</p>
<p>​        <a href="http://www.a.org" target="_blank" rel="noopener">www.a.org</a>          /var/www/html/a.org </p>
<p>​        <a href="http://www.b.org" target="_blank" rel="noopener">www.b.org</a>         /b.org </p>
<p>​       ！！！注意关闭firewalld和selinux</p>
<ul>
<li><strong>服务器</strong></li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">###   www.a.org站点设置</span></span></span><br><span class="line">========================</span><br><span class="line">1.准备网站源码（网页）目录</span><br><span class="line">[root@localhost ~]# mkdir /var/www/html/a.org </span><br><span class="line">[root@localhost ~]# vim /var/www/html/a.org/index.html </span><br><span class="line">输入网页内容，a.com.com.com</span><br><span class="line"></span><br><span class="line">2.创建a.org的网站配置文件</span><br><span class="line">[root@localhost ~]# vim /etc/httpd/conf.d/a.org.conf </span><br><span class="line">&lt;VirtualHost *:80&gt;     //某个虚拟主机</span><br><span class="line">ServerName www.a.org   //服务器起个名字</span><br><span class="line">DocumentRoot /var/www/html/a.org   //网站的根目录</span><br><span class="line">&lt;/VirtualHost&gt;</span><br><span class="line"></span><br><span class="line">3.检测配置文件语法，重启服务</span><br><span class="line">[root@localhost ~]# httpd -t </span><br><span class="line">[root@localhost ~]# systemctl restart httpd </span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">###   www.b.org站点设置</span></span></span><br><span class="line">========================</span><br><span class="line">1.准备网站源码目录</span><br><span class="line">[root@localhost ~]# mkdir /b.org </span><br><span class="line">[root@localhost ~]# vim /b.org/index.html </span><br><span class="line">b.org.org.org作为网页内容</span><br><span class="line"></span><br><span class="line">2.创建b.org的网站配置文件 </span><br><span class="line">[root@localhost ~]# vim /etc/httpd/conf.d/b.org.conf </span><br><span class="line"><span class="meta">#</span><span class="bash">在文件中输入以下内容</span></span><br><span class="line">&lt;VirtualHost *:80&gt;</span><br><span class="line">ServerName www.b.org</span><br><span class="line">DocumentRoot /b.org</span><br><span class="line">&lt;/VirtualHost&gt;</span><br><span class="line">&lt;Directory "/b.org"&gt;</span><br><span class="line">Require all granted</span><br><span class="line">&lt;/Directory&gt;</span><br><span class="line"></span><br><span class="line">3.检测配置文件语法，重启服务</span><br><span class="line">[root@localhost ~]# httpd -t </span><br><span class="line">无报错，就可以启动服务器了</span><br><span class="line">[root@localhost ~]# systemctl restart httpd</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>客户端</strong></li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># Linux客户端域名解析</span></span></span><br><span class="line">[root@localhost ~]# vim  /etc/hosts</span><br><span class="line">10.0.128.118  www.a.org   //填写web服务器的IP</span><br><span class="line">10.0.128.118  www.b.org   //填写web服务器的IP</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># Linux客户端测试网站可用性</span></span></span><br><span class="line">字符测试</span><br><span class="line">[root@localhost ~]# yum install -y elinks</span><br><span class="line">[root@localhost ~]# elink http://www.b.org</span><br><span class="line">图形测试：通过火狐浏览器，分别访问两个网站地址</span><br></pre></td></tr></table></figure>

<h2 id="三、动态站点"><a href="#三、动态站点" class="headerlink" title="三、动态站点"></a>三、动态站点</h2><h3 id="部署论坛系统discuz"><a href="#部署论坛系统discuz" class="headerlink" title="部署论坛系统discuz"></a>部署论坛系统discuz</h3><p>​    discuz开源论坛代码服务社区</p>
<p>1.基础环境</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@apache ~]# sed -ri '/^SELINUX=/cSELINUX=disabled' /etc/selinux/config </span><br><span class="line">[root@apache ~]# setenforce 0</span><br><span class="line">[root@apache ~]# systemctl stop firewalld.service </span><br><span class="line">[root@apache ~]# systemctl disable firewalld.service</span><br></pre></td></tr></table></figure>

<p>2.安装LAMP</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@apache ~]# yum -y install httpd mariadb-server mariadb php php-mysql gd php-gd</span><br><span class="line">[root@apache ~]# systemctl start httpd mariadb</span><br><span class="line">[root@apache ~]# systemctl enable httpd mariadb</span><br></pre></td></tr></table></figure>

<p>3.安装Discuz</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">### 1. 导入discuz网站源码</span></span></span><br><span class="line">[root@apache ~]# wget http://download.comsenz.com/DiscuzX/2.5/Discuz_X2.5_SC_UTF8.zip</span><br><span class="line"></span><br><span class="line">[root@apache ~]# mkdir    -p      /webroot/discuz</span><br><span class="line">[root@apache ~]# yum  install  -y   unzip</span><br><span class="line">[root@apache ~]#unzip  Discuz_X2.5_SC_UTF8.zip</span><br><span class="line">[root@apache ~]#cp -rf upload/* /webroot/discuz/</span><br><span class="line">[root@apache ~]#chown -R  apache.apache  /webroot/discuz/</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">### 2. Apache 配置虚拟主机</span></span></span><br><span class="line">[root@apache ~]# vim /etc/httpd/conf.d/discuz.conf</span><br><span class="line">&lt;VirtualHost *:80&gt;</span><br><span class="line"> ServerName www.discuz.com</span><br><span class="line"> DocumentRoot /webroot/discuz</span><br><span class="line">&lt;/VirtualHost&gt;</span><br><span class="line"></span><br><span class="line">&lt;Directory "/webroot/discuz"&gt;</span><br><span class="line"> Require all granted</span><br><span class="line">&lt;/Directory&gt;</span><br><span class="line"></span><br><span class="line">[root@apache ~]# systemctl restart httpd</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">### 3. 准备数据库</span></span></span><br><span class="line">[root@localhost discuz]# mysql</span><br><span class="line">MariaDB [(none)]&gt; create database discuz ;</span><br><span class="line">切记创建数据库要再敲一遍，可以检查是否创建成功</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">###4. 安装discuz [任何client]  过程略</span></span></span><br><span class="line">客户端测试时，添加域名解析</span><br><span class="line">[root@localhost  ~]# vim /etc/hosts</span><br><span class="line">192.168.122.161  www.discuz.com</span><br></pre></td></tr></table></figure>

<p>4.客户端测试</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">#  Linux客户端域名解析</span></span></span><br><span class="line">[root@apache ~]# vim   /etc/hosts</span><br><span class="line">10.0.128.118  www.a.org</span><br><span class="line">10.0.128.118  www.b.org</span><br><span class="line">10.0.128.118  www.discuz.com</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">#	Linux客户端测试网站可用性</span></span></span><br><span class="line">字符测试</span><br><span class="line">[root@apache ~]# yum install -y elinks</span><br><span class="line">[root@apache ~]# elinks http:// www.discuz.com</span><br><span class="line">图形测试：通过火狐浏览器，访问网站地址http:// www.discuz.com</span><br></pre></td></tr></table></figure>

<h1 id="⑱Linux域名服务"><a href="#⑱Linux域名服务" class="headerlink" title="⑱Linux域名服务"></a>⑱Linux域名服务</h1><h2 id="一、基本概念"><a href="#一、基本概念" class="headerlink" title="一、基本概念"></a>一、基本概念</h2><p><strong>1.hosts文件  /etc/hosts</strong></p>
<p>作用： 实现名字解析，主要为本地主机名、集群节点提供快速解析</p>
<p>数据库： 平面式结构，集中式数据库</p>
<p>缺点：不便于查询，更新</p>
<p><strong>2.域名系统DNS</strong></p>
<p>作用： 实现名字解析（例如将主机名解析为IP）</p>
<p>（分布式，层次性）</p>
<p><strong>3.FQDN</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">FQDN：(Fully Qualified Domain Name)完全合格域名/全称域名</span><br><span class="line">	baidu.com.</span><br><span class="line">	www.baidu.com.</span><br><span class="line">	www.music.baidu.com.</span><br><span class="line">	www.icbc.com.cn.</span><br><span class="line">	主机名.四级域.三级域.二级域.顶级域.（根域）</span><br></pre></td></tr></table></figure>

<p>命名空间：图示</p>
<img src= "/img/loading.gif" data-src="/2018/04/16/linux%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C/image-20200717215809748.png" alt="image-20200717215809748" style="zoom: 67%;">

<p><img src= "/img/loading.gif" data-src="/2018/04/16/linux%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C/image-20200717220303787.png" alt="image-20200717220303787"></p>
<p><img src= "/img/loading.gif" data-src="/2018/04/16/linux%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C/image-20200717220310840.png" alt="image-20200717220310840"></p>
<p><strong>4.DNS解析流程</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">例如客户端解析 www.126.com</span><br><span class="line">1. 客户端查询自己的缓存（包含hosts中的记录），如果没有将查询发送&#x2F;etc&#x2F;resolv.conf中的DNS服务器</span><br><span class="line"></span><br><span class="line">2. 如果本地DNS服务器对于请求的信息具有权威性，会将（权威答案）发送到客户端。</span><br><span class="line"></span><br><span class="line">3. 否则（不具有权威性），如果DNS服务器在其缓存中有请求信息，则将（非权威答案）发送到客户端 </span><br><span class="line"></span><br><span class="line">4. 如果缓存中没有该查询信息，DNS服务器将搜索权威DNS服务器以查找信息：</span><br><span class="line">a. 从根区域开始，按照DNS层次结构向下搜索，直至对于信息具有权威的名称服务器，为客户端获答案</span><br><span class="line">DNS服务器将信息传递给客户端 ，并在自己的缓存中保留一个副本，以备以后查找。</span><br><span class="line">b. 转发到其它DNS服务器</span><br></pre></td></tr></table></figure>

<p><strong>5.正向解析/反向解析</strong></p>
<p>​    DNS服务主要起到两个作用：<br>​    　　1）可以把相对应的域名解析为对应的IP地址，这叫正向解析。<br>​    　　2）可以把相对应的IP地址解析为对应的域名，这叫反向解析。（反垃圾邮件）</p>
<p>服务器类型：主服务器、从服务器、缓存服务器</p>
<h2 id="二、DNS域名解析示例"><a href="#二、DNS域名解析示例" class="headerlink" title="二、DNS域名解析示例"></a>二、DNS域名解析示例</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">1.DNS本地缓存记录</span><br><span class="line"><span class="meta">#</span><span class="bash"> vim   /etc/hosts</span></span><br><span class="line">192.168.142.129  www.memeda.com</span><br><span class="line"></span><br><span class="line">2.主机测试</span><br><span class="line"><span class="meta">#</span><span class="bash">ping   www.memeda.com</span></span><br><span class="line"><span class="meta">#</span><span class="bash">elinks  http://www.memeda.com</span></span><br><span class="line"></span><br><span class="line">3.网站服务器辅助验证</span><br><span class="line"><span class="meta">#</span><span class="bash">yum  install -y  httpd</span></span><br><span class="line"><span class="meta">#</span><span class="bash">systemctl start  httpd</span></span><br><span class="line"><span class="meta">#</span><span class="bash">systemctl   stop   firewalld</span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="built_in">echo</span>  memeda  &gt; /var/www/html/index.html</span></span><br></pre></td></tr></table></figure>

<h2 id="三、ISP阿里域名申请及解析-略"><a href="#三、ISP阿里域名申请及解析-略" class="headerlink" title="三、ISP阿里域名申请及解析(略)"></a>三、ISP阿里域名申请及解析(略)</h2></div><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">MiaoZhenChao</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://www.luanyu.cool/2018/04/16/linux%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C/">http://www.luanyu.cool/2018/04/16/linux%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://www.luanyu.cool" target="_blank">ZhenChaoNotes</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/linux/">linux</a></div><div class="post_share"><div class="social-share" data-image="https://ssyerv1.oss-cn-hangzhou.aliyuncs.com/picture/dc5854e39f8e48fe990ad13bf4667336.jpg!sswm" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"/><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js"></script></div></div><div class="post-reward"><button class="reward-button"><i class="fas fa-qrcode"></i> 打赏<div class="reward-main"><ul class="reward-all"><li class="reward-item"><img class="post-qr-code__img" src="/img/wechat.jpg" alt="wechat" onclick="window.open('http://123.57.180.161/wechat.jpg')"/><div class="post-qr-code__desc">wechat</div></li><li class="reward-item"><img class="post-qr-code__img" src="/img/alipay.jpg" alt="alipay" onclick="window.open('http://123.57.180.161/alipay.jpg')"/><div class="post-qr-code__desc">alipay</div></li></ul></div></button></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-full"><a href="/2018/06/03/%E2%80%9C%E4%B8%8D%E5%BF%98%E5%88%9D%E5%BF%83%EF%BC%8C%E7%89%A2%E8%AE%B0%E4%BD%BF%E5%91%BD%E2%80%9D%E4%B8%BB%E9%A2%98%E6%BC%94%E8%AE%B2%E6%AF%94%E8%B5%9B%E6%BC%94%E8%AE%B2%E7%A8%BF/"><img class="prev-cover" data-src="https://ssyerv1.oss-cn-hangzhou.aliyuncs.com/picture/9ab549e0002f446085f3da50ad793279.jpg!sswm" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">“不忘初心，牢记使命”主题演讲比赛演讲稿</div></div></a></div></nav><div class="relatedPosts"><div class="relatedPosts_headline"><i class="fas fa-thumbs-up fa-fw"></i><span> 相关推荐</span></div><div class="relatedPosts_list"><div class="relatedPosts_item"><a href="/2020/10/09/centos6.10使用ssh连接报错/" title="centos6.10使用ssh连接报错"><img class="relatedPosts_cover" data-src="https://ssyerv1.oss-cn-hangzhou.aliyuncs.com/picture/e8e4e6710e3d41d2b541987acfc7998f.jpg!sswm"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="far fa-calendar-alt fa-fw"></i> 2020-10-09</div><div class="relatedPosts_title">centos6.10使用ssh连接报错</div></div></a></div><div class="relatedPosts_item"><a href="/2020/09/08/使用samba完成linux与windows文件共享/" title="使用samba完成linux与windows文件共享"><img class="relatedPosts_cover" data-src="https://ssyerv1.oss-cn-hangzhou.aliyuncs.com/picture/474218e81bcb44a1bff607cd329324bd.jpg!sswm"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="far fa-calendar-alt fa-fw"></i> 2020-09-08</div><div class="relatedPosts_title">使用samba完成linux与windows文件共享</div></div></a></div><div class="relatedPosts_item"><a href="/2020/09/08/使用mount实现linux与windows文件实时共享/" title="挂载Windows文件夹到Linux"><img class="relatedPosts_cover" data-src="https://ssyerv1.oss-cn-hangzhou.aliyuncs.com/picture/8e55f6ede8a64d4b9ee76536cabbc36d.jpg!sswm"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="far fa-calendar-alt fa-fw"></i> 2020-09-08</div><div class="relatedPosts_title">挂载Windows文件夹到Linux</div></div></a></div><div class="relatedPosts_item"><a href="/2019/12/16/Linux下编译安装MySQL5.6/" title="Linux下编译安装MySQL5.6"><img class="relatedPosts_cover" data-src="https://ssyerv1.oss-cn-hangzhou.aliyuncs.com/picture/de883141fa8a4538bbf777190d871e03.jpg!sswm"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="far fa-calendar-alt fa-fw"></i> 2019-12-16</div><div class="relatedPosts_title">Linux下编译安装MySQL5.6</div></div></a></div><div class="relatedPosts_item"><a href="/2019/03/13/linux-wa%过高，iostat查看io状况/" title="linux wa%过高，iostat查看io状况"><img class="relatedPosts_cover" data-src="https://ssyerv1.oss-cn-hangzhou.aliyuncs.com/picture/002115827ab54b7dac605f61bb27eaa9.jpg!sswm"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="far fa-calendar-alt fa-fw"></i> 2019-03-13</div><div class="relatedPosts_title">linux wa%过高，iostat查看io状况</div></div></a></div></div></div><hr><div id="post-comment"><div class="comment_headling"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div><div id="disqus_thread"></div><script>var disqus_config = function () {
  this.page.url = 'http://www.luanyu.cool/2018/04/16/linux%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C/';
  this.page.identifier = '2018/04/16/linux基本操作/';
  this.page.title = 'linux基本操作';
};
(function() { 
  var d = document, s = d.createElement('script');
  s.src = 'https://.disqus.com/embed.js';
  s.setAttribute('data-timestamp', +new Date());
  (d.head || d.body).appendChild(s);
})();
</script><script>function getDisqusCount() {
  var d = document, s = d.createElement('script');
  s.src = 'https://.disqus.com/count.js';
  s.id = 'dsq-count-scr';
  (d.head || d.body).appendChild(s);
}

window.addEventListener('load', getDisqusCount, false);</script></div></article></main><footer id="footer" style="background-image: url(https://ssyerv1.oss-cn-hangzhou.aliyuncs.com/picture/d91493756f794e678d99cb9524cd2dfd.jpg!sswm)" data-type="photo"><div id="footer-wrap"><div class="copyright">&copy;2010 - 2021 By MiaoZhenChao</div><div class="framework-info"><span>驱动 </span><a href="https://hexo.io" target="_blank" rel="noopener"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 </span><a href="https://github.com/jerryc127/hexo-theme-butterfly" target="_blank" rel="noopener"><span>Butterfly</span></a></div><div class="footer_custom_text">Hi, welcome to my <a href="/">blog</a>!</div><div class="icp"><a href="http://www.beian.miit.gov.cn/state/outPortal/loginPortal.action" target="_blank" rel="noopener"><img class="icp-icon" src="/img/icp.png"/><span>豫ICP备20019375号</span></a></div></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><button id="readmode" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="font_plus" title="放大字体"><i class="fas fa-plus"></i></button><button id="font_minus" title="缩小字体"><i class="fas fa-minus"></i></button><button class="translate_chn_to_cht" id="translateLink" title="简繁转换">繁</button><button id="darkmode" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button></div><div id="rightside-config-show"><button id="rightside_config" title="设置"><i class="fas fa-cog"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="scroll_to_comment fas fa-comments"></i></a><button class="close" id="mobile-toc-button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></section><div class="search-dialog" id="local-search"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div></div><hr/><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"><span>由</span> <a href="https://github.com/wzpan/hexo-generator-search" target="_blank" rel="noopener" style="color:#49B1F5;">hexo-generator-search</a>
 <span>提供支持</span></div></div></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div class="search-mask"></div><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="/js/third-party/fireworks.js"></script><script defer id="ribbon" src="/js/third-party/canvas-ribbon.js" size="150" alpha="0.6" zIndex="-1" mobile="false" data-click="true"></script><script id="ribbon_piao" mobile="false" src="/js/third-party/piao.js"></script><script id="canvas_nest" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="false" src="/js/third-party/canvas-nest.js"></script><script src="/js/third-party/activate-power-mode.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
document.body.addEventListener('input', POWERMODE);
</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module" defer></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js" async></script><script src="/js/search/local-search.js"></script><script>if (document.getElementsByClassName('mermaid').length) {
  loadScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js',function () {
    mermaid.initialize({
      theme: 'default',
  })
})
}</script><script src="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@latest/Hexo/js/mouse_snow.min.js"></script><script src="/js/Lete.js"></script><script src="/js/daovoice.js"></script><script type="text/javascript" src="/js/crash_cheat.js"></script></body></html>